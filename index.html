<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>arkitektur.digst.dk Brugerstyring</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in §N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .assertion  for assertions                    (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	  padding: .5em;
	  border: thin solid #ddd; border-radius: .5em;
	  margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	  margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	  margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: medium;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	.assertion,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		background: #EEE;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
		border-bottom-width: 3px !important;
		margin-bottom: 0px !important;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li .secno { font-size: 85%; }
	.toc > li li li li li { font-size:   85%;    }
	.toc > li li li li li .secno { font-size: 100%; }

	/* @supports not (display:grid) { */
		.toc > li             { margin: 1.5rem 0;    }
		.toc > li li          { margin: 0.3rem 0;    }
		.toc > li li li       { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}

		.toc li {
			clear: both;
		}

		:not(li) > .toc              { margin-left:  5rem; }
		.toc .secno                  { margin-left: -5rem; }
		.toc > li li li .secno       { margin-left: -7rem; }
		.toc > li li li li .secno    { margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc              { margin-left:  4rem; }
			.toc .secno                  { margin-left: -4rem; }
			.toc > li li li              { margin-left:  1rem; }
			.toc > li li li .secno       { margin-left: -5rem; }
			.toc > li li li li .secno    { margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			   comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover {
			background: rgba(75%, 75%, 75%, .25);
			border-bottom: 3px solid #054572;
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-left: calc(13px + 26.5rem - 50vw);
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-left: calc(40em - 50vw) !important;
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-left: 0 !important;
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version 60a9f27730c0c9ae3e20485f824cef3713caf5fb" name="generator">
  <link href="http://github.com/digst/trust/index.md" rel="canonical">
<style>
@media print {
  html { margin: 0cm 2cm 2cm 0cm; font-size: 80%; }
  /* DIGST fonts */
  body { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;}
  h2,h3,h4, h4 dfn { font-family: "Garamond", serif; color: black; margin-bottom: 0; font-style: normal; font-weight: normal;}

  h2:not(#subtitle) { page-break-before: always; font-size: 250%; border-bottom: solid 0.5px black; padding-top: 20px; margin-bottom: 6px;}
  h3 { font-size: 145%;}
  h4 { font-size: 125%;}

  #toc {page-break-before: always;}

  /* DIGST-like frontpage */
  .head { width: 50%; margin-left: 24px; padding: 0px; background-color: #031D5C;}
  .head div { background-color: white; padding: 24px; }
  .head hr { display: none;}
  .head h1 { background-color: #031D5C; color: white; margin: 0px; padding: 50px 0px 50px 24px; font-weight: normal; }
  #subtitle { padding-left: 24px; background-color: #031D5C; color: #031D5C; }
  .head time { display: block; font-family: "Helvetica Neue", Helvetica, Arial; margin: 0px; background-color: #031D5C; font-size: 80%; color: white;}
  .toc li { line-height: 70%; font-family: "Helvetica Neue", Helvetica, Arial;
    font-weight: 600; font-size: 90%; }
  .self-link { display: none; }

  blockquote { font-size: 80%; font-style: italic; margin-left: 5%; width: 70%; border-left-width: 2px;}
	h2#abstract {display: none;}
	.p-summary {width: 50%; margin-left: 24px; padding: 0px;}
}

.new {
    border: solid 3px green;
    padding: 6px;
    margin: 18px 0px 18px 0px;
}

/* style til egne og andres definitioner rød/blå*/
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-selflinks */

.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: gray;
    color: white;
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: black;
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: #005a9c;
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1>Fællesoffentlig <br>referencearkitektur for <br>brugerstyring</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Living Document, <time class="dt-updated" datetime="2019-11-29">29 November 2019</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="http://github.com/digst/trust/index.md">http://github.com/digst/trust/index.md</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/digst/trust/issues/">GitHub</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Digitaliseringsstyrelsen http://arkitektur.digst.dk</span>
     <dd class="editor p-author h-card vcard"><span class="p-name fn"></span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <hr title="Separator for header">
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#forord"><span class="secno"></span> <span class="content">Forord</span></a>
    <li><a href="#resume-in-english"><span class="secno"></span> <span class="content"> Resume (in english)</span></a>
    <li><a href="#resume"><span class="secno"></span> <span class="content">Resume</span></a>
    <li>
     <a href="#introduktion-phj"><span class="secno">1</span> <span class="content">Introduktion [phj]</span></a>
     <ol class="toc">
      <li><a href="#forml"><span class="secno">1.1</span> <span class="content">Formål</span></a>
      <li><a href="#anvendelse"><span class="secno">1.2</span> <span class="content">Anvendelse</span></a>
      <li><a href="#mlgruppe"><span class="secno">1.3</span> <span class="content">Målgruppe</span></a>
      <li><a href="#omfang-og-afgrnsning"><span class="secno">1.4</span> <span class="content">Omfang og afgrænsning</span></a>
      <li><a href="#centrale-begreber"><span class="secno">1.5</span> <span class="content">Centrale begreber</span></a>
      <li><a href="#tilblivelse-og-styring"><span class="secno">1.6</span> <span class="content">Tilblivelse og styring</span></a>
      <li><a href="#anvendt-metode-notation-og-signaturforklaring"><span class="secno">1.7</span> <span class="content">Anvendt metode, notation og signaturforklaring</span></a>
      <li><a href="#andre-referencearkitekturer-madsh"><span class="secno">1.8</span> <span class="content">Andre referencearkitekturer [madsh]</span></a>
      <li><a href="#lsevejledning"><span class="secno">1.9</span> <span class="content">Læsevejledning</span></a>
     </ol>
    <li>
     <a href="#strategi-madsh"><span class="secno">2</span> <span class="content">Strategi [madsh]</span></a>
     <ol class="toc">
      <li><a href="#temaer"><span class="secno">2.1</span> <span class="content">Temaer</span></a>
      <li><a href="#aftalte-principper-madsh"><span class="secno">2.2</span> <span class="content">Aftalte principper [madsh]</span></a>
      <li><a href="#vision"><span class="secno">2.3</span> <span class="content">Vision</span></a>
      <li><a href="#vrdiskabelse"><span class="secno">2.4</span> <span class="content">Værdiskabelse</span></a>
      <li><a href="#juridiske-rammer"><span class="secno">2.5</span> <span class="content">Juridiske rammer</span></a>
      <li><a href="#sikkerhed"><span class="secno">2.6</span> <span class="content">Sikkerhed</span></a>
      <li><a href="#fllesoffentlige-arkitekturprincipper-og--regler"><span class="secno">2.7</span> <span class="content">Fællesoffentlige arkitekturprincipper og -regler</span></a>
     </ol>
    <li>
     <a href="#forretningsarkitektur"><span class="secno">3</span> <span class="content">Forretningsarkitektur</span></a>
     <ol class="toc">
      <li><a href="#om-tillidstjenester-og-eidas"><span class="secno">3.1</span> <span class="content">Om tillidstjenester og eIDAS</span></a>
      <li><a href="#forretningsmssig-kontekst"><span class="secno">3.2</span> <span class="content">Forretningsmæssig kontekst</span></a>
      <li>
       <a href="#forretningsfunktioner"><span class="secno">3.3</span> <span class="content">Forretningsfunktioner</span></a>
       <ol class="toc">
        <li><a href="#forretningsfunktionen-udstedelse-af-identifikationsmidler"><span class="secno">3.3.1</span> <span class="content">Forretningsfunktionen udstedelse af identifikationsmidler</span></a>
        <li><a href="#forretningsfunktionen-autentifikation"><span class="secno">3.3.2</span> <span class="content">Forretningsfunktionen autentifikation</span></a>
        <li><a href="#foretningsfunktionen-attributbeskrivelse"><span class="secno">3.3.3</span> <span class="content">Foretningsfunktionen attributbeskrivelse</span></a>
        <li><a href="#foretningsfunktionen-udforme-adgangspolitik"><span class="secno">3.3.4</span> <span class="content">Foretningsfunktionen udforme adgangspolitik</span></a>
        <li><a href="#forretningsfunktionen-adgangskontrol"><span class="secno">3.3.5</span> <span class="content">Forretningsfunktionen adgangskontrol</span></a>
        <li><a href="#forretningsfunktionen-forebyggelse-og-kontrol"><span class="secno">3.3.6</span> <span class="content">Forretningsfunktionen forebyggelse og kontrol</span></a>
       </ol>
      <li>
       <a href="#forretningsmssige-arkitekturmnstre"><span class="secno">3.4</span> <span class="content">Forretningsmæssige arkitekturmønstre</span></a>
       <ol class="toc">
        <li><a href="#mnster-1forretningstjenester-med-egen-autentifikationstjenester"><span class="secno">3.4.1</span> <span class="content">Mønster 1:Forretningstjenester med egen autentifikationstjenester</span></a>
        <li><a href="#mnster-2-delt-intern-autentifikationstjeneste"><span class="secno">3.4.2</span> <span class="content">Mønster 2: Delt, intern autentifikationstjeneste</span></a>
        <li><a href="#mnster-3-national-fderation-med-central-autentifikationstjeneste"><span class="secno">3.4.3</span> <span class="content">Mønster 3: National føderation med central autentifikationstjeneste</span></a>
        <li><a href="#mnster-4-flles-domnebroker-for-decentrale-autentifikationstjenester"><span class="secno">3.4.4</span> <span class="content">Mønster 4: Fælles domænebroker for decentrale autentifikationstjenester</span></a>
        <li><a href="#mnster-5-interfderation-mellem-domner"><span class="secno">3.4.5</span> <span class="content">Mønster 5: Interføderation mellem domæner</span></a>
       </ol>
      <li>
       <a href="#tillidskder-i-kosystemer"><span class="secno">3.5</span> <span class="content">Tillidskæder i økosystemer</span></a>
       <ol class="toc">
        <li><a href="#tillid-gennem-nsis"><span class="secno">3.5.1</span> <span class="content">Tillid gennem NSIS</span></a>
       </ol>
      <li><a href="#forretningsroller-og-aktrer"><span class="secno">3.6</span> <span class="content">Forretningsroller og aktører</span></a>
      <li><a href="#forretningsobjekter-og-begreber-madsh"><span class="secno">3.7</span> <span class="content">Forretningsobjekter og begreber [madsh]</span></a>
     </ol>
    <li>
     <a href="#teknisk-arkitektur"><span class="secno">4</span> <span class="content">Teknisk arkitektur</span></a>
     <ol class="toc">
      <li>
       <a href="#ndvendige-applikationsservices"><span class="secno">4.1</span> <span class="content">Nødvendige applikationsservices</span></a>
       <ol class="toc">
        <li><a href="#akkreditivtjeneste"><span class="secno">4.1.1</span> <span class="content">Akkreditivtjeneste</span></a>
        <li><a href="#attributbeskrivelse"><span class="secno">4.1.2</span> <span class="content">Attributbeskrivelse</span></a>
        <li><a href="#authentifikation-genkendelse"><span class="secno">4.1.3</span> <span class="content">Authentifikation (genkendelse?)</span></a>
        <li><a href="#billetudstedelse"><span class="secno">4.1.4</span> <span class="content">Billetudstedelse</span></a>
        <li><a href="#adgangskontrol-men-ikke-autorisation"><span class="secno">4.1.5</span> <span class="content">Adgangskontrol (men ikke autorisation?)</span></a>
       </ol>
      <li>
       <a href="#orkestreringseksempler"><span class="secno">4.2</span> <span class="content">Orkestreringseksempler</span></a>
       <ol class="toc">
        <li><a href="#administration-af-elektronisk-identitet-akkreditiver-og-attributter"><span class="secno">4.2.1</span> <span class="content">Administration af elektronisk identitet, akkreditiver og attributter</span></a>
        <li><a href="#autentifikation"><span class="secno">4.2.2</span> <span class="content">Autentifikation</span></a>
        <li><a href="#billetudstedelse-og-adgangskontrol"><span class="secno">4.2.3</span> <span class="content">Billetudstedelse og adgangskontrol</span></a>
        <li><a href="#kontrol-og-rapportering"><span class="secno">4.2.4</span> <span class="content">Kontrol og rapportering</span></a>
       </ol>
      <li>
       <a href="#tekniske-implementering-af-forretningsfunktioner"><span class="secno">4.3</span> <span class="content">Tekniske implementering af forretningsfunktioner</span></a>
       <ol class="toc">
        <li><a href="#implementering-af-administration-af-elektronisk-identitet-akkreditiver-og-attributter"><span class="secno">4.3.1</span> <span class="content">Implementering af administration af elektronisk identitet, Akkreditiver og Attributter</span></a>
        <li><a href="#implementering-af-registrering-af-elektronisk-identitet"><span class="secno">4.3.2</span> <span class="content">Implementering af Registrering af elektronisk identitet</span></a>
        <li><a href="#implementering-af-anvendelse-af-brugerstyring"><span class="secno">4.3.3</span> <span class="content">Implementering af Anvendelse af brugerstyring?</span></a>
       </ol>
      <li><a href="#understttende-applikationsservices"><span class="secno">4.4</span> <span class="content">Understøttende applikationsservices</span></a>
      <li><a href="#omrder-for-standardisering"><span class="secno">4.5</span> <span class="content">Områder for standardisering</span></a>
     </ol>
    <li>
     <a href="#mlbillede-implementering"><span class="secno">5</span> <span class="content">Målbillede? Implementering?</span></a>
     <ol class="toc">
      <li><a href="#en-mlarkitektur-med-identitetsbrokere"><span class="secno">5.1</span> <span class="content">En målarkitektur med identitetsbrokere</span></a>
      <li><a href="#handleplan-projektliggrelse"><span class="secno">5.2</span> <span class="content">Handleplan? Projektliggørelse?</span></a>
      <li><a href="#registrering-af-identiteter"><span class="secno">5.3</span> <span class="content">Registrering af identiteter</span></a>
      <li><a href="#standarder-for-registrering-af-identiteter"><span class="secno">5.4</span> <span class="content">Standarder for registrering af identiteter</span></a>
      <li><a href="#akkreditiver"><span class="secno">5.5</span> <span class="content">Akkreditiver</span></a>
      <li><a href="#attributter"><span class="secno">5.6</span> <span class="content">Attributter</span></a>
      <li><a href="#brugerkataloger"><span class="secno">5.7</span> <span class="content">Brugerkataloger</span></a>
      <li><a href="#authentifikation"><span class="secno">5.8</span> <span class="content">Authentifikation</span></a>
      <li><a href="#standarder-for-overfrsel-af-autentificerede-brugere"><span class="secno">5.9</span> <span class="content">Standarder for overførsel af autentificerede brugere</span></a>
      <li><a href="#login-tjenester-identitetsbrokere"><span class="secno">5.10</span> <span class="content">Login-tjenester/Identitetsbrokere</span></a>
      <li><a href="#standarder-for-kommunikation-mellem-fderationer"><span class="secno">5.11</span> <span class="content">Standarder for kommunikation mellem føderationer</span></a>
      <li><a href="#flles-lsning-til-fuldmagter"><span class="secno">5.12</span> <span class="content">Fælles løsning til fuldmagter</span></a>
      <li><a href="#brugerstyring-for-tjenestekonsumenter-og-fysiske-apparater-og-sensorer"><span class="secno">5.13</span> <span class="content">Brugerstyring for tjenestekonsumenter og fysiske apparater og sensorer</span></a>
      <li><a href="#standarder-for-identitetsbaserede-webservices"><span class="secno">5.14</span> <span class="content">Standarder for identitetsbaserede webservices</span></a>
      <li><a href="#perspektivering"><span class="secno">5.15</span> <span class="content">Perspektivering</span></a>
     </ol>
    <li>
     <a href="#bilag"><span class="secno"></span> <span class="content">Bilag</span></a>
     <ol class="toc">
      <li><a href="#ordliste"><span class="secno"></span> <span class="content">Ordliste</span></a>
      <li><a href="#kilder-og-baggrundsmateriale"><span class="secno"></span> <span class="content">Kilder og baggrundsmateriale</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <h2 class="no-num heading settled" id="forord"><span class="content">Forord</span></h2>
    Denne referencearkitektur er udarbejdet i sammenhæng med den fællesoffentlige strategi for brugerstyring og for at understøtte implementeringen af Den fællesoffentlige digitaliseringsstrategi 2016-2020. Målet er, at referencearkitekturen skal fungere som et teknisk pejlemærke for udvikling af brugerstyringsløsninger i den offentlige sektor. Dermed har den en tæt relation til den fællesoffentlige rammearkitektur, der er affødt af Digitaliseringsstrategiens initiativ 8.1 og bidrager til realiseringen af ”En digitalt sammenhængende offentlig sektor: Hvidbog om arkitektur for digitalisering”. 
   <p>2017-udgaven af referencearkitekturen omfattede personer. I denne udgave af referencearkitekturen er der yderligere behandlet applikationer som brugere og i noget omfang ting i form af IoT - Internet of Things eller NPE – Non person entities. Brugen af føderationer og tillidstjenester er uddybet.</p>
   <p>Siden første udgave af referencearkitekturen er De fællesoffentlige regler for begrebs- og datamodellering blevet godkendt og udgivet. Derfor er begreberne i denne udgave opdateret og modelleret jfr. disse regler.</p>
   <h2 class="no-num heading settled" id="resume-in-english"><span class="content"> Resume (in english)</span></h2>
   <h2 class="no-num heading settled" id="resume"><span class="content">Resume</span></h2>
    De senere års udvikling på brugerstyringsområdet i den offentlige sektor har entydigt peget i retning af føderationer baseret på tillid og fælles standarder. Der er således etableret en række føderationer i forskellige sektorer - dette gælder fx på det kommunale område (KOMBIT), på sundhedsområdet (SOSI), på miljøområdet (Miljøportalen), inden for undervisningsningssektoren (STIL) og fællesoffentligt (NemLog-in). Dette er samtidig i tråd med internationale tendenser herunder etablering af en EU-føderation med afsæt i eIDAS-forordningen. 
   <p>Føderationer giver en lang række fordele herunder sammenhæng for brugerne, mere effektiv administration og mulighed for arbejdsdeling, hvor specialiserede tjenester (infrastruktur) varetager komplekse opgaver med håndtering af identiteter og akkreditiver for forretningstjenester, hvilket letter byrder og samtidig øger sikkerheden.</p>
   <p>Der er til stadighed behov for, at sektorløsninger udvikles på baggrund af en fællesoffentlig referencearkitektur for brugerstyring, som udpeger fælles principper, mønstre, standarder, byggeblokke og andet. Herved kan der opnås sammenhæng, synergier og udbredelse af god praksis på tværs af hele økosystemet, og risikoen for uhensigtsmæssig sub-optimering og dublering af løsninger reduceres.</p>
   <p>Formålet med referencearkitekturen er således at skabe <strong>rammer</strong> for brugerstyring i den offentlige sektor - som danner grundlag for et sammenhængende økosystem med høj grad af tillid, genbrug og interoperabilitet.</p>
   <p>Brugerstyring dækker opgaver og funktioner i forbindelse med håndtering af brugere i forhold til digitale tjenester, som overordnet kan opdeles i administrative funktioner og adgangskontrol. De administrative funktioner omfatter oprettelse, ændring og nedlæggelse af brugere i brugerstyringssystemer, udstedelse og tilknytning af akkreditiver til brugere og tilknytning af rettigheder til brugere.</p>
   <p>Hovedaktiviteterne i <strong>administration i brugerstyring</strong> er følgende:</p>
   <ul>
    <li data-md>
     <p><strong>Registrering</strong> af digitale identiteter og den løbende vedligeholdelse heraf.</p>
    <li data-md>
     <p><strong>Udstedelse</strong> af akkreditiver og tilknytning af disse til digitale identiteter. Akkreditiver anvendes til at autenficere en digital identitet over for en tjeneste, som der ønskes adgang til.</p>
    <li data-md>
     <p><strong>Attributbeskrivelse</strong> af karakteristika ved digitale identiteter, som en tjeneste kræver for at give adgang, og den løbende vedligeholdelse heraf. Det er fx rettighedsrelevante attributter i form af roller, fuldmagter, samtykker og/eller andre attributter, der udtrykker kvaliteter, som en tjeneste baserer sin adgangskontrol på.</p>
   </ul>
   <p>Hovedaktiviteterne i <strong>anvendelse af brugerstyring</strong> er følgende:</p>
   <ul>
    <li data-md>
     <p><strong>Autentifikation</strong> verificerer en identitet (tilknyttet en entitet) gennem anvendelse af et akkreditiv (identifikationsmiddel).</p>
    <li data-md>
     <p><strong>Billetudstedelse</strong> udsteder på grundlag af en autentifikation en signeret billet (eng. security token) med det sæt attributter, som tjenesten kræver for at give adgang. I denne proces kan der evt. ske en veldefineret omveksling af attributter eller berigelse med attributter fra forskellige kilder, således at tjenesten er i stand til direkte at anvende adgangsbilletten. Har brugeren ikke fået tildelt de nødvendige beskrivende attributter i det rette format, vil vedkommende ikke opnå adgang hos tjenesten.</p>
    <li data-md>
     <p><strong>Adgangskontrol</strong> er håndhævelse af en tjenestes adgangspolitik i tjenesten (eng. policy enforcement). Det styrer, hvilke handlinger identiteten må udføre i en tjeneste, eller hvilke informationer identiteten må få adgang til på grundlag af den adgangsbillet, der er udstedt. Attributterne i adgangsbilletten er således input til adgangskontrollen.</p>
   </ul>
   <p>Referencearkitekturen for brugerstyring fastlægger en række principper, der leder frem mod en fælles forretnings- og it-arkitektur for det offentliges elektroniske identiteter, akkreditiver, attributbeskrivelser, autentifikation, billetudstedelse og adgangskontrol:</p>
   <p>Principper</p>
   <p><em>Principper med brugerfokus:</em></p>
   <ol>
    <li data-md>
     <p>Brugerne oplever en sammenhængende adgangsstyring</p>
    <li data-md>
     <p>Brugerstyringsløsninger udvikles med fokus på brugernes behov</p>
    <li data-md>
     <p>Brugerstyringsløsninger respekterer brugernes privatliv</p>
   </ol>
   <p><em>Principper med teknisk fokus:</em></p>
   <ol start="4">
    <li data-md>
     <p>Aktører indgår i føderationer baseret på tillid</p>
    <li data-md>
     <p>Aktører i føderationer vurderer i deres styring af informationssikkerhed samspillet med andre aktører</p>
    <li data-md>
     <p>Administration af brugere flyttes så vidt muligt ud af fagapplikationer</p>
    <li data-md>
     <p>Tjenesteudbyder (den dataansvarlige) har ansvaret for at håndhæve brugernes adgange</p>
   </ol>
   <p><em>Principper med udviklingsfokus</em></p>
   <ol start="8">
    <li data-md>
     <p>Brugerstyring realiseres i løst koblede komponenter</p>
    <li data-md>
     <p>Tværoffentlige brugerstyringsløsninger baseres på en kerne af fælles komponenter i samspil med øvrige komponenter i infrastrukturen</p>
    <li data-md>
     <p>Tværoffentlig brugerstyring etableres i overensstemmelse med internationale standarder og løsninger</p>
   </ol>
   <p>Forretningsbehov og ovenstående principper peger entydigt frem mod en løst koblet, fødereret arkitektur, hvor de enkelte tjenester/tjenesteudbydere håndhæver adgang baseret på forudgående (ekstern) autentifikation og således ikke selv håndterer administration af brugere, anvendersystemer og rettigheder.</p>
   <p>Der er derfor valgt en token-baseret model for adgangsstyring. Denne indebærer, at brugere og systemer efter autentifikation får udstedt en signeret billet, et såkaldt <em>security token</em>, af en betroet komponent i infrastrukturen. Billetten præsenteres herefter over for den tjeneste, som leverer data eller funktionalitet, der ønskes adgang til. En billet indeholder attributter, som beskriver identitet, karakteristika  samt tildelte adgangsrettigheder. Den er desuden tidsstemlet og digitalt signeret af udstederen, så den ikke kan forfalskes eller manipuleres.</p>
   <p>Digitalisering forudsætter informationssikkerhed, og brugerstyring er et af midlerne til at håndtere risici knyttet til håndtering af digitale identiteter.</p>
   <p>I referencearkitekturen fastlægges en række standarder for håndtering af brugere, akkreditiver og attributter. Der er behov for standarder for overførsel af data om autentificerede brugere mellem autentifikationstjenester, login-tjenester/brokere og forretningstjenester. Der er behov for standarder i forbindelse med rettighedsrelevante attributter, og der er behov for standarder for kommunikation mellem føderationer. Dette behandles i afsnit 9.6.1.</p>
   <h2 class="heading settled" data-level="1" id="introduktion-phj"><span class="secno">1. </span><span class="content">Introduktion [phj]</span><a class="self-link" href="#introduktion-phj"></a></h2>
   <h3 class="heading settled" data-level="1.1" id="forml"><span class="secno">1.1. </span><span class="content">Formål</span><a class="self-link" href="#forml"></a></h3>
    Den fællesoffentlige referencearkitektur for brugerstyring skal målrette og strukturere indsatsen for at skabe sammenhængende, effektive, sikre og brugervenlige løsninger på tværs af domæner, nationalt og transnationalt. Fokus er på det tværgående dvs. adgang til tjenester på tværs af organisationer, herunder føderationer på tværs af sikkerhedsdomæner med gensidig tillid.
Referencearkitekturens formål er at skabe en arkitekturmæssig ramme for, hvordan man skal indrette løsninger, så systemer understøttet af forskellige sikkerhedsløsning kan kommunikere med hinanden. Herved bliver løsninger enklere at etablere og drive, brugerne undgår at skulle logge på flere gange, og oplysninger om brugere skal ikke vedligeholdes flere steder.
[Opdatering skal også indarbejde andet FDA arbejde som fx Modelregler ]
[bidrage til tværgående arktitekturarbejde hos andre domæner] 
   <h3 class="heading settled" data-level="1.2" id="anvendelse"><span class="secno">1.2. </span><span class="content">Anvendelse</span><a class="self-link" href="#anvendelse"></a></h3>
    Referencearkitekturen skal kunne anvendes til at udpege standarder, der understøtter arkitekturen.
Referencearkitekturen skal understøtte udarbejdelse af løsningsarkitektur i konkrete projekter. Referencearkitekturen anviser ikke i detaljer, hvordan myndigheder og virksomheder skal bygge løsninger, men fastlægger rammer og standarder for løsninger.
Referencearkitekturen kan anvendes i sammenhæng med andre fællesoffentlige referencearkitekturer.
[anvendes direkte i nogle områder, indirekte gennem domænearkitektur?]
[henvisning til hvidbogen]
Generelt kan en referencearkitekturs rolle illustreres med følgende figur: 
   <figure>
     <img src="billede1.PNG"> 
    <fgicaption>Referencearkitekturens rolle </fgicaption>
   </figure>
   <h3 class="heading settled" data-level="1.3" id="mlgruppe"><span class="secno">1.3. </span><span class="content">Målgruppe</span><a class="self-link" href="#mlgruppe"></a></h3>
    Dette dokument har to målgrupper: 
   <ul>
    <li data-md>
     <p>Den ene målgruppe er strategiske beslutningstagere inden for digitalisering og it, typisk digitaliseringschefer, it-chefer, afdelings- og kontorchefer og andre med rollen som systemejer.</p>
    <li data-md>
     <p>[dem der laver tværgående arkitektur indenfor domæner]</p>
    <li data-md>
     <p>Den anden målgruppe er projektledere, arkitekter og udviklere hos myndigheder, virksomheder og leverandører, der har til opgave at kravspecificere, designe eller udvikle løsninger, hvor der indgår eller anvendes tværoffentlig brugerstyring.</p>
   </ul>
   <h3 class="heading settled" data-level="1.4" id="omfang-og-afgrnsning"><span class="secno">1.4. </span><span class="content">Omfang og afgrænsning</span><a class="self-link" href="#omfang-og-afgrnsning"></a></h3>
    Referencearkitekturen for brugerstyring omfatter offentlige tjenester, men referencearkitekturen kan med fordel også anvendes til ikke offentlige tjenester og til at understøtte tværgående brugerforløb med det offentlige. 
   <p>Arkitekturen omfatter også rollen som leverandør af tillidstjenester - registreringstjenester, akkreditivtjenester, autentifikationstjenester, identitetsbrokere, attributtjenester mv. Arkitekturen omfatter desuden private virksomheders mulighed for at anvende bruger- og rolledata og login-systemer.</p>
   <p>Arkitekturen omfatter både brugeradministration og adgangskontrol, herunder det der på engelsk betegnes Credential and Identity Management (CIM), Identity Rights Management (IRM), Access Control (AC) og Identity and Access Management (IAM/IdAM).</p>
   <p>Referencearkitekturen definerer, hvad en føderation omhandler i rammerne af brugerstyring, og den beskriver de opgaver, en føderation løser i denne ramme. Etablering af en føderation sker gennem fastlæggelse af et aftalesæt mellem føderationens deltagere.</p>
   <p>Denne 2020-udgave af referencearkitekturen for brugerstyring er udvidet med de særlige aspekter vedrørende brugerstyring for ting, organisationer og applikationer - samlet betegnet som Non-Person Entities (NPE).</p>
   <p>Med udspring i Digitaliseringpagten er der parallelt med opdateringen af denne referencearkitektur igangsat en analyse af håndtering af samtykke på tværs af den offentlige sektor med henblik på at afdække behov og muligheder inden for dette område. Samtykkeområdet er af denne årsag kun overordnet behandlet i nærværende udgave af referencearkitekturen.</p>
   <h3 class="heading settled" data-level="1.5" id="centrale-begreber"><span class="secno">1.5. </span><span class="content">Centrale begreber</span><a class="self-link" href="#centrale-begreber"></a></h3>
    I referencearkitekturen anvendes nogle centrale begreber, som her beskrives for at lette
læsningen. 
   <p><dfn data-dfn-type="dfn" data-noexport id="brugerstyring">Brugerstyring<a class="self-link" href="#brugerstyring"></a></dfn>, administration og kontrol af brugere og deres adgang til tjenester.</p>
   <p>Referencearkitekturen beskriver styring af brugeres adgang til tjenester. Brugere, her entiteter, får udstedt en identitet af en identitetsgarant. Til identiteten knyttes en række loginmidler, som identiteten kan bruge til at bevise sin identitet. Når identiteten er bevist, kan oplysninger fra identiteten, eventuelt suppleret med eksterne adgangsrettigheder, styre brugerens adgang til tjenester.
I en digital sammenhæng defineres brugere som dels den entitet de virkelig er og dels den tildelte identitet, de har fået som adgang til digitale tjenester.</p>
   <p>[På et teknisk niveau har vi identitets baseret adgangskontrol, men loven peger nogle gange på entiteter...]</p>
   <figure>
     <img src="Begrebsoverblik.png" width="80%"> 
    <figcaption>[Brugerstyringsbegreber, udvid med navngivne releationer.]</figcaption>
   </figure>
   <p>[Overvej om vi skal ramme brugerstyring her også]</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="entitet">Entitet<a class="self-link" href="#entitet"></a></dfn> Person, juridisk enhed, ting eller applikation som ønsker adgang til en tjeneste. En entitet kan have flere identiteter – for eksempel kan en fysisk person både have en privatidentitet og flere erhvervsidentiteter. Enhver entitet der skal have adgang til tjenester skal optræde som bruger med sin egen identitet.</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="identitet">Identitet<a class="self-link" href="#identitet"></a></dfn> Bruger repræsenteret ved et sæt af attributter der identificerer identiteten. En identitet kan være stærkere eller svagere bundet til entiteten afhængigt af den proces hvor identiteten udstedes - Identitetssikring.</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="identifikationsmiddel">Identifikationsmiddel<a class="self-link" href="#identifikationsmiddel"></a></dfn> som en entitet får udstedt eller registreret til brug for autentifikation. Midlet kan både være fysisk og virtuelt, og skal være under entitetens kontrol. Velkendte eksempler er brugernavn og password, NemID nøglekort, certifikater, fingeraftryk mv.</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="forretningstjeneste">Forretningstjeneste<a class="self-link" href="#forretningstjeneste"></a></dfn> løser et forretningsmæssigt behov, fx en borgerrettet selvbetjeningsløsning.</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="adgangskontrol">Adgangskontrol<a class="self-link" href="#adgangskontrol"></a></dfn> Håndhævelse af en tjenestes adgangspolitik. Adgangskontrollen styrer, hvilke handlinger identiteten må udføre i en tjeneste, eller hvilke informationer identiteten må få adgang til.</p>
   <p><strong>Type af entiteter</strong></p>
   <p>[genskriv med princip om entiteter og identitets typer hænger sammen mht til adgangskontrol]</p>
   <p>[entiteterne får adgang, men det er identiteter der tilgå tjeneste]</p>
   <p>Entiteter ses som et subjekt, med rettigheder og pligter, eller et objekt, der kan arve rettigheder fra et subjekt.</p>
   <figure>
     <img src="Entitet.png" width="60%"> 
    <figcaption>[Entitetsformer]</figcaption>
   </figure>
   <p><dfn data-dfn-type="dfn" data-noexport id="person">Person<a class="self-link" href="#person"></a></dfn> Fysisk person der kan have identiteter som borger, medarbejder eller deltage i fællesskaber, som for eksempel Facebook.</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="juridisk-enhed">Juridisk enhed<a class="self-link" href="#juridisk-enhed"></a></dfn> Organisation med adgange og rettigheder der kan delegeres til medarbejder eller applikation.</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="ting">Ting<a class="self-link" href="#ting"></a></dfn> Fysiske ting med indbygget program der kan optræde som bruger eller tjeneste. Her er programmet underlagt tingen og kan, i modsætning til en applikation, ikke optræde selvstændigt.</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="applikation">Applikation<a class="self-link" href="#applikation"></a></dfn> Et selvstændigt program der kan afvikles på en platform. Til forskel fra programmet i en ting, er en applikation ikke bundet til den platform det kører på. En applikation kan optræde både som bruger og tjeneste og skal have sin egen identitet med tilhørende identifikationsmidler.
En automatiseringsrobot vil være en applikation og skal derfor have egen identitet og aldrig låne en personbrugers identitet. Bemærk, at automatiseringer en bruger selv afvikler efter at være logget ind på de nødvendige systemer, i brugerstyringssammenhæng ikke betragtes som en robot.</p>
   <p><strong>Relationer imellem identiteter</strong></p>
   <p>Entiteter kan have indbyrdes relationer af betydning for brugerstyring.</p>
   <figure>
     <img src="Entitet relation.png" width="60%"> 
    <figcaption>[Entitetsrelationer]</figcaption>
   </figure>
   <p><strong>Fuldmagt</strong> der gives fra person til person. Afhængigt af fuldmagten, kan alle eller dele af en persons rettigheder videregives til den person der har fuldmagt.</p>
   <p><strong>Tilhør</strong> imellem person og juridisk enhed. Tilhøret i sig selv giver implicit en række rettigheder fra organisationen til personen. For eksempel har en borger i Danmark implicit adgang til en række tjenester som for eksempel Borger.dk og e-Boks.</p>
   <p><strong>Rettighed</strong> der eksplicit gives fra en juridisk enhed til en person. Dette kan være adgang til systemer eller steder, eller prokura til at handle på organisationens vegne.</p>
   <p><strong>Bruger af</strong> en ting. For eksempel brugeren af en mobiltelefon eller en blodtryksmåler. I begge tilfælde er det en mulighed, at tingen arver rettigheder fra brugeren.</p>
   <p><strong>Produktansvar</strong> som juridisk enhed har overfor de ting den producerer.</p>
   <p><strong>Delegering</strong> af rettigheder fra en person eller juridisk enhed til en applikation. For eksempel en automatiseringsrobot, der får delegeret rettigheder til at håndtere en givet sagsforløb.</p>
   <p>En applikation der <strong>afvikles på</strong> en enhed, kan få særlige rettigheder på grund af enheden den afvikles på. <em>&lt; eksempel ></em>.</p>
   <p>Juridisk enhed der har <strong>ansvar for</strong> hvad en applikation gør.</p>
   <p>Øvrige begreber uddybes i referencearkitekturens bilag A (ordliste) eller forklares undervejs.</p>
   <p>"kun elektroniske identiteter kan anvende elektroniske tjenester".</p>
   <p>Se Afsnit 4 og Bilag A: Ordliste</p>
   <p>###Brugerstyring i niveauer</p>
   <p>Brugerstyring forgår når der tilgås en tjeneste. Tjenesterne kan tilgås af traditionelle brugere eller fra anden tjeneste.</p>
   <figure>
     <img src="Brug af tjeneste.png" width="50%"> 
    <figcaption>[Niveauer af tjenester]</figcaption>
   </figure>
   <p>Den initiale bruger tilgår en tjeneste med sit bruger-id. Hvis tjenesten har brug for at kalde andre tjenester, kan det foregå enten med den oprindelige brugers bruger-id eller tjenesten kan have sit eget bruger-id for at tilgå underliggende tjenester. Rækken kan fortsættes i princippet uendeligt.</p>
   <p>###Føderationer### <dfn data-dfn-type="dfn" data-noexport id="fderationer">Føderationer<a class="self-link" href="#fderationer"></a></dfn>, sammenslutning tjenester med gensidig tillid. Føderationer er en forudsætning for referencearkitekturens adskillelse af brugerstyring i tillidstjenester og forretningstjenester, hvor tillidstjenesterne typisk er generelle og leveres af andre end dem der leverer forretningstjenesterne.</p>
   <h3 class="heading settled" data-level="1.6" id="tilblivelse-og-styring"><span class="secno">1.6. </span><span class="content">Tilblivelse og styring</span><a class="self-link" href="#tilblivelse-og-styring"></a></h3>
   <p>2020-udgaven af Referencearkitektur for bruerstyring er udarbejdet i Center for teknik og datastrategi (CTD) i Digitaliseringsstyrelsen med konsulentbistand fra ITCrew og Capgemini.</p>
   <p>En følgegruppe af arkitekter fra den offentlige sektor har bidraget til opdateringen gennem en række af workshops. Følgende organisationer har været repræsenteret i gruppen: Kommunernes Landsforening, Danske Regioner, Styrelsen for Dataforsyning og Effektivisering, Styrelsen for It og Læring, Naturstyrelsen, Miljøstyrelsen, KOMBIT, Energistyrelsen, Energinet, Sønderborg Kommune og Københavns Kommune.</p>
   <p>2020-udgaven af referencearkitekturen godkendtes i version 2.0 i Styregruppe for Data og Arkitektur under Den fællesoffentlige digitaliseringsstrategi 2016-2020 i maj 2020. Styregruppen er herefter ejer af dokumentet, med CTD som ansvarlig for vedligehold af referencearkitekturen, der indgår i Den fællesoffentlige digitale arkitektur (FDA).[Skal opdateres ved godkendelse]</p>
   <h3 class="heading settled" data-level="1.7" id="anvendt-metode-notation-og-signaturforklaring"><span class="secno">1.7. </span><span class="content">Anvendt metode, notation og signaturforklaring</span><a class="self-link" href="#anvendt-metode-notation-og-signaturforklaring"></a></h3>
   <p>Metodemæssigt er referencearkitekturen udarbejdet inden for rammerne af Den fællesoffentlige digitale arkitektur og følger så vidt muligt den fælles skabelon for referencearkitekturer som udarbejdet i Sekretariatet for Styregruppen for Data og Arkitektur under Den fællesoffentlige digitaliseringsstrategi 2016-2020.</p>
   <p>I forhold til ejerskab af de elementer, der indgår i dokumentets figurer og definitioner, markerer:</p>
   <ul>
    <li data-md>
     <p>Rød tekst: At et element eller en relation ejes og defineres i denne referencearkitekturs begrebsmodel</p>
    <li data-md>
     <p>Blå tekst: At et element eller en relation er kendt, men ejes og defineres et andet, nærmere angivet sted, fx i andre referencearkitektur eller i lovgivning.</p>
    <li data-md>
     <p>Grå tekst: At et element eller en relation er identificeret, men ikke nærmere defineret i denne referencearkitektur.</p>
   </ul>
   <h3 class="heading settled" data-level="1.8" id="andre-referencearkitekturer-madsh"><span class="secno">1.8. </span><span class="content">Andre referencearkitekturer [madsh]</span><a class="self-link" href="#andre-referencearkitekturer-madsh"></a></h3>
   <p>Referencearkitekturen publiceres på arkitektur.digst.dk, hvor man kan finde beslægtede dokumenter vedrørende Den fællesoffentlige digitale arkitektur.</p>
   <p>[ <em>her skal der indføres en kort beskrivelse af de øvrige referencearkitekturer</em> ]</p>
   <p>[indenfor og udenfor FDA, den på sundhedsområdet]</p>
   <h3 class="heading settled" data-level="1.9" id="lsevejledning"><span class="secno">1.9. </span><span class="content">Læsevejledning</span><a class="self-link" href="#lsevejledning"></a></h3>
   <p>Kapitel 1 og 2 bør læses af alle.</p>
   <p>Kapitel 3 om den forretningsmæssige del af arkitekturen bør læses af de der skal forstå arkitekturen.</p>
   <p>Kapitel 4 og 5 henvender sig særligt til løsningsarkitekter.</p>
   <h2 class="heading settled" data-level="2" id="strategi-madsh"><span class="secno">2. </span><span class="content">Strategi [madsh]</span><a class="self-link" href="#strategi-madsh"></a></h2>
   <p>Referencearkitekturen udmønter og understøtter beslutninger i Den fællesoffentlige digitaliseringsstrategi 2016-2020. Strategien har tre, overordnede målsætninger:
— Det digitale skal være let, hurtigt og sikre god kvalitet
— Offentlig digitalisering skal give gode vilkår for vækst
— Tryghed og tillid skal i centrum
De tre målsætninger er understøttet af en række, specifikke initiativer, hvoraf Initiativ 8.1: Gode data og
effektiv datadeling er det konkrete ophæng for denne referencearkitektur.[TODO, check ophæng]</p>
   <h3 class="heading settled" data-level="2.1" id="temaer"><span class="secno">2.1. </span><span class="content">Temaer</span><a class="self-link" href="#temaer"></a></h3>
   <p>[Vi bør kunne samle nedenstående i temaer... her et bud på overskrifts niveau]</p>
   <ul>
    <li data-md>
     <p>Sammenhængende services</p>
    <li data-md>
     <p>Offentligt-privat samarbejde</p>
    <li data-md>
     <p>Infrastruktur på nationalt, fællesoffentlig og domæne niveau</p>
    <li data-md>
     <p>Markedsliggørelse gennem enartet regulering af tillidstjenester og deres anvendelse</p>
   </ul>
   <p><em>Borgere som tjenesteanvendere</em></p>
   <p>Borgere er forskellige og ligger forskelligt vægt på forskellige aspekter af tillidstjenester. Her er nogle aspekter.</p>
   <ul>
    <li data-md>
     <p>Brugervenlighed</p>
    <li data-md>
     <p>Valg af idmidler efter personlige præferencer</p>
    <li data-md>
     <p>Mulighed for samme identifkationsmiddel på tværs af tjenester og sektorer</p>
    <li data-md>
     <p>Rettigheder overholdes</p>
    <li data-md>
     <p>Privacy (dataminimering og gennemsigtighed)</p>
    <li data-md>
     <p>Adskille privat og erhvervs-identitet.</p>
    <li data-md>
     <p>Forvaltningsret (partsrepræsentation)</p>
   </ul>
   <p>det <em>dobbelte frivillighedsprincip</em>, hvor et privat identifikationsmidddel kun anvendes i erhvervsssammenhæng, hvis <em>både</em> medarbejder og virksomhed siger god for det.</p>
   <p>En del borgere har behov for at kunne give andre fuldmagt til at løse opgaver for sig. For de borgere, som afgiver og får fuldmagt, er der behov for løsninger til at administrere fuldmagter, som giver et overblik på tværs af tjenester, så brugeren ikke skal logge ind i mange tjenester for at se eller administrere fuldmagter. Det tilsvarende gælder for samtykke.</p>
   <p><em>Virksomheder og myndigheder som tjenesteanvendere</em></p>
   <ul>
    <li data-md>
     <p>Brugervenlig.</p>
    <li data-md>
     <p>Effektiv adgang til både interne og eksterne tjenester.</p>
    <li data-md>
     <p>Effektiv håndtering af rettigheder.</p>
    <li data-md>
     <p>Balancere virksomheds behov/pligt/ret for logning og medarbejders ret til ikke at blive overvåget</p>
   </ul>
   <p>Nogle medarbejdere anvender deres akkreditiv mange gange i løbet af en arbejdsdag. For denne brugergruppe er det derfor væsentligt, at det er let og effektivt at anvende sit akkreditiv.</p>
   <p>Små og mellemstore virksomheder, foreninger og anpartsselskaber med flere medarbejdere har behov for enkel brugeradministration, hvor rettigheder set med brugernes øjne administreres  ét samlet sted for offentlige selvbetjeningsløsninger.</p>
   <p>Større virksomheder har brug for forskellige løsninger, der både kan omfatte manuel indtastning, digital provisionering og eventuelt føderering. Større virksomheder har egen brugerstyring, og de kan generelt have behov for god sammenhæng mellem deres egen brugerstyring og ekstern brugerstyring.</p>
   <p>De har desuden behov for kontrol af medarbejdernes anvendelse af elektronisk identitet på virksomhedens vegne, da det både juridisk og kommercielt kan være forpligtende for brugerorganisationen, hvad en medarbejder gør.</p>
   <p><em>Virksomheder og myndigheder som tjenesteudbydere</em></p>
   <ul>
    <li data-md>
     <p>Brugervenlige (da det giver effektiv)</p>
    <li data-md>
     <p>Regulative forpligtigelser</p>
    <li data-md>
     <p>Beskyttelse af (følsomme) person data.</p>
    <li data-md>
     <p>Partsrepræsentation</p>
    <li data-md>
     <p>Balancere behov for kontinuitet og udvikling</p>
   </ul>
   <p>Det er et fælles behov for tjenesteudbyderne at kunne trække på modne tillidstjenester på en standardiseret måde, således at tjenesteudbyderne afskærmes fra kompleksiteten i at håndtere og administrere brugeridentiteter, identifikationsmidler mv. Når man bygger en forretningstjeneste, er det ofte komplekst og ressourcekrævende selv at håndtere brugerstyring, og der er ofte en god business case i at få det som en ekstern tjeneste.</p>
   <p>En stor del af de offentlige tjenester rummer fortrolige eller personhenførbare data, som er dækket af sikkerhedskrav i persondatareguleringen, og som dermed skal opnå et tilstrækkeligt sikringsniveau. Flertallet af offentlige tjenester har behov for at kende borgerens CPR-nummer og i nogle tilfælde medarbejderens - dette gælder eksempelvis på sundhedsområdet. Andre offentlige tjenester har ikke samme behov / sikkerhedskrav og kan nøjes med et lavere sikringsniveau.</p>
   <p>Forskellige sektorer har forskelligartede behov:</p>
   <ul>
    <li data-md>
     <p>Myndigheder er omfattet af reglerne om partsrepræsentation i forvaltningsloven, og deres tjenester skal derfor understøtte anvendelse af digital fuldmagt eller alternativt etablere manuelle løsninger til partsrepræsentation.</p>
    <li data-md>
     <p>Tjenester i den finansielle sektor er underlagt sikkerhedskrav samt krav om verificering af kundeidentiteter,  dels i kraft lovgivning om hvidvask dels i medfør af PSD2 direktivet.</p>
    <li data-md>
     <p>Tjenester i spilsektoren er forpligtet ved lov til at anvende stærk autentifikation samt at kontrollere, at identiteten ikke er omfattet af spærrelisten. Tjenesterne har ikke et behov for præcis identifikation med navn.</p>
    <li data-md>
     <p>En virksomhed som ”Den Blå Avis/DBA” har brug for at kunne garantere mod svindel, hvilket de aktuelt håndterer ved, at sælgerne og køberne kan blive NemID-valideret. DBA identificerer ikke personerne med CPR, men anvender i stedet certifikatets PID, hvilket kan anses som en privacy-mæssig fordel.</p>
    <li data-md>
     <p>Regionerne har mange private aktører som medtjenesteudbydere.</p>
   </ul>
   <p>En række tjenester har lavere sikkerhedskrav end ovennævnte, men har stadig brug for sikker identifikation med færre oplysninger om brugeren. Det er fx ehandelstjenester, der har brug for at kende borgerens adresse eller tjenester, eller der har brug for at kende brugerens alder (fx over/under 18 år). For disse tjenester er der økonomiske fordele ved kun at kende ikke-fortrolige data, da der i så fald ikke skal anvendes ressourcer på at sikre fortrolige data. Dette er ligeledes i overensstemmelse med dataminimeringsprincippet i GDPR.</p>
   <p>Tjenesteudbydere har behov for kontrol med, hvem der har logget ind og udført hvilke handlinger i tjenester.</p>
   <p>Etablerede tjenester har behov for kontinuitet (bagudkompabilitet), idet der kan være store omkostninger ved at ændre integrationer til tværgående brugerstyringsløsninger.</p>
   <p>[temaer bør afspejle 3.5, måske hvsd betyder sikker, sammenhængende og effektivt for hver af de tre aktører plus tillidtjeneste udbyder]</p>
   <p><em>Særlige behov for offentlige myndigheder?</em></p>
   <p>[Rigsrevisions formulering omkring forvaltningsrevision....sparsommelighed, effektivitet og produktivitet]</p>
   <p><em>Særlige behov for udbydere af tillidstjenester</em></p>
   <p>[fair konkurrence og mulighed for at tjene penge?]</p>
   <h3 class="heading settled" data-level="2.2" id="aftalte-principper-madsh"><span class="secno">2.2. </span><span class="content">Aftalte principper [madsh]</span><a class="self-link" href="#aftalte-principper-madsh"></a></h3>
    [Jeg vil foretrække principper spredt ud i det afsnit de hører mest til, og opsummeret i resume /madsh] 
   <p>Dette afsnit formulerer rammer for de egenskaber, som løsninger inden for offentlig brugerstyring skal have. Formålet er at sikre, at de forskellige løsninger samlet set bringer brugerstyring i Danmark frem mod de mål og de gevinster, den nationale strategi for brugerstyring fastlægger. Rammerne formuleres som principper, som alle projekter og programmer skal orientere sig efter og enten følge eller forklare.</p>
   <p>Principperne konkretiseres med beskrivelse af rationale – hvilket mål og gevinstprincippet forfølger – og implikation – en instruktion i, hvad det konkret vil sige at følge princippet. Hvis et projekt eller program mener, at det er for problematisk at følge princippet, skal projektet eller programmet forklare hvorfor, og tillige forklare hvordan man på længere sigt kan bringe løsningen inden for rammerne, som princippet angiver.</p>
   <figure>
     <img src="billede5.PNG"> 
    <fgicaption>Styrende principper </fgicaption>
   </figure>
   <p>Referencearkitekturen for brugerstyring fastlægger følgende principper for at styre frem mod en fælles forretnings- og it-arkitektur for det offentliges elektroniske identiteter, autentifikation og adgangskontrol. Som overordnet ramme for disse principper ligger de ti tværoffentlige overordnede principper for forretnings- og it-arkitektur(http://arkitekturguiden.digitaliser.dk/principper/10-overordnede-principper), og hvad der står heri gentages ikke. Det skal her bemærkes, at disse principper opdateres som følge af arbejdet med hvidbogen for den fællesoffentlige rammearkitektur, hvilket kan give anledning til ændringer i kommende udgaver af denne referencearkitektur.</p>
   <ol start="4">
    <li data-md>
     <p>Aktører indgår i føderationer baseret på tillid</p>
    <li data-md>
     <p>Aktører i føderationer vurderer i deres styring af informationssikkerhed samspillet med andre aktører</p>
    <li data-md>
     <p>Administration af brugere flyttes så vidt muligt ud af fagapplikationer</p>
    <li data-md>
     <p>Tværoffentlig brugerstyring etableres i overensstemmelse med internationale standarder og løsninger</p>
   </ol>
   <p><dfn data-dfn-type="dfn" data-noexport id="samlet-brugeradministration">Samlet? brugeradministration<a class="self-link" href="#samlet-brugeradministration"></a></dfn> Princip der fastlægger at brugeradministration er en tværgående funktion og sker i dedikerede systemer uden for fag- og selvbejtningssystemer...</p>
   <p>Historisk har fagapplikationer, der anvendes på tværs, selv forvaltet brugeres identiteter, akkreditiver og attributter med det resultat, at den samme bruger har mange forskellige elektroniske identiteter og akkreditiver, og at disse identiteter ikke kan anvendes på tværs af tjenester. Fagapplikationerne skal i stedet kunne indgå i føderationer på tværs af organisationsenheder og myndigheder - og agere som konsument af identitet leveret af andre.</p>
   <p><em>Rationale</em></p>
   <ul>
    <li data-md>
     <p>Det giver mindre overlap, sub-optimering og dublering af løsninger, hvilket sparer penge ved udvikling og drift af applikationerne og resulterer i mere effektive løsninger.</p>
    <li data-md>
     <p>Brugeradministrationen effektiviseres, idet brugerne ikke skal vedligeholdes mange forskellige steder.</p>
    <li data-md>
     <p>Muliggør adgangsstyring på tværs af løsninger i de forskellige domæner.</p>
    <li data-md>
     <p>Sikkerheden øges, idet erfaringen er, at brugere der forlader en organisation, sjældent får ændret status rettidigt og derfor bliver til en sårbarhed for den organisation, vedkommende forlader. Et arbejdsophør kan automatisk udløse, at identiteten bliver suspenderet eller spærret, og at alle rettigheder bliver blokeret for denne identitet.</p>
   </ul>
   <p><em>Implikationer</em></p>
   <ul>
    <li data-md>
     <p>Brugernes identiteter, akkreditiver og attributter administreres ikke i de enkelte fagapplikationer. Information om identiteter og attributter leveres i stedet til applikationen af identitetsbrokere i en adgangsbillet.</p>
    <li data-md>
     <p>Der skal etableres fællesoffentlige føderationer baseret på valg af fælles politikker, regler og obligatoriske standarder inden for et område, hvor dette giver gevinster.</p>
    <li data-md>
     <p>[rettigheder og adgangspolitikker fra tjenesteudbydere skal være synlige for brugerorganisationer]</p>
   </ul>
   <p><dfn data-dfn-type="dfn" data-noexport id="fderation">Føderation<a class="self-link" href="#fderation"></a></dfn> Princip der fastlægger at tjenesteanvender og tjenesteudbyder indgår i forpligtigende fællesskaber om udformning af tillidspolitkker og adgangspolitikker.</p>
   <p>[Sammenskrives med princip 5 til generelt princip om aftale baseret føderation i samarbejde mellem tjenesteudbyder og anvendere med krav til tillidstjenester]</p>
   <p>Aktørerne bør overholde en række fælles standarder for identiteter, fælles sikkerhedspolitikker og aftaler, og tilbyde servicekald på tværs af føderationernes grænser, således at aktører i forskellige organisationer kan indgå i føderationer. I denne sammenhæng omfatter aktører både myndigheder og virksomheder i rollerne som brugerorganisationer, tjenesteudbydere og udbydere af brugerstyringstjenester. Aktører kan også omfatte private tjenesteudbydere og brugerstyringstjenesteudbydere, såfremt de ansvarlige for føderationen vælger dette.
I brugerstyring, hvor opgaverne løses af forskellige aktører i føderationer, og som bygger på en kæde af tillid og aftaler mellem parterne, er sikkerheden afhængig af den enkelte aktørs interne sikkerhed samt af sikkerheden i samspillet mellem aktører.</p>
   <p><em>Rationale</em></p>
   <ul>
    <li data-md>
     <p>Gennem etablering af føderationer vil man over en årrække kunne fjerne nogle stærke sikkerheds- og teknologiske barrierer for udnyttelse af digitalisering.</p>
    <li data-md>
     <p>Den fødererede model muliggør, at brugeradministrationen (oprettelse og nedlæggelse af brugere samt tildeling af attributter) udføres lokalt i organisationens egen brugerstyringsløsning (fx Active Directory eller anden Identity Management-løsning). Herved kan organisationer af en vis størrelse og modenhed vælge en løsning, så de undgår dobbelt vedligehold af de samme brugere, og administrationen sker tættest på brugerne med størst viden om deres jobfunktioner og med størst sikkerhed for korrekthed og hurtig respons på ændringer.</p>
    <li data-md>
     <p>En fødereret model gør det muligt for private aktører at indgå i eller i samspil med offentlige føderationer, såfremt dette vælges af føderationen.</p>
    <li data-md>
     <p>Der er klare regler for den enkelte aktørs ansvar for sikkerheden, og tilsynet hermed varetages af overliggende myndigheder og revision (fx Rigsrevisionen).</p>
    <li data-md>
     <p>Der er behov for præcisering af, hvilket ansvar for den enkelte aktør der følger af, at denne aktør er afhængig af og påvirker sikkerheden hos andre aktører.</p>
    <li data-md>
     <p>Der er behov for vurdering af samspillet mellem aktørerne i føderationer, fx for hvordan sikkerhedsrisici og -hændelser skal formidles til andre aktører i føderationer.</p>
   </ul>
   <p><em>Implikationer</em></p>
   <ul>
    <li data-md>
     <p>En føderation definerer klart og entydigt såvel rammer som indhold af de former for elektroniske identiteter, autentifikationer og adgangskontroller, som en gensidig tillid baseres herpå. Det gælder både teknisk og organisatorisk.</p>
    <li data-md>
     <p>For føderationen defineres en styringsmodel (governance) for, hvorledes føderationens rammer og indhold vedligeholdes, og for kvalitetskrav til og ansvarsforpligtigelser hos de organisationers brugerstyringsadministration, som indgår i føderationen.</p>
    <li data-md>
     <p>Der udarbejdes et trust framework med evt. akkreditering og certificering baseret på en risikovurdering.</p>
    <li data-md>
     <p>Der udøves kontrol og defineres sanktionsmuligheder.</p>
    <li data-md>
     <p>De risici, der beror på arbejdsdeling mellem aktørerne, skal håndteres ved, at hver enkelt aktør skal vurdere samspillet med andre aktører i sin sikkerhedsmæssige risikovurdering i henhold til fx ISO/IEC 27001.</p>
    <li data-md>
     <p>Aktører i føderationer skal i relevant omfang informere andre aktører i føderationen om risikovurderinger og sikkerhedshændelser.</p>
   </ul>
   <p><dfn data-dfn-type="dfn" data-noexport id="harmoniserede-tillidstjenester">Harmoniserede tillidstjenester<a class="self-link" href="#harmoniserede-tillidstjenester"></a></dfn> Princip om at føderation sikre</p>
   <p><em>Rationale</em></p>
   <p><em>Implikationer</em></p>
   <p><dfn data-dfn-type="dfn" data-noexport id="princip-7-tjenesteudbyder-den-dataansvarlige-har-ansvaret-for-at-hndhve-brugernes-adgange">Princip 7: Tjenesteudbyder (den dataansvarlige) har ansvaret for at håndhæve brugernes adgange<a class="self-link" href="#princip-7-tjenesteudbyder-den-dataansvarlige-har-ansvaret-for-at-hndhve-brugernes-adgange"></a></dfn> [Hvem kunne det ellers være? NATO som anti-pattern? Følger princippet af GDPR? /madsh]</p>
   <p>De fælles elementer i brugerstyring forsyner en elektronisk identitet med attributter, der fremsendes til den tjeneste, som brugeren vil have adgang til. Det er tjenesteudbyder, der har ansvaret for at håndhæve brugeres adgange til tjenesten på grundlag af information fra en identitetsbroker (og eventuelt supplerende lokale attributter). Tjenesteudbyder har ansvaret for ud fra sin adgangspolitik at afgøre, om brugeren får adgang.</p>
   <p><em>Rationale</em></p>
   <ul>
    <li data-md>
     <p>Det er hos tjenesteudbyder, at viden om konsekvenserne af at give adgang kan findes, og det er derfor tjenesteudbyder, der har ansvaret for at afgøre, om der gives adgang.</p>
    <li data-md>
     <p>Det juridiske ansvar for at håndhæve adgangen til tjenesten ligger hos dens ejer (den dataansvarlige, jf. fx persondataloven).</p>
   </ul>
   <p><em>Implikationer</em></p>
   <ul>
    <li data-md>
     <p>Funktioner til styring af adgangskontrol skal bygges i sammenhæng med tjenesterne.</p>
    <li data-md>
     <p>Der kan inden for sikkerhedsdomæner være en gevinst i at vedligeholde fælles adgangspolitikker og i sammenhæng hermed et sæt fælles attributter på tværs af aktører og tjenester i sikkerhedsdomænet.</p>
   </ul>
   <blockquote>
    <p>!<a href="logo.png"></a> Princippet om tjenesteudbyderes håndhævelse af brugeres adgang er en følge af krav i persondataloven om dataansvar, og derfor SKAL det efterkommes af alle med dataansvar for fagapplikationer med persondata. Det BØR efterkommes af alle med dataansvar for fagapplikationer uden persondata.</p>
   </blockquote>
   <p><dfn data-dfn-type="dfn" data-noexport id="princip-8-brugerstyring-realiseres-i-lst-koblede-komponenter">Princip 8: Brugerstyring realiseres i løst koblede komponenter<a class="self-link" href="#princip-8-brugerstyring-realiseres-i-lst-koblede-komponenter"></a></dfn></p>
   <p>Stadig flere løsninger for administration af elektroniske identiteter, autentifikation og adgangskontrol er præget af stigende arbejdsdeling og opdeling i løst koblede komponenter, der kan kombineres efter behov. De nødvendige aktiviteter omkring identitet og adgangsstyring skal logisk opdeles i udstedelse af akkreditiver, autentifikation af en given identitet, adgangskontrol, vedligeholdelse af attributter og vedligeholdelse af brugeres identiteter og adgange. På sigt vil vi sandsynligvis se en yderligere opdeling.</p>
   <p><em>Rationale</em></p>
   <ul>
    <li data-md>
     <p>Løst koblede, sammensatte komponenter og standarder for informationsoverførsler mellem de definerede rammer, som leverandører kan agere i. Dette giver større fleksibilitet og bedre udnyttelse af udvikling og innovation i markedet, og aktørerne kan udnytte og udfolde det løsningsrum, som rammerne giver.</p>
    <li data-md>
     <p>En åben og modulær arkitektur giver mulighed for at udskifte/variere delløsninger, integrere nye teknologier og implementere ændrede regler og politikker. Dette leder til større agilitet og ændringsparathed.</p>
    <li data-md>
     <p>En opdeling i komponenter skal reducere den samlede kompleksitet af den fællesoffentlige brugerstyring.</p>
   </ul>
   <p><em>Implikationer</em></p>
   <ul>
    <li data-md>
     <p>En anvendelse af referencearkitekturen skal definere et overordnet sæt tjenester eller byggeblokke for brugerstyring og et antal områder for fællesoffentlige standarder for, hvordan disse udveksler adgangsbilletter og attributter. Enhver løsning inden for brugerstyring skal tage udgangspunkt i disse tjenester og skal overholde disse standarder.</p>
    <li data-md>
     <p>Anvendelse af åbne, løst koblede komponenter håndteret af flere aktører forudsætter, at der er tillid mellem parterne, jf. 4.4.</p>
    <li data-md>
     <p>Åbne, løst koblede komponenter implementeres, så brugerne får en sammenhængende brugeroplevelse.</p>
    <li data-md>
     <p>Standarderne for informationsoverførsler mellem de løst koblede komponenter tager udgangspunkt i internationalt anerkendte standarder inden for EU eller globalt.</p>
   </ul>
   <blockquote>
    <p>!<a href="logo.png"></a> Princippet om løst koblede brugerstyringskomponenter SKAL efterkommes i fællesoffentlige løsninger, herunder fællesoffentlige eID og NemLog-in.
Princippet BØR efterkommes af tværoffentlige brugerstyringsløsninger.
For øvrige KAN princippet efterkommes.</p>
   </blockquote>
   <p><dfn data-dfn-type="dfn" data-noexport id="princip-9-tvroffentlige-brugerstyringslsninger-baseres-p-en-kerne-af-flles-komponenter-i-samspil-med-vrige-komponenter-i-infrastrukturen">Princip 9: Tværoffentlige brugerstyringsløsninger baseres på en kerne af fælles komponenter i samspil med øvrige komponenter i infrastrukturen<a class="self-link" href="#princip-9-tvroffentlige-brugerstyringslsninger-baseres-p-en-kerne-af-flles-komponenter-i-samspil-med-vrige-komponenter-i-infrastrukturen"></a></dfn></p>
   <p>I opbygningen af en digital infrastruktur har det offentlige gentagne gange opnået gode resultater ved at gå sammen om at opbygge en fælles kerne, som fungerer i samspil med øvrige komponenter. Det gælder fx NemID, NemLog-in og Datafordeleren der er fællesoffentlige, men det kan også gælde komponenter udviklet i en speciel kontekst som fx WAYF eller UNI-Login der indgår i et samspil på tværs.</p>
   <p><em>Rationale</em></p>
   <ul>
    <li data-md>
     <p>Infrastrukturløsninger kræver store investeringer og kan som oftest kun opbygges ved at flere parter går sammen.</p>
    <li data-md>
     <p>Der er besparelser ved at opbygge en kerne i fællesskab, som alle kan anvende, i stedet for at der udvikles flere komponenter, som delvist dækker samme opgaver.</p>
    <li data-md>
     <p>En fælles kerne af infrastruktur og principper giver et operationelt grundlag for at opbygge løsninger med den målsatte sammenhæng og kvalitet.</p>
   </ul>
   <p><em>Implikationer</em></p>
   <ul>
    <li data-md>
     <p>Ambitioner og omfang af den fælles kerne skal aftales mellem de centrale parter.</p>
    <li data-md>
     <p>Der er løbende behov for at tage stilling til balancen mellem den fælles kerne og de decentrale elementer.</p>
   </ul>
   <blockquote>
    <p>!<a href="logo.png"></a> Princippet om brugerstyring baseret på fælles kerne i samspil med decentrale komponenter SKAL efterkommes af alle fællesoffentlige løsninger. For de øvrige løsninger BØR princippet efterkommes.</p>
   </blockquote>
   <p><dfn data-dfn-type="dfn" data-noexport id="princip-10-tvroffentlig-brugerstyring-etableres-i-overensstemmelse-med-internationale-standarder-og-lsninger">Princip 10: Tværoffentlig brugerstyring etableres i overensstemmelse med internationale standarder og løsninger<a class="self-link" href="#princip-10-tvroffentlig-brugerstyring-etableres-i-overensstemmelse-med-internationale-standarder-og-lsninger"></a></dfn></p>
   <p>Tværoffentlig brugerstyring indgår i et samspil med det internationale på flere måder. Flertallet af tekniske løsninger er udviklet i udlandet, og arkitekturer og standarder er udviklet i internationale samarbejder. Dansk brugerstyring på tværs skal så vidt muligt lægge sig tæt op ad den internationale udvikling, dog med en konkret vurdering af, hvorvidt denne udvikling passer i en dansk sammenhæng</p>
   <p><em>Rationale</em></p>
   <ul>
    <li data-md>
     <p>Anvendelse af standarder og løsninger med internationalt scope betyder bedre og billigere løsninger, der kan indgå i sammenhæng.</p>
    <li data-md>
     <p>Lokale brugerstyringsløsninger anvender generelt internationale produkter, der efterlever internationale standarder, og internationalt baserede løsninger og standarder vil derfor lette samspillet mellem det lokale og det tværgående.</p>
    <li data-md>
     <p>Fælles åbne standarder sikrer interoperabilitet.</p>
    <li data-md>
     <p>Der er generelt bedre adgang til leverandører og kompetencer på markedet, når løsningerne baserer sig på anerkendte og udbredte standarder.</p>
    <li data-md>
     <p>Ved at basere sig på standarder, som andre også anvender, øges ’beredskabet’ omkring eventuelle problemer der skulle opstå med standarderne, f.eks. hvis der bliver fundet sikkerhedshuller.</p>
   </ul>
   <p><em>Implikationer</em></p>
   <ul>
    <li data-md>
     <p>Det skal altid undersøges, hvilke internationale standarder det er muligt at anvende, evt. med dansk profilering.</p>
    <li data-md>
     <p>Danske profileringer bør begrænses til at dække forhold i økosystemet, som er specifikt danske, og som ikke kan ændres til at følge internationale standarder (fx CPR-data).</p>
   </ul>
   <blockquote>
    <p>!<a href="logo.png"></a> Princippet om brugerstyring i overensstemmelse med internationale standarder og løsninger
BØR efterkommes i fællesoffentlige løsninger, i tværoffentlige brugerstyringsløsninger og i tjenester, der anvender disse. For øvrige KAN princippet efterkommes</p>
   </blockquote>
   <p>[er det øverst brugerstyringsprincip, sammenhængende økosystem... tillidstjenester]</p>
   <p>[inkl bilag om hvad vi har gjort]</p>
   <p>OECD har defineret otte basale principper for privatlivsbeskyttelse(Kan findes beskrevet hos OECD:https://www.oecd.org/sti/ieconomy/oecdguidelinesontheprotectionofprivacyandtransborderflowsofpersonaldata.htm):</p>
   <p>Princippet om begrænset indsamling
Princippet om datakvalitet
Princippet om formålsspecificering
Princippet om anvendelsesbegrænsning
Princippet om datasikkerhed
Princippet om åbenhed (transparens)
Princippet om individets deltagelse
Princippet om ansvarlighed (accountability).
Løsninger bør i design, udvikling, drift og vedligehold forholde sig til ovenstående.</p>
   <h3 class="heading settled" data-level="2.3" id="vision"><span class="secno">2.3. </span><span class="content">Vision</span><a class="self-link" href="#vision"></a></h3>
   <p>Tjenester kan implementeres og anvendes effektiv ved anvendelse af tillidstjenester (i sund konkurrence).??</p>
   <h3 class="heading settled" data-level="2.4" id="vrdiskabelse"><span class="secno">2.4. </span><span class="content">Værdiskabelse</span><a class="self-link" href="#vrdiskabelse"></a></h3>
   <h3 class="heading settled" data-level="2.5" id="juridiske-rammer"><span class="secno">2.5. </span><span class="content">Juridiske rammer</span><a class="self-link" href="#juridiske-rammer"></a></h3>
   <p>I maj 2018 trådte EU’s forordning om persondatabeskyttelse (GDPR) i kraft. Denne stiller en række krav til persondatabeskyttelse, og en del af disse krav er dækket, hvis man følger ovenstående basale principper fra OECD. Dog er der konkrete krav i GDPR, som skal indtænkes i løsninger, herunder:</p>
   <p>Privacy Impact Assessments
Privacy-by-design og privacy-by-default
Retten til at blive glemt
Retten til dataportabilitet
Retten til indsigt i egne data
Selvom privatlivsbeskyttelse omfatter andet end informationssikkerhed, kan man med fordel indbygge sit privacy-program i eksisterende ISMS, da mange kontroller er sammenfaldende.</p>
   <h3 class="heading settled" data-level="2.6" id="sikkerhed"><span class="secno">2.6. </span><span class="content">Sikkerhed</span><a class="self-link" href="#sikkerhed"></a></h3>
   <p>[Er det måske mere beslutning der er truffet strategisk, at vi er forpligtiget til at anvende ISO 27001? Og at vi har NSIS /madsh]</p>
   <p>[Skal vi prøve at pege på de relevante ISO kontroller]</p>
   <p>Fastlæggelse af niveau for og håndtering af informationssikkerhed skal foretages af alle offentlige organisationer og tage udgangspunkt i ISO/IEC 27001-standarden for styring af informationssikkerhed. ISO 27001 er valgt som statslig sikkerhedsstandard og har været obligatorisk at følge for statslige institutioner siden januar 2014, og kommunerne er forpligtet til at følge principperne.</p>
   <p>Realiseringen skal ske gennem et ledelsessystem for informationssikkerhed (Information Security Management System, ISMS). Digitaliseringsstyrelsen har udarbejdet vejledninger, værktøjer og skabeloner hertil, som er placeret her: http://www.digst.dk/Informationssikkerhed.</p>
   <p>Hovedindholdet i ISO/IEC 27001 er, at niveau for og håndtering af informationssikkerhed tager udgangspunkt i en risikovurdering. Organisationens ledelse fastlægger på baggrund af en risikovurdering et sikkerhedsniveau, som svarer til den forretningsmæssige betydning af de aktiver (fx informationer), som organisationen ejer, vedligeholder og har dataansvaret for, og de tjenester, som den stiller til rådighed for andre organisationer af alle typer. Organisationen skal gennemføre en afbalanceret risiko- og konsekvensvurdering under hensyntagen til de økonomiske forhold og herudfra fastlægge</p>
   <p>retningslinjer
forretningsgange og instrukser
sikkerhedsforanstaltninger,
som beskytter organisationen på de risikoniveauer, der er valgt. De vil ofte være forskellige, afhængigt af de konkrete informationer og tjenester.</p>
   <p>Indenfor domænet <a class="property" data-link-type="propdesc">brugerstyring</a> er det særligt relevant at beskæftige sig med risici knyttet til håndtering af digitale identiter, rettigheder og akkreditiver. National Standard for Identiteters Sikringsniveauer (NSIS) er her et afgørende element i den samlede risikostyring, som gør det muligt at udtrykke graden af tillid til en autentificeret identitet på en tre-trinsskala:� Lav, Betydelig, Høj. NSIS kan benyttes både af brugerstyringstjenester, som leverer autentificerede identiteter, og af forretningstjenester, som aftager identiteter.</p>
   <p>Den kommende fællesoffentlige infrastruktur for identiteter i form af MitID og NemLog-in3 bygges på NSIS, og overholdelse af NSIS standarden vil være en forudsætning for at tilslutte en forretningstjeneste, broker eller lokal IdP til NemLog-in3.</p>
   <p>I en tværoffentlig brugerstyring er det endvidere nødvendigt at koordinere risikovurderinger og valg af niveau for og håndtering af informationssikkerheden. Dette kan ske ved at benytte et fælles trust framework som NSIS. For at alle parter kan have tillid til hinanden, ekspliciterer, harmoniserer og standardiserer et trust framework forskellige aspekter af sikkerhed, herunder politikker, sikkerhedsmæssige tiltag og fælles sprog. Harmonisering og standardisering er teoretisk set ikke en nødvendighed, men konsekvensen ved ikke at harmonisere og standardisere er, at kompleksiteten af kommunikationen mellem sikkerhedsdomæner bliver meget høj. Der skal indgås individuelle aftaler mellem parterne, og disse skal kende til hinandens politikker og arbejdsgange m.m. Et trust framework er med til at reducere denne kompleksitet.</p>
   <p>NSIS og trust frameworks generelt giver mulighed for:</p>
   <p>Sammenhængende løsninger på tværs af domæner og føderationer via gensidig tillid (sammenkobling af siloer).
En fælles forståelse samt koordinering/governance af sikringsniveauer.
Transparens gennem tydelig beskrivelse af krav til parterne og regler for deres adfærd.
En flerleverandørstrategi baseret på outsourcing af funktioner med mulighed for private aktører - hvor det er ønskeligt og økonomisk fordelagtigt.
Veldefineret governance gennem anmeldelse, revision og tilsyn.
National Standard for Identiteters Sikringsniveauer (NSIS), der har afsæt i eIDAS-forordningen, er et dansk trust framework for identitetssikring. NSIS fastlægger som tidligere nævnt tre sikringsniveauer (”Lav”, ”Betydeligt” og ”Høj”), som modsvarer de tilsvarende niveauer i eIDAS. Niveauerne dækker hele livscyklussen for elektroniske identiteter fra registrering til arkivering/nedlæggelse.</p>
   <p>Når en bruger autentificerer sig mod en forretningtjeneste, vil brugerens security token (billet) indeholde information om det aktuelle sikringsniveau for autentifikationen. Forretningstjenesten kan på baggrund af dette (samt øvrige attributter om brugeren) beslutte, hvilken adgang brugeren kan få i tjenesten. Sikringsniveauet er dermed et input til adgangskontrollen i tjenesten.</p>
   <h3 class="heading settled" data-level="2.7" id="fllesoffentlige-arkitekturprincipper-og--regler"><span class="secno">2.7. </span><span class="content">Fællesoffentlige arkitekturprincipper og -regler</span><a class="self-link" href="#fllesoffentlige-arkitekturprincipper-og--regler"></a></h3>
   <p>Den Fællesoffentlige Digitale Arkitektur (FDA) udpeger en række principper til rammesætning og styring af den offentlige digitalisering.</p>
   <p>Vi understøtter særligt...: 3, 4, 5</p>
   <p>Derudover kan en række af de øvrige arkitekturregler udfoldes og konkretiseres i forhold til denne referencearkitektur:</p>
   <h2 class="heading settled" data-level="3" id="forretningsarkitektur"><span class="secno">3. </span><span class="content">Forretningsarkitektur</span><a class="self-link" href="#forretningsarkitektur"></a></h2>
   <p>Brugerstyring dækker opgaver og funktioner i forbindelse med håndtering af brugere af digitale løsninger. Det er en fælles betegnelse for de foranstaltninger som sikrer, at de rette brugere får adgang til de rette it-systemer - og alle andre afvises. Brugerstyring involverer dels <em>administration</em> af brugeridentiteter (før de tilgår it-systemer), herunder registring og udstedelse af identifikationsmidler, beskrivelse af attributter i form af egenskaber, roller, relationer mv. og dels en <a class="property" data-link-type="propdesc">run-time</a> del, når brugere tilgår it-systemer, som bl.a. involverer autentifikation og udførelse af adgangskontrol.</p>
   <p>Figuren herunder viser de væsentligste elementer i brugerstyringsdomænet (røde kasser) og kontekst i form af blå og grå kasser.</p>
   <div class="new">
    <figure>
      <img src="kontekst.svg"> 
     <figcaption>Oversigt over brugerstyringsdomænet [overveje at sætte 'vidergivelse af data på...']</figcaption>
    </figure>
   </div>
   <p>Det øverste lag i figuren omhandler governance i form af ledelse af informationssikkerhed. Det er her ledelsen i en organisation godkender sikkerhedspolitikker, og giver mandat til det sikkerhedsniveau, der skal opnås, hvordan identificerede risici håndteres, og hvordan persondata beskyttes. Her er organisationen dels underlagt lovgivning og regulering (som fx databeskyttelsesforordningen) og dels egne forretningsmæssige vurderinger af risici, risikoappetit mv.</p>
   <p>På baggrund heraf udformes dels politikker for adgang til egne tjenester (adgangspolitikker), som beskriver kriterier og sikkerhedsniveauer for adgang, og dels politikker for anvendelse af eksterne parter i forbindelse med brugerstyring (tillidspolitikker).</p>
   <p>Til at realisere politikkerne opereres der med en række tillidstjenester, der udfører betroede funktioner i brugerstyringen. Disse omfatter udstedelse elektroniske identifikationsmidler, som brugerne kan autentificere sig med, de omfatter beskrivelse af attributter ved brugerne (fx navn, egenskaber, roller, relationer, bemyndingelser osv.), og de omfatter endelig autentifikation af brugere. <em>Tillidstjenester</em> udfører som nævnt betroede funktioner, der understøtter forretningstjenesterne - herunder særligt den adgangskontrol, som forretningstjenesterne skal varetage, før der gives adgang til systemer og data.</p>
   <p>I den tekniske arkitektur beskrevet i kapitel (@todo) beskrives en række supplerende funktioner (fx billetudstedelse, brokering, discovery), som ikke optræder på forretningsniveau.</p>
   <p>En tjeneste og et it-system er i denne kontekst synonymer for det samme: et stykke it, der kan levere informationer og funktionaliteter. Et stykke it, der optræder som leverandør, kaldes en tjeneste eller tjeneste<em>udbyder</em>. Et stykke it, der optræder som den bruger, der efterspørger informationer og funktionalitet, kaldes en tjenestekonsument. Det samme stykke it kan optræde både som leverandør (være en tjeneste) og i sin udførelse af tjenesten optræde som bruger (være en tjenestekonsument) over for andre tjenester.</p>
   <h3 class="heading settled" data-level="3.1" id="om-tillidstjenester-og-eidas"><span class="secno">3.1. </span><span class="content">Om tillidstjenester og eIDAS</span><a class="self-link" href="#om-tillidstjenester-og-eidas"></a></h3>
    I denne referencearkitektur anvendes betegnelsen <a class="property" data-link-type="propdesc">tillidstjeneste</a> i bred forstand om en tjeneste, der udfører betroede funktioner, der understøtter brugerstyring i forretningstjenesterne. Med denne terminologi opnås et tydeligt skel til forretningstjenester, hvilket understøtter beskrivelse af eksempelvis føderationer, hvor forskellige parter leverer forskellige tjenester. Anvendelsen af termen <a class="property" data-link-type="propdesc">tillidstjeneste</a> er dermed væsentligt bredere her end i eIDAS-forordningen, som regulerer nogle specifikke former for tillidstjenester (hovedsageligt) indenfor PKI-området: 
   <ul>
    <li data-md>
     <p>Certifikatudstedere (CA)</p>
    <li data-md>
     <p>Tidsstemplingsservices</p>
    <li data-md>
     <p>Valideringtjenester for validering af elektroniske signaturer, elektroniske segl og tidsstempler</p>
    <li data-md>
     <p>Tjenester til bevaring af signaturer, segl og certifikater</p>
    <li data-md>
     <p>Elektroniske registrerede leveringstjenester.</p>
   </ul>
   <p>eIDAS-forordningen stiller en række krav til udbydere (PKI)-tillidstjenester, som ikke skal forveksles med tillidstjenesterne i denne referencearkitektur.</p>
   <p>Det er endvidere vigtigt at være opmærksom på, at eIDAS-forordningen stiller krav om, at hvis en myndighed stiller en digital service til rådighed for borgerne og virksomhederne med anvendelse af en såkaldt notificeret eID-løsning, skal det være muligt at autentificere sig med notificerede eID-løsninger fra andre EU-lande med samme eller højere sikringsniveau. I kontekst af figuren ovenfor kan man sige, at eIDAS dikterer nogle elementer af visse (offentlige) tjenesters adgangspolitik, nemlig at tjenesterne skal være tilgængelige for andre EU-landes borgere og virksomheder.</p>
   <h3 class="heading settled" data-level="3.2" id="forretningsmssig-kontekst"><span class="secno">3.2. </span><span class="content">Forretningsmæssig kontekst</span><a class="self-link" href="#forretningsmssig-kontekst"></a></h3>
    Et helt centralt tema i denne referencearkitektur er, at forretningstjenester og tillidstjenester arbejder sammen om at udføre brugerstyring - såkaldt <em>shared use cases</em>. Her opfattes tillidstjenesterne ofte som noget infrastruktur, der muliggør en sikker forretningsmæssig anvendelse af et it-system.  Grundlaget for samarbejdet er baseret på tillid, som gør det muligt for forretningstjenesten at uddelegere betroede funktioner til en tillidstjeneste udbudt af en tredjepart. Tilliden kan være rodfæstet i lovgivning, i standarder og rammeværk med indbygget kontrol og governance eller i aftaler (herunder databehandleraftaler). Et vigtigt eksempel er National Standard for Identiteters Sikringsniveauer (NSIS), som gennem krav og kontrol via revisionserklæringer gør det muligt at have tillid til (og kvantificere risici for) autentificerede identiteter, der er håndteret af en ekstern part (tillidsjeneste). NSIS definerer tre sikringsniveauer for for en autentificeret identitet (Lav, Betydelig, Høj), og gør det dermed muligt både at klassificere tillidstjenester i forhold til disse og indrette tjenesters adgangspolitikker differentieret. 
   <p>Nedenstående figur viser et funktionelt overblik med fokus på samarbejdet mellem udbydere af tillidstjenester og forretningstjenester.</p>
   <div class="new">
    <figure>
      <img src="usecases.svg" width="85%"> 
     <figcaption>Samarbejde mellem tillidstjenester og forretningstjenester</figcaption>
    </figure>
   </div>
   <p>I nedenstående figur er vist en shared use case med fokus på adgangskontrol:</p>
   <div>
    <figure>
      <img src="use-case-simpel.svg" width="85%"> 
     <figcaption>Samarbejde ved adgangskontrol</figcaption>
    </figure>
   </div>
   <p>Bemærk at termen <em>attributbeskrivelse</em> er en væsentlig generalisering, som i praksis kan dække over en række forskellige aktiviteter, herunder:</p>
   <ul>
    <li data-md>
     <p>Administration af brugere i et brugerkatalog (fx et AD) med navn, titel, email, afdeling osv.</p>
    <li data-md>
     <p>Tildeling (og udstilling) af roller og fuldmagter til en brugere</p>
    <li data-md>
     <p>Udstilling af autoritative data der beskriver brugere som fx CPR-registret, CVR-registret, Sundhedsstyrelsens autorisationsregister mv.</p>
    <li data-md>
     <p>Autoritativ beskrivelse af relationer mellem brugere og andre objekter/subjekter (ansat i, forælder til, tegningsberettiget for, ejer af, værge for).</p>
   </ul>
   <p>Tillidsbegrebet er vigtigt for attributter, idet de indgår som væsentligt input til beslutninger i adgangskontrollen. På engelsk bruges ofte betegnelsen <em>verified claims</em> om det forhold, at en tredjepart har verificeret en attribut. I en adgangspolitik bør man derfor forholde sig hvilke kilder til attributter (attributtjenester), der er tillid til, og i hvilken grad. I visse tilfælde kan attributter kan endda være oplyst af brugeren selv (<em>self-asserted claims</em>), hvilket kan være helt på sin plads, forudsat at dette er udtrykt i adgangspolitikken.</p>
   <p>Bemærk at figurerne ovenfor er udtryk for abstrakte forretningsbeskrivelser, og at man i en konkret arkitektur fx kan have flere forskellige parter, som udfører fx attributbeskrivelse i et konkret scenarie. Det kan således variere betydeligt, hvilke attributter forskellige tjenester har behov for at kunne håndhæve deres adgangspolitik, samt de mekanismer attributter tilvejebringes med (fx push eller pull).</p>
   <p>I senere kapitler vedr. den tekniske arkitektur beskrives mere konkret, hvordan attributter kan håndteres i brugerstyring. Ofte formidles de fx af sikkerhedshensyn som signerede data (<em>security tokens</em> eller <em>billetter</em> på dansk), og ofte er der tekniske komponenter (brokere), som orkestrerer indsamling og formidling af attributter fra forskellige kilder for at lette byrden for forretningstjenester. Det er således ikke ligegyldigt, hvordan forretningsfunktioner udmøntes i en teknisk arkitektur - særligt når er ønske om at opnå et økosystem der er sikkert, sammenhængende og brugervenligt.</p>
   <h3 class="heading settled" data-level="3.3" id="forretningsfunktioner"><span class="secno">3.3. </span><span class="content">Forretningsfunktioner</span><a class="self-link" href="#forretningsfunktioner"></a></h3>
    I dette afsnit beskrives forretningsfunktionerne i domænet i lidt større detaljer - både dem som udføres af tillidstjenester og forretningstjenester. 
   <h4 class="heading settled" data-level="3.3.1" id="forretningsfunktionen-udstedelse-af-identifikationsmidler"><span class="secno">3.3.1. </span><span class="content">Forretningsfunktionen udstedelse af identifikationsmidler</span><a class="self-link" href="#forretningsfunktionen-udstedelse-af-identifikationsmidler"></a></h4>
   <p>Formålet med at udstede identifikationsmidler til brugerne er, at de kan autentificere sig som en entydig identitet, når de interagerer med forretningstjenester (og evt. tillidstjenester). National Standard for Identiteters Sikringsniveau (NSIS) beskriver og stiller krav til delprocesserne under udstedelse:</p>
   <ul>
    <li data-md>
     <p>Ansøgning og registrering</p>
    <li data-md>
     <p>Verifikation af identitet</p>
    <li data-md>
     <p>Levering og aktivering af identifikationsmidler</p>
    <li data-md>
     <p>Suspendering, spærring og genaktivering</p>
    <li data-md>
     <p>Fornyelse og udskiftning.</p>
   </ul>
   <p>I brugerstyring er det en forudsætning, at brugerne registreres og tildeles en identitet, som forbindes til et identifikationsmiddel. <strong>Registreringen</strong> af identiteten kan varetages af en underfunktion (registreringstjeneste), som også verificerer identiteten (identitetssikring). Eksempelvis agerer banker &amp; borgerservice som registreringstjenester for NemID/MitID løsningerne. Processen for udstedelse af identifikationsmidler kan variere betydeligt i kvalitet, hvilke attributter der valideres, og scope for den efterfølgende anvendelse.</p>
   <p>I NSIS opereres med, at identiteten kan valideres på tre forskellige sikringsniveauer (fx i forhold til om brugeren har gennemført en on-line registrering, er mødt fysisk op, har præsenteret pas/kørekort osv.). Kvaliteten af en identitetssikring betegnes ofte <em>Identity Assurance Level</em>.</p>
   <blockquote>
    <p>Personer registrerer selv deres Facebook-identitet, hvor kun e-mail adressen verificeres, mens NemID/MitID-identiteter får valideret navn og CPR-nummer.</p>
   </blockquote>
   <p>Efter oprettelse af den elektroniske identitet skal et <strong>identifikationsmiddel</strong> (fx kodeord, PIN, fingeraftryk) <strong>tilknyttes</strong> til identiteten. Identifikationsmidler anvendes til at autentificere identiteten i modsætning til attributter, som beskriver identiteten. En udsteder af identifikationsmidler skal dels sikre sammenhængen mellem identifikationsmidlet og identitet, og dels stå inde for identifikationsmidlets tekniske styrke (se næste afsnit). Udstederen kan knytte allerede udstedte identifikationsmidler til identiteten eller udstede et nyt identifikationsmiddel og tilknytte dette til identiteten. Styrken af identifikationsmidler er ligeledes klassificeret i NSIS og tager afsæt i bl.a. antallet af autentifikationsfaktorer, hvor resistent det er mod angreb, samt andre sikkerhedsmæsige egenskaber.</p>
   <p>Det er centralt i denne referencearkitektur, at der opereres med en <em>løs</em> kobling mellem identiteter og identifikationsmidler. Eksempelvis kan et identifikationsmiddel benyttes til at autentificere flere forskellige identiteter (hørende til samme entitet). Et eksempel på dette i fællesoffentlig kontekst er, når samme private NemID/MitID både kan bruges til autentificere både en privatperson og en ejer (fuldt ansvarlig deltager) for en enkeltmandsvirksomhed. Brugeren skal altid i brugssituationen være oplyst om, hvilken elektronisk identitet vedkommende optræder med.</p>
   <p>CPR-nummeret er en attribut, som desværre også historisk er brugt som identifikationsmiddel - dvs. som bevis for identitet. Denne anvendelse af CPR-nummeret er imod regler fra CPR-kontoret, men anvendes stadig i et vist omfang.</p>
   <p>I forbindelse med registreringen eller efter denne kan identitetens karakteristika og egenskaber <strong>beskrives i form af attributter</strong> (fx køn, adresse, alder, et nummer i form af fx personalenummer). For medarbejderidentiteter foretages en del af registreringen typisk af en administrator udpeget af virksomhedens ledelse, hvor en central del består i at sikre relationen mellem virksomheden (som juridisk enhed) og medarbejderen (som fysisk person). For IoT-enheder kan en del af registreringen ske af brugeren eller ejeren - fx når en person tilknytter en elektronisk blodtryksmåler til sin profil på en sundhedstjeneste og giver den adgang til at indberette på denne.</p>
   <h4 class="heading settled" data-level="3.3.2" id="forretningsfunktionen-autentifikation"><span class="secno">3.3.2. </span><span class="content">Forretningsfunktionen autentifikation</span><a class="self-link" href="#forretningsfunktionen-autentifikation"></a></h4>
   <p>Autentifikation er en proces, som genkender og verificerer en identitet (tilknyttet en entitet) gennem anvendelse af et identifikationsmiddel, der er koblet til identiteten som beskrevet ovenfor. Ved multi-faktor autentifikation forstås en au- tentifikationsproces, hvor det anvendte elektroniske identifikationsmiddel er baseret på flere autentifikationsfaktorer fra forskellige kategorier (noget kun brugeren ved, er, eller er i besiddelse af). Et eksempel her på findes i NemID/MitID, hvor brugerne kan logge på med en kombination af et hemmeligt kodeord og <a class="property" data-link-type="propdesc">swipe</a> i en App.</p>
   <p>Autentikationsfunktionen varetages i nogle tilfælde af den part, der har udstedt identifikationsmidlet (fx fordi denne kender brugerens password eller en afledt værdi heraf), men kan også være separat for udstederen (fx kan man i PKI-baseret autentifikation verificere brugerens kontrol over den private nøgle op mod det tilhørende certifikat).</p>
   <p>Styrken af en autentifikationsproces klassificeres i NSIS som AAL (Authenticator Assurance Level) og indplaceres på den sædvanlig tre-trins skala (Lav, Betydelig, Høj), og kan dermed indgå i adgangspolitikker for tjenester.</p>
   <p>I praksis kombineres autentifikationsfunktionen ofte med attributbeskrivelse, således at den identitet, som formidles til tjeneste, er beriget med yderligere oplysninger - og den kombinerede funktion betegnes ofte som <em>broker</em> eller <em>identitetsbroker</em>. En anden vigtig egenskab ved autentifikationstjenester er, at de kan afkoble forretningstjenester fra at kende til detaljerne i validering af brugernes identifikationsmidler. I føderationer er det bærende princip, at forretningstjenester ikke må udføre autentifikation selv. Ved at delegere denne funktion til en ekstern tillidstjeneste opnås en lang række fordele som fx en mere sammenhængende, sikker og skalerbar arkitektur, hvor brugerne kan genbruge deres identifikationsmidler på tværs af forretningstjenester.</p>
   <h4 class="heading settled" data-level="3.3.3" id="foretningsfunktionen-attributbeskrivelse"><span class="secno">3.3.3. </span><span class="content">Foretningsfunktionen attributbeskrivelse</span><a class="self-link" href="#foretningsfunktionen-attributbeskrivelse"></a></h4>
    Som tidligere nævnt bruges termen <em>attributbeskrivelse</em> i denne referencearkitektur som en generalisering over 'data om brugere', som i praksis kan dække over en række forskellige aktiviteter udført af forskellige aktører, herunder: 
   <ul>
    <li data-md>
     <p>Administration af brugere i et brugerkatalog (fx et AD) med navn, titel, email, afdeling osv.</p>
    <li data-md>
     <p>Tildeling (og udstilling) af roller og fuldmagter til brugere</p>
    <li data-md>
     <p>Udstilling af autoritative data der beskriver brugere som fx CPR-registret, CVR-registret, Sundhedsstyrelsens autorisationsregister mv.</p>
    <li data-md>
     <p>Autoritativ beskrivelse af relationer mellem brugere og andre objekter/subjekter (ansat i, forælder til, tegningsberettiget for, ejer af, værge for).</p>
   </ul>
   <p>Der er således både et aspekt, som vedrører administration, og et aspekt vedrørende udstilling. Førstnævnte handler fortrinsvis om datakvalitet og autoritative kilder, hvor sidstnævnte handler om at gøre attributter tilgængelige for forretningstjenesters adgangskontrol.</p>
   <p>Traditionelt har ordet <a class="property" data-link-type="propdesc">autorisation</a> også været anvendt i brugerstyring i forskellige betydning om det at have rettigheder til en tjeneste og/eller til data i tjenesten:
I denne referencearkitektur benyttes attributbeskrivelse som en bredere og mere generel term end <a class="property" data-link-type="propdesc">autorisation</a> for bedre at kunne dække den mangfoldighed af adgangspolitikker, der eksisterer.</p>
   <p>Formålet med attributbeskrivelsen er i sidste ende at tilvejebringe grundlaget for den adgangskontrol, der udføres i en forretningstjeneste. En forretningstjeneste kan således have brug for at kende brugerens alder, køn og bopælskommune for at kunne afgøre, hvilket adgang der skal gives. Udførsel af adgangskontrol beskrives nedenfor.</p>
   <h4 class="heading settled" data-level="3.3.4" id="foretningsfunktionen-udforme-adgangspolitik"><span class="secno">3.3.4. </span><span class="content">Foretningsfunktionen udforme adgangspolitik</span><a class="self-link" href="#foretningsfunktionen-udforme-adgangspolitik"></a></h4>
    Tjenesteudbydere bør udarbejde en adgangspolitik for deres forretningstjenester, som definerer betingelser for adgang til funktioner og data. En adgangspolitik kan fx udtrykke, at en tjeneste kun må tilgås af identiteter autentificeret på NSIS sikringsniveau Høj, som er tilknyttet et bestemt CVR-nummer, og er tildelt en bestemt rolle. Adgangspolitikker kan i praksis være formuleret mere eller mindre eksplicit (og adskilt fra implementeringen). Eksempelvis kan en borgerrettet selvbetjeningsløsing have en meget simpel politik om, at hver borger (udpeget ved CPR) får adgang til egne data. Det afgørende er, at adgangspolitikken er i overensstemmelse med ledelsens anvisninger i form af informationssikkerhedspolitik, risikovurderinger mv. 
   <p>For at sikre overenstemmelse mellem adgangspolitik og den efterfølgende adgangskontrol, som håndhæver politikken, kan adgangspolitikken med fordel udtrykkes i termer af attributter, der er tilgængelige via attributbeskrivelsen. Dette er fx særligt relevant i token-baserede realiseringer, hvor adgang opnås på baggrund af attributter beskrevet i et security token. Jo mere standardiserede adgangspolitikker er på tværs af tjenester, jo lettere er det for brugere og brugerorganisationer at administrere i overensstemmelse med adgangspolitikkerne. Fællesoffentligt er visse attributter standardiseret (fx i OIOSAML profilerne), og nogle domæner har standardiseret en række attributter (dette gælder fx på sundhedsområdet).</p>
   <figure>
     <img src="billede3.PNG"> 
    <figcaption>Adgangsrettigheder – Samspil mellem bruger og tjenesteudbyder</figcaption>
   </figure>
   <p>Adgangspolitikker kan benytte roller som basis (Role Based Access Control – RBAC), eller man kan arbejdet direkte med attributter (Attribute Based Access Control - ABAC). I begge tilfælde vil en fælles forståelse kunne udtrykkes med en klassifikation, der systematisk beskriver roller eller andre attributsæt, evt. i form af et hierarki.</p>
   <h4 class="heading settled" data-level="3.3.5" id="forretningsfunktionen-adgangskontrol"><span class="secno">3.3.5. </span><span class="content">Forretningsfunktionen adgangskontrol</span><a class="self-link" href="#forretningsfunktionen-adgangskontrol"></a></h4>
   <p><strong>Adgangskontrol</strong> er den proces, hvor en tjenesteudbyder (på baggrund af forudgående autentifikation og attributbeskrivelse) sikrer, at der gives adgang til funktionalitet og data i overensstemmelse adgangspolitikken. Man taler også om håndhævelse af adgangspolitikken - og nogle tekniske standarder (XACML) opererer med begrebet 'Policy Enforcement Point'. Adgangskontrollen kan endvidere benytte attributter for den aktuelle brugerkontekst (fx brugerens IP-adresse, tidspunktet på dagen, data om brugerens enhed osv.) i beslutningen om adgang.</p>
   <p>Adgangskontrol er altid forretningstjenestens ansvar (herunder den dataansvarliges ansvar, hvis tjenesten giver adgang til personoplysninger), men dele af den kan udføres af hjælpefunktioner.</p>
   <h4 class="heading settled" data-level="3.3.6" id="forretningsfunktionen-forebyggelse-og-kontrol"><span class="secno">3.3.6. </span><span class="content">Forretningsfunktionen forebyggelse og kontrol</span><a class="self-link" href="#forretningsfunktionen-forebyggelse-og-kontrol"></a></h4>
    Forebyggelse af svindel og kontrol med brugeridentiteter er relevant i alle systemer, både i forretningstjenester og i tillidsstjenester. Aftaler om og standarder for kontrol og audits kan være beskrevet lovgivning, standarder (fx NSIS), vilkår, aftaler, regler i føderationers grundlag mv. 
   <p>Tillidstjenester indgår typisk som en del af sikkerheden i mange forretningstjenester, og skal have ekstra fokus på kontrol og forebyggelse.</p>
   <p>Staten har i december 2014 offentliggjort (og senere revideret) en strategi for cyber- og informationssikkerhed, som har til formål fremover at professionalisere statens arbejde med informationssikkerhed og øge samfundets robusthed mod cyberangreb. Strategien omfatter 27 konkrete initiativer, der skal bidrage til at øge informationssikkerheden og styrke beskyttelsen mod cyberangreb.</p>
   <p>Strategien sætter fokus på udfordringerne og skaber en klar retning for den fremadrettede indsats. Truslerne på cyber- og informationssikkerhedsområdet er dog en dynamisk størrelse, og der vil derfor løbende være fokus på effekten af de 27 initiativer.</p>
   <p>Strategien indeholder en lang række initiativer på tværs af seks indsatsområder:</p>
   <ol>
    <li data-md>
     <p>Professionalisering og styrket it-tilsyn</p>
    <li data-md>
     <p>Klare krav til leverandører</p>
    <li data-md>
     <p>Styrket cybersikkerhed og mere viden på området</p>
    <li data-md>
     <p>Robust infrastruktur i energisektoren og telesektoren</p>
    <li data-md>
     <p>Danmark som stærk international medspiller</p>
    <li data-md>
     <p>Stærk efterforskning og klar information til borgere, virksomheder og myndigheder.</p>
   </ol>
   <p>Med den stadigt stigende hackeraktivitet kloden over bliver arbejdet med at sikre kvaliteten af kontrol og forebyggelse af sikkerhedsbrud mere og mere vigtigt. Det skal ske i forbindelse med den registrering, autentifikation, billetudstedelse og adgangskontrol, der er kernen i brugerstyring. Dermed er det også et emne for informationssikkerhedspolitikken og dennes udmøntning i en tværgående fællesoffentlig føderation.</p>
   <p>Flere af de angreb mod organisationers it-infrastruktur som opleves, er rettet mod at forfalske identiteter, identifikationsmidler og adgangsbilletter, eller at give sig ud for at være den rette ihændehaver af identiteter, identifikationsmidler og adgangsbilletter. Det centrale i forhold til brugerstyring er derfor hurtigt at kunne reagere ud fra den mest aktuelle viden gennem sikkerhedsforanstaltninger. Andre angreb forsøger at begrænse tilgængeligheden gennem Distributed Denial of Service-angreb mod kritiske elementer i it-infrastrukturen, herunder fællesoffentlige identitetssystemer. Center for Cybersikkerhed udsender jævnligt en opdatering af det aktuelle trusselsbillede for cyberangreb.</p>
   <p>Til at styrke området har staten samlet kræfterne i Center for Cybersikkerhed (CFCS), og nogle private organisationer udstiller deres CERT eller CSIRT-funktion. Disse organisationer håndterer sikkerhedshændelser og arbejder på at forebygge sikkerhedshændelser:</p>
   <ul>
    <li data-md>
     <p>Netsikkerhedstjenesten i CFCS rummer statens Computer Emergency Response Team (CERT)</p>
    <li data-md>
     <p>NC3 er statens National Cyber Crime Center under Rigspolitiet</p>
    <li data-md>
     <p>DKCERT er Danmarks akademiske Computer Emergency Response Team under Danish e-Infrastructure Cooperation (DeIC), der overvåger netsikkerheden på forskningsnettet</p>
    <li data-md>
     <p>Finanssektoren har etableret en nordisk FinansCERT, der deler oplysninger om cybertrusler på tværs af de nordiske banker.</p>
    <li data-md>
     <p>Flere større virksomheder har deres eget computer security incident response team (CSIRT), et synonym for CERT.</p>
   </ul>
   <p>Der stilles desuden i højere grad krav om notifikation til relevante myndigheder i forbindelse med sikkerhedshændelser. Fx skal tillidstjenesteudbydere, jf. eIDAS, notificere Digitaliseringsstyrelsen, og i medfør af persondataforordningen (GDPR), skal dataansvarlig notificere Datatilsynet ved sikkerhedshændelser. Som led i et beredskab skal man således sikre sig, at man kan informere de rette myndighed inden for fastlagte tidsrammer.</p>
   <p>En af de forebyggende aktiviteter, en tjenesteudbyder kan udføre, er at sikre en solid logning af al aktivitet, og herefter kan en kontrol kontinuerligt monitorere for angrebsforsøg med automatiserede værktøjer suppleret med menneskelig, analytisk kapacitet. Et andet eksempel er anvendelsen af 'risk data' i MitID-løsningen, som ud fra en række data om brugerens udstyr, adfærd, geolokation, netværk og andet forsøger identificere risikofyldte transaktioner på tværs af tjenesteudbydere og brokere i infrastrukturen. Eksempelvis vil en bruger, der logger på fra to forskellige lande inden for et kort tidsrum, kunne give udslag i en høj riskoscore, som forretningstjenesten herefter kan reagere på.</p>
   <p>Et andet væsentligt element i sikkerheden er, at alle processerne i administration og vedligeholdelse af brugerstyring implementeres. Det gælder såvel identiteters karakteristika gennem brugeres livscyklus som tjenesters adgangsrettigheder, når tjenester videreudvikles. Undervejs i identiteters livscyklus sker der ændringer i registreringspraksis, i valg af anvendte identifikationsmidler og i beskrivelse af attributter, herunder roller og terminering af alle rettigheder for en bruger ved fx jobskifte, dødsfald og lign. I jo højere grad dette kan automatiseres, jo mere sikker er man på, at data ajourføres.</p>
   <h3 class="heading settled" data-level="3.4" id="forretningsmssige-arkitekturmnstre"><span class="secno">3.4. </span><span class="content">Forretningsmæssige arkitekturmønstre</span><a class="self-link" href="#forretningsmssige-arkitekturmnstre"></a></h3>
    De ovenfor beskrevne forretningsfunktioner kan udføres af forskellige parter (tillidstjenesteudbydere) i forskellige konstellationer med varierende kompleksitet. I simple scenarier kan alle funktionerne ligge inden for samme organisation, og tilliden følger af, at der er en fælles ledelse, mens der i komplekse scenarier kan være mange forskellige parter i spil i et økosystem, hvor der er brug for at håndtere tillidskæder i flere led, discovery og orkestrering af services mv. 
   <p>Dette giver anledning til en række forretningsarkitekturmønstre, som er temaet for dette afsnit. Der beskrives 5 mønstre i stigende kompleksitet. De første mønstre kan nærmest betegnes som ”anti-patterns”, da der en række udfordringer relateret til sammenhæng, brugervenlig, skalerbarhed og sikkerhed. Ikke desto mindre er de hyppigt forekommende (særligt i legacy-systemer), og det er derfor vigtigt at eksplicitere deres begrænsninger og vise, hvordan disse håndteres i de mere generelle mønstre.</p>
   <h4 class="heading settled" data-level="3.4.1" id="mnster-1forretningstjenester-med-egen-autentifikationstjenester"><span class="secno">3.4.1. </span><span class="content">Mønster 1:Forretningstjenester med egen autentifikationstjenester</span><a class="self-link" href="#mnster-1forretningstjenester-med-egen-autentifikationstjenester"></a></h4>
   <p>Dette mønster er karakteriseret ved en legacy forretningstjeneste (applikation) med sin egen applikationsspecifikke brugerdatabase, hvor alle brugere vedligeholdes både i forhold til identifikationsmidler (typisk brugernavn+kodeord) og i forhold til rettigheder.</p>
   <p>I dette (anti)mønster håndterer forretningstjenesten de fleste funktioner i brugerstyring selv herunder udstedelse af identifikationsmidler, autentifikation, vedligehold af brugerattributter og adgangskontrol. Tjenesteudbyder og brugerorganisation er med andre ord samme organisation, men det kan være forskellige organisatoriske enheder som er ansvarlighed for hhv. at forvalte applikationen og administrere brugerne. Tilliden mellem disse følger som oftest af, at der er en fælles ledelse.</p>
   <figure>
     <img src="Mønster 1.svg" width="85%"> 
    <figcaption>Mønster 1 - Forretningstjeneste med egne autentifikationstjenester</figcaption>
   </figure>
    <br> 
   <p>Der er en lang række udfordringer knyttet til dette mønster bl.a.:</p>
   <ul>
    <li data-md>
     <p>Brugerne får typisk tildelt et nyt brugernavn+kodeord, som ikke kan benyttes til andre applikationer - og med sin egen cyklus for fornyelse, password reset osv.. Dette leder til en usammenhængende brugeroplevelse.</p>
    <li data-md>
     <p>Brugeradministratorer får (endnu) et nyt administrationsinterface, hvor roller og rettigheder manuelt skal vedligeholdes med heraf følgende risiko for, at de ikke holdes ajour når en medarbejder stopper, skifter afdeling osv. Samtidig stiger administrationsbyrden uforholdsmæssigt med antallet af applikationer – eksempelvis er situationen uholdbar for organisationer med hundreder eller tusinder af applikationer, som ikke er unormalt i store organisationer.</p>
    <li data-md>
     <p>Alle brugere oprettes i samme brugerdatabase, hvilket er meget lidt skalérbart. Når en applikation skal udbredes fra én organisation til flere bryder arkitekturen ofte sammen, eller når applikationer fordrer samarbejde mellem flere organisationer.</p>
    <li data-md>
     <p>Forretningsapplikationer har typisk ikke fokus på sikkerhed eller har dette som kernekompetence. Fokus på at brugerne har adgang til funktionaliteten. Det er derfor ofte dyrt at opgradere sikkerheden fx med to-faktor autentifikation eller bedre overvågning, når det skal håndteres applikation for applikation.</p>
   </ul>
   <p>På baggrund af ovenstående kan mønstret ikke anbefales og må betragtes som et antimønster.</p>
   <h4 class="heading settled" data-level="3.4.2" id="mnster-2-delt-intern-autentifikationstjeneste"><span class="secno">3.4.2. </span><span class="content">Mønster 2: Delt, intern autentifikationstjeneste</span><a class="self-link" href="#mnster-2-delt-intern-autentifikationstjeneste"></a></h4>
    Dette mønster er karakteriseret ved, at en brugerorganisation har etableret et fælles directory (brugerkatalog og autentifikationstjeneste), som benyttes af flere interne applikationer – evt. med synkronisering mellem brugerkataloget og legacy applikationer (mønster 1), der ikke kan håndtere directories, via et IdM-system. Der er stadig tale om, at tjenesteudbyder og brugerorganisation er inden for samme organisation. 
   <figure>
     <img src="Mønster 2.svg" width="85%"> 
    <figcaption>Mønster 2 - Intern delt autentifikationstjeneste</figcaption>
   </figure>
    <br> 
   <p>I forhold til mønster 1 opnås der en række fordele:</p>
   <ul>
    <li data-md>
     <p>Brugerne skal kun vedligeholdes ét sted – i det fælles brugerkatalog.</p>
    <li data-md>
     <p>Brugerne kan med ét identifikationsmiddel tilgå alle applikationer, der anvender det fælles directory.</p>
   </ul>
   <p>Der er dog stadig nogle centrale begrænsninger i mønster 2:</p>
   <ul>
    <li data-md>
     <p>Mønstret skalerer stadig ikke til scenarier, hvor tjenesteudbyder og brugerorganisation ikke tilhører én og samme organisation. Der er stadig kun en autentifikationstjeneste og et administrationsinterface.</p>
    <li data-md>
     <p>Mønstret håndterer ikke scenarier med borgere som slutbrugere.</p>
    <li data-md>
     <p>Mønstret fordrer en homogenitet i de adgangspolitikker, der kan understøttes (typisk snævert baseret på attributter fx om medlemskab af grupper i brugerkataloget). Al viden om brugerne relevant for adgangskontrol skal således findes i brugerkataloget.</p>
    <li data-md>
     <p>Mulighederne for håndtering af forskellige identifikationsmidler og differentierede sikringsniveauer er typisk begrænset.</p>
   </ul>
   <p>På baggrund af ovenstående kan mønstret kun anbefales i mindre og strengt interne applikationer, hvor der ikke forventes interaktion med eksterne organisationer.</p>
   <h4 class="heading settled" data-level="3.4.3" id="mnster-3-national-fderation-med-central-autentifikationstjeneste"><span class="secno">3.4.3. </span><span class="content">Mønster 3: National føderation med central autentifikationstjeneste</span><a class="self-link" href="#mnster-3-national-fderation-med-central-autentifikationstjeneste"></a></h4>
    Dette mønster er det første, hvor bruger og tjenesteudbyder kan tilhøre forskellige organisationer, og der derfor er behov for mere eksplicit tillid, end når alle parter er under samme ledelse. Der er tale om en såkaldt ’3-corner model’, hvor brugeren har et identifikationsmiddel udstedt til en autentifikationstjeneste som tjenesteudbyderen kender og har tillid til – dvs. bruger og tjeneste har et fælles ’trust-anker’. Udstederen af identifikationsmidlet kan være sammenfaldende med udbyderen af autentifikationstjenesten (som det fx kendes fra NemID), men funktionerne kan også være adskilt. Det væsentlige er her, at forretningstjenesten stoler på autentifikationstjenesten. 
   <p>Mønstret er kendt fra NemLog-in, der som fællesoffentlig log-in tjeneste kan autentificere danske borgere og virksomheder til (stort set) alle offentlige tjenester med behov for sikker autentifikation – herunder alle tjenester på fx Borger.dk og Virk.dk. Som følge heraf betegnes dette også som ’den fællesoffentlige føderation’, og grundlaget for tillid i denne er National Standard for Identiteters Sikringsniveauer (NSIS) og i en vis udstrækning OCES certifikatpolitikkerne, der med krav til sikkerhed, revision og andet sætter et veldefineret kvalitetsniveau.</p>
   <figure>
     <img src="Mønster 3.svg" width="85%"> 
    <figcaption>Mønster 3 - National autentifikationstjeneste</figcaption>
   </figure>
    <br> 
   <p>Fordele:</p>
   <ul>
    <li data-md>
     <p>Forretningstjenesterne afkobles teknisk fra at kende til detaljerne i validering af brugernes identifikationsmidler, idet dette sker i autentifikationstjenesten. Med et fælles tillidsrammeværk (som fx NSIS) kan autentifikationstjenesten blot oplyse det opnåede sikringsniveau til forretningstjenesten, som herefter kan reagere på dette i henhold til sin adgangspolitik. Dette gør det let at indføre nye identifikationsmidler eller ændre på eksisterende uden at påvirke forretningstjenesterne, og generelt giver afkoblingen en fleksibilitet i arkitekturen, som i praksis er meget værdifuld.</p>
    <li data-md>
     <p>Mønstret kan skalere til nationalt plan og understøtte forretningstjenester, der skal tilgås af samtlige borgere eller samtlige virksomheder i landet. Dette skyldes bl.a., at
de centrale autentikationstjenester i Danmark etableres og finansieres fællesoffentligt og dermed får national udbredelse. I mange andre lande er situationen langt mere broget med en række overlappende autentifikationstjenester og som følge deraf en mere kompleks arkitektur (se fx mønster 5).</p>
    <li data-md>
     <p>Autentifikationstjenesten er enkel at udvide med attributbeskrivelse (fx roller, rettigheder, fuldmagter) og kan dermed give ekstra funktionalitet til samtlige, tilsluttede tjenester.</p>
   </ul>
   <h4 class="heading settled" data-level="3.4.4" id="mnster-4-flles-domnebroker-for-decentrale-autentifikationstjenester"><span class="secno">3.4.4. </span><span class="content">Mønster 4: Fælles domænebroker for decentrale autentifikationstjenester</span><a class="self-link" href="#mnster-4-flles-domnebroker-for-decentrale-autentifikationstjenester"></a></h4>
    Et andet velkendt mønster (særligt for medarbejderidentiteter) optræder, når alle forretningstjenester anvender en fælles autentifikationstjeneste, der agerer som broker for et antal bagvedliggende og decentrale autentifikationstjenester (IdP’er) inden for et bestemt domæne. Dette betegnes ofte som en ’hub-and-spoke’ føderation og er naturligt, når brugerorganisationer ønsker (og er i stand til) at agere som autentifikationstjeneste for egne medarbejdere. 
   <p>Mønstret anvendes bl.a. i den fælleskommunale infrastruktur etableret af KOMBIT, hvor en såkaldt ContextHandler agerer som central broker/hub, og hvor hver kommune udstiller en autentifikationstjeneste (kaldet IdP) for egne medarbejdere. Mønstret er ligeledes kendt fra WAYF-føderationen på forsknings- og uddannelsesområdet, hvor den enkelte institution er IdP for egne medarbejdere/studerende.</p>
   <figure>
     <img src="Mønster 4.svg" width="85%"> 
    <figcaption>Mønster 4 - Fælles broker for decentrale autentifikationstjenester</figcaption>
   </figure>
    <br> 
   <p>Fordele:</p>
   <ul>
    <li data-md>
     <p>Der er kun ét integrationspunkt for forretningstjenester og ét integrationspunkt for en brugerorganisation med egen IdP, hvilket gør det enkelt at tilslutte sig føderationen og samtidig opnå adgang til et stort økosystem.</p>
    <li data-md>
     <p>Brugere i en brugerorganisation kan genbruge et lokalt log-in både til interne tjenester og til eksterne tjenester – og endda opnå single sign-on på tværs af disse.</p>
    <li data-md>
     <p>Brokeren kan indkapsle variationer i lokale IdP’er, så de er usynlige for tjenesterne – fx ved at foretage protokoltransformation, attributomveksling og berigelse af tokens.</p>
    <li data-md>
     <p>Den centrale hub giver ofte mulighed for stærk governance herunder fastlæggelse af attributter, protokoller mv. der kan give en stor homogenitet og et økosystem med rige tjenester. Som eksempel kan nævnes, at både det kommunale domæne og sundhedsområdet har defineret egne attributprofiler, som beskriver særlige karakteristika ved domænet: på sundhedsområdet er det fx attributter vedr. sundhedsfaglige autorisationer og på det kommunale område er det anvendelse af kommunale emnesystematik (KLE), der er en taksonomi til at beskrive kommunale fagområder.</p>
   </ul>
   <p>Ulemper:</p>
   <ul>
    <li data-md>
     <p>Mønstret er begrænset til situationer, hvor alle relevante tjenester for brugerne er koblet til samme ’hub’. Anvendelsen er derfor ofte begrænset til specifikke domæner – som fx det kommunale område. Hvis man skal på tværs af domæner / føderationer er det i stedet relevant at anvende mønster 5.</p>
    <li data-md>
     <p>Brugerne kan komme ud for at skulle angive deres lokale IdP i en liste blandt mange (såkaldt home realm discovery) første gang de logger på, således at brokeren kan finde ud af, hvilken lokal IdP der skal anvendes til autentifikation.</p>
   </ul>
   <p>Variationer over mønstret kan optræde ved at attributbeskrivelser kobles på forskellige steder i tillidskæden.</p>
   <h4 class="heading settled" data-level="3.4.5" id="mnster-5-interfderation-mellem-domner"><span class="secno">3.4.5. </span><span class="content">Mønster 5: Interføderation mellem domæner</span><a class="self-link" href="#mnster-5-interfderation-mellem-domner"></a></h4>
    Det femte og sidste mønster er karakteriseret ved, at brugerorganisation og forretningstjeneste er koblet til hver deres broker/føderation (som beskrevet i mønster 4) hørende til hver deres domæne. Der er med andre ord tale om interføderation mellem to domæner. Brugerorganisation og forretningstjeneste forbindes således via de to brokere, der på ’bagsiden’ forbinder og oversætter mod deres eget domæne. Mønstret er uden for brugerstyringsverdenen kendt som en ’four-corner’ modellen og anvendes grundet sin skalérbarhed i en lang række store infrastrukturer som fx OpenPEPPOL, ved indløsning af kreditkort mv. 
   <p>Inden for brugerstyring er mønstret bl.a. kendt fra eIDAS-føderationen, der har til formål at gøre det muligt at foretage autentikation på tværs af landegrænser i EU. Her etablerer hvert land en såkaldt ’eID-gateway’, der dels er broker og opkoblingspunkt for nationale autentifikationstjenester og dels broker for nationale forretningstjenester. Herved kan en bruger med et identifikationsmiddel fra ét EU-land autentificere sig over for tilsluttede tjenester i alle andre EU-lande (forudsat identifikationsmidlet klassificeret på det nødvendige sikringsniveau).</p>
   <p>Mønstret kendes også på nationalt niveau, når eksempelvis en kommunal bruger via den kommunale ContextHandler tilgår en national sundhedstjeneste udstillet gennem sundhedsområdets broker (SEB). Her etableres forbindelsen således mellem brokere fra to forskellige domæner.</p>
   <figure>
     <img src="Mønster 5.svg" width="85%"> 
    <figcaption>Mønster 5 - Interføderation mellem domæner</figcaption>
   </figure>
    <br> 
   <p>Fordel:</p>
   <ul>
    <li data-md>
     <p>Mønstret kan håndtere store føderationer uden centrale ankre. Der er mao. stor skalérbarhed.</p>
    <li data-md>
     <p>Brokerne håndterer kompleksiteten i infrastrukturen for forretningstjenesten og brugerorganisationen.</p>
   </ul>
   <p>Ulemper:</p>
   <ul>
    <li data-md>
     <p>Der kan være stor kompleksitet med flere lag af discovery.</p>
    <li data-md>
     <p>Governance er typisk noget svagere på tværs af føderationer og domæner.</p>
    <li data-md>
     <p>Det fælles forståede attributsæt er typisk mere begrænset, når tillidskæden er lang:</p>
    <li data-md>
     <p>Dette er fx en kendt udfordring i eIDAS føderationen, hvor det garanterede minimumsæt af attributter for en fysisk person på tværs af EU er meget fattigt og kun rummer navn, fødselsdato, og en unik ID (ikke meningsbærende).  Det er således en udfordring for mange forretningstjenester at levere en meningsfuld tjeneste til brugerne baseret på dette attributsæt, enten fordi der ikke kan laves et sikkert match til en lokal repræsentation af brugeren, eller fordi en tjeneste er konstrueret til at kræve flere oplysninger som fx et dansk CPR-nummer.</p>
    <li data-md>
     <p>Et mere simpelt eksempel på dette er, at tjenester på sundhedsområdet som regel kræver CPR nummer for brugeren, da sundhedsfaglige autorisationer er knyttet til dette, mens det i den kommunale verden ikke er sædvanligt at benytte CPR numre som grundlag for brugerstyring. Dette betyder konkret, at der er behov for ekstra opslag og omvekslinger, når en kommunal bruger skal tilgå en tjeneste under sundhedsdomænet.</p>
   </ul>
   <h3 class="heading settled" data-level="3.5" id="tillidskder-i-kosystemer"><span class="secno">3.5. </span><span class="content">Tillidskæder i økosystemer</span><a class="self-link" href="#tillidskder-i-kosystemer"></a></h3>
    I et sammenhængende, skalérbart og sikkert økosystem af tillidstjenester og forretningstjenester, skal mange aktører kunne arbejde sammen i en orkestrering af de forskellige services. Med henblik på at der kan ske en sådan specialisering og arbejdsdeling, er der behov for regler og aftaler, der gør, at aktørerne kan have tillid til hinanden. De aktører, som indgår i et tillidsforhold, udgør <strong>en føderation,</strong> som bygger bl.a. på et trust framework som fx NSIS, eIDAS eller aftaler i et domæne. 
   <p>Nedenstående tegning i figur 4 illustrerer den kæde af tillid, der kan optræder mellem tillidstjenester og forretningstjenester i et komplekst scenarie. Denne kæde skal være identificeret og beskrevet i en føderation, hvor der kan være en række tillidstjenester involveret i føderationen. Man skal her være eksplicit om, hvilket sikringsniveau de enkelte tjenester opererer på, for det vil være det laveste sikringsniveau i hele kæden, der er bestemmende for det samlede sikringsniveau. For enkelhed i illustrationen er der her tegnet en føderation med kun én af hver tillidstjeneste repræsenteret.</p>
   <figure>
     <img src="billede4.PNG"> 
    <figcaption>Kæde af tillid i et tjenestekald</figcaption>
   </figure>
   <ul>
    <li data-md>
     <p>Tjenesteudbyderen af forretningstjenesten skal have tillid til, at adgangskontrollen (engelsk: Policy Enforcement Point, PEP) kun viderestiller identiteter, hvis adgangsbillet matcher adgangspolitikken for forretningstjenesten. Tjenesteudbyderen varetager som hovedregel selv adgangskontrollen, men denne funktion kan varetages af en ekstern tjeneste.</p>
    <li data-md>
     <p>Adgangskontrollen bygger på tillid til, at den adgangsbillet en broker har udstedt, indeholder korrekte attributter og er sket på baggrund af en gyldig autentifikation.</p>
    <li data-md>
     <p>Brokeren har tillid til, at autentifikationstjenesten på en sikker måde har kunnet fastslå brugerens identitet (autentificere vedkommende).</p>
    <li data-md>
     <p>Autentifikationstjenesten har tillid til, at udstederen af identifikationsmidlet, der har tilknyttet og udstedt identifikationsmidlet, har gjort det til de rette entiteter, nemlig de samme entiteter, som registreringstjenesten (eng: Registration Authority, RA) har identificeret og registreret identiteten på.</p>
    <li data-md>
     <p>I den udstrækning, som tjenesteudbyderen, adgangskontrollen, brokeren eller autentifikationstjenesten anvender et eller flere attributsæt, skal disse have tillid til de attributtjenester, som de anvender.</p>
    <li data-md>
     <p>Attributtjenester skal have tillid til, at den der har tilknyttet og udstedt akkreditiverne, har gjort det til de rette entiteter, nemlig de samme entiteter som registreringstjenesten har identificeret og registreret identiteten på.</p>
    <li data-md>
     <p>Udstederen af elektroniske identifikationsmidler har tillid til de identifikationsbeviser (fx pas, kørekort) og grunddata, som udstedelsesprocessen er baseret på.</p>
    <li data-md>
     <p>Hele vejen gennem kæden skal der være tillid til de billetter (eng. <em>security token</em>), der udstedes af autentifikationstjenesten og beriges af brokere, og som benyttes som billet med tidsbegrænset gyldighed til en eller flere tjenester – også når adgangsbilletter omveksles ved overgang mellem sektorer.</p>
   </ul>
   <p>Så længe alle tjenester i tillidskæden ligger inden for egen organisation, kan organisationens egen governance sikre tillidskæden. Når en organisation vælger at basere sig på eksterne tillidstjenester, forudsætter det, at tillid er etableret gennem et trust framework omfattende bl.a. aftaler og standarder.</p>
   <p>I en føderation mellem en række sektorer, der hver har deres sikkerhedsdomæner, skal tilliden udvides til at omfatte komponenter som autentifikationstjenester, attributtjenester og billettjenester fra alle involverede sektorer hos alle deltagere i føderationen. Desuden er det centralt at fastlægge de kombinationer af tillidstjenester, der giver et konkret sikringsniveau, og som alle i føderationen har tillid til. Det er nødvendigt helt specifikt at beskrive den datastrøm gennem tjenesterne, der giver et bestemt sikringsniveau.</p>
   <h4 class="heading settled" data-level="3.5.1" id="tillid-gennem-nsis"><span class="secno">3.5.1. </span><span class="content">Tillid gennem NSIS</span><a class="self-link" href="#tillid-gennem-nsis"></a></h4>
    I National Standard for Identiteters Sikringsniveauer (NSIS) skal elektroniske identifikationsordninger (udstedere af identifikationsmidler) og identitetsbrokere anmeldes til Digitaliseringsstyrelsen, før de må benytte NSIS, herunder påstemple NSIS sikringsniveauer på en brugerautentifikation. Kravene til dokumentation for compliance stiger gennem sikringsniveauerne: 
   <ul>
    <li data-md>
     <p>På niveau Lav kan man benytte ‘selvdeklarering’, hvor anmelder selv indestår for opfyldelse af krav.</p>
    <li data-md>
     <p>På niveau Betydelig og Høj skal der vedlægges en ISAE 3000 revisionserklæring fra en uafhængig, statsautoriseret revisor. Erklæringens formål er at konkludere, hvorvidt en anmelder samlet set har etableret alle relevante kontroller og procedurer for sin løsning.</p>
   </ul>
   <p>Revisionen er dermed en tillidsskabende foranstaltning, som gentages årligt, og derudover skal der afgives en ledelseserklæring første gang ved anmeldelsen.</p>
   <p>Digitaliseringsstyrelsen gennemgår anmeldelsen og publicerer herefter denne på sin hjemmeside med angivelse af anmeldt sikringsniveau. Styrelsen er kun forpligtet til at kontrollere formalia, idet revisor skal verificere implementeringen. Digitaliseringsstyrelsen kan desuden afmelde en ID-tjeneste, som ikke lever op til kravene.</p>
   <p>NSIS stiller ikke krav til forretningstjenesten med stiller sikringsniveauerne til rådighed for deres adgangspolitikker og -kontroller. Det anbefales at forretningstjenester på baggrund af en risikovurdering fastlægger hvilket sikringsniveau, der som minimum kræves for at få adgang til tjenesten.</p>
   <hr>
   <h3 class="heading settled" data-level="3.6" id="forretningsroller-og-aktrer"><span class="secno">3.6. </span><span class="content">Forretningsroller og aktører</span><a class="self-link" href="#forretningsroller-og-aktrer"></a></h3>
   <p>[Hvem kan spille hvad....]</p>
   <h3 class="heading settled" data-level="3.7" id="forretningsobjekter-og-begreber-madsh"><span class="secno">3.7. </span><span class="content">Forretningsobjekter og begreber [madsh]</span><a class="self-link" href="#forretningsobjekter-og-begreber-madsh"></a></h3>
    [samle til et afsnit] 
   <p>I dette afsnit beskrives en terminologi og begrebsmodel for brugerstyring. Begrebsmodellen er på et generelt og overordnet konceptuelt niveau. Dvs. at den ikke er bundet til en bestemt type person, organisation, anvendelse eller implementering. Begrebsmodellen kan således danne udgangspunkt for flere forskellige implementeringer</p>
   <blockquote>
    <p>!<a href="logo.png"></a> Begrebsmodellen SKAL anvendes i fællesoffentlige løsninger, i løsninger, der kommunikerer mellem offentlige sektorer, og i tjenester, der anvender fællesoffentlige løsninger.
Begrebsmodellen KAN efterkommes af løsninger i offentlige sektorer.
Bruger man andre termer for begreberne inden for sin egen sektor, SKAL man kunne oversætte eller transformere disse entydigt til de autoritative termer, når man kommunikerer verbalt eller digitalt på tværs af offentlige sektorer. Dette vil sikre bedre forståelse og kommunikation mellem forskellige sektorer om brugerstyring uden at fratage dem retten til at beholde egne velfungerende termer.</p>
   </blockquote>
   <hr>
   <p>I denne liste gives kun definitioner for de begreber, som referencearkitekturen for brugerstyring autoritativt definerer, og som er markeret på figur 6 (nedenfor) med røde rammer.</p>
   <p>| <em>Begreb</em> | Definition | Eksempler|
|---       |---         |---   |
| Entitet  | Noget værende, der kan have en identitet. | En person (borger, medarbejder), organisation (myndighed, virksomhed, forening), ting (sensor, apparat) eller tjeneste (system, app, applikation, paskontor). |
| Identitet | En digital persona repræsenteret ved et sæt af attributter. En entitet kan have mere end en identitet. | Den repræsentation i et sæt attributter, som man giver en entitet gennem brugerstyring, er målrettet de tjenester, som entiteten skal have adgang til. |
| Akkreditiv | Et elektronisk eller fysisk objekt/genstand, der kan anvendes til at gennemføre en autentifikation af en identitet. Også benævnt elektronisk identifikationsmiddel. | Et akkreditiv kan være et brugernavn, et brugernavn og password, en PIN-kode, et SmartCard, et certifikat, et (hardware) token, et fingeraftryk, et pas osv. Akkreditivet udstedes af en akkreditivtjeneste på baggrund af den foregående registrering af et eID. Akkreditivet kan også karakteriseres ved sikringsniveauer. |
| Attribut | Karakteristika eller egenskaber ved en entitet. På engelsk betegnes attributter som <em>claims</em>. | Navn, adresse, køn, alder, UUID, PID, CPR-nummer, CVR-nummer, EAN nummer, Serienummer, URL, titel, uddannelse, kompetencer, ansvarsområde, specifik funktion, rolle, specifik kvalitet, specifik information osv. Når man vil tilgå en tjeneste, samler man de attributter tilhørende den elektroniske identitet, som tjenestens adgangspolitik kræver for at give adgang, og udsteder en adgangsbillet. Attributter kan vedligeholdes i kataloger som fx LDAP og AD. De kan også vedligeholdes af en attributtjeneste eller tildeles af en akkreditivtjeneste, samtidig med at der udstedes et akkreditiv.  |
| Adgangsbillet | Et elektronisk objekt, der beskriver attributter vedr. en identitet og er udstedt af en betroet tjeneste (identitetsbroker eller login-tjeneste). En adgangsbillet betegnes på engelsk som <em>security token</em>. | For at opfylde adgangspolitikken for en tjeneste, skal der indhentes en eller flere adgangsbilletter hos brugerstyringstjenester, som tjenesten har tillid til. Dette foretages af en billettjeneste, der kan være en simpel funktion til håndtering af et login, der håndteres af autentifikationstjenesten, eller billetudstedelsen kan foretages af en identitetsbroker. Denne kan, baseret på en autentifikationstjenestes verificering af et akkreditiv, indsamle attributter fra flere attributtjenester, og identitetsbrokeren kan også omveksle attributter med samme betydning og sikringsniveau fra et protokolformat til et andet. Eksempelvis kan en borger få en SAML assertion (token) udstedt hos NemLog-in, der indeholder brugerens CPR-nummer, hvorefter borgeren kan få adgang til eksempelvis SKAT’s Tast Selv Borger-løsning. Her virker NemLog-in som en identitetsbroker. Et andet eksempel er en Kerberos Server, der udsteder ”tickets”, som giver brugere adgang til servere i et sikkerhedsdomæne (fx Active Directory). |
| Adgangspolitik | En adgangspolitik beskriver betingelserne for at udføre en eller flere funktioner eller give adgang til alle informationer (data) eller en afgrænset mængde af informationer (data) i en tjeneste. | En adgangspolitik for en tjeneste fastlægges af tjenesteudbyder, baseret på tjenesteudbyderens informationssikkerhedspolitik. En adgangspolitik har to repræsentationer: -En repræsentation i almindelig tekst beregnet på personer, der informerer om, hvilke attributter en identitet skal møde op med for at kunne få adgang til hvilke funktioner og informationer. -En repræsentation i struktureret format, der kan læses maskinelt af en tjeneste, der undersøger betingelserne til at få adgang til funktioner og informationer. Når en identitet møder op med en adgangsbillet, anvendes adgangspolitikken til at afgøre, om en identitet må udføre en specifik handling på et objekt, herunder hvilke specifikke data entiteten må få adgang til. Hvis ikke identitetens adgangsbillet indeholder attributter, der modsvarer, hvad adgangspolitikken kræver, giver adgangskontrollen ikke adgang. |</p>
   <p>Der henvises i øvrigt til NSIS for en mere detaljeret gennemgang af begreber relateret til brugerstyring.</p>
   <p>Begrebsmodellen illustrerer begrebernes relationer til hinanden. De røde begreber er referencearkitekturens kernebegreber og defineres af denne. De anvendes  til at identificere og beskrive de centrale tjenester og roller, som er relevante i referencearkitekturen. De blå begreber er i princippet eksterne i forhold til referencearkitekturen. De er med som (udvalgte eksempler på) støttebegreber, der viser kontekst, relaterer til kernebegreberne og kan bruges til at pege på væsentlige støttetjenester.</p>
   <figure>
     <img src="billede6.PNG"> 
    <figcaption>Begrebsmodel for brugerstyring</figcaption>
   </figure>
    [Den er vist helt gal... De skal ikke beskrives som en relation i en bregebsmodel, men som en aktivitet i en process] 
   <p>| Relation | Definition |
|---       |---         |
| En entitet registres med en eller flere identiteter. | En identitet fastlægges og valideres af en registreringstjeneste  |
| En entitet får tildelt et eller flere akkreditiver knyttet til identiteter.| En akkreditivtjeneste udstyrer entiteten med fysiske eller digitale objekter (pas, kørekort, brugernavn-kodeord, NemID), der kan autentificere identiteten over for den tjeneste, der forestår autentifikationen. |
| En identitet kan associeres med (knyttes til) flere akkreditiver, og et akkreditiv kan associeres med flere identiteter. | Ved at koble identitet og akkreditiver løst kan identiteten være vedvarende over tid med mulighed for at skifte akkreditiv. Det giver også mulighed for, at brugeren kan indrullere flere akkreditiver som supplement til et udleveret akkreditiv (fx indrullere fingeraftryk). |
| En identitet associeres med en eller flere attributter (claims) og en attribut kan associeres med flere identiteter. | En identitet tilknyttes attributter, der karakteriserer den specifikke identitet, til brug for en tjenestes vurdering af, om tjenesten kan give denne identitet adgang. Et givet antal attributter hos en identitet skal matche adgangspolitikken hos tjenesten, for at tjenesten giver identiteten adgang. |
| En adgangsbillet indeholder et eller flere sæt attributter.  | En anmodning om adgang behandles af login-tjeneste eller identitetsbroker, som udsteder en adgangsbillet med en eller flere attributter, der beskriver identiteten.   |
| En adgangsbillet matches med en adgangspolitik. | Adgang gives af en tjeneste på grundlag af de attributter, der fremgår af adgangsbilletten, samt et tillidsforhold til den tjeneste, som har udstedt billetten. Adgangskontrollen følger tjenesteudbyderens vedtagne adgangspolitik for den pågældende tjeneste.  |
| En tjeneste har en adgangspolitik.  | En tjenesteudbyders tjeneste stiller funktionalitet og informationer (data) til rådighed, som er underlagt en adgangspolitik, der specificerer, hvilke attributter identiteten skal demonstrere for at få adgang til specifikke funktioner og informationer. Denne adgangspolitik fastlægger niveauet for funktionaliteters og informationers (datas) tilgængelighed og beskyttelse, herunder de sikringsniveau for identitet og akkreditiver, som tjenesten accepterer, og den kvalitet i attributter den forventer. |</p>
   <p>Afsnit 12: Bilag C giver en begrundelse for valget af denne begrebsmodel</p>
   <hr>
   <p>Brugerstyring foregår i en kontekst, og for referencearkitekturen er der dele af denne kontekst, som det er særlig vigtigt at være opmærksom på. Den ene er informationssikkerhedspolitikken og registrering af sikkerhedshændelser, mens den anden er, hvilke konkrete former som identiteter i en brugerstyring optræder med. Kontekstens begreber er markeret med blåt og vil være defineret i andre referencearkitekturer eller standarder.</p>
   <figure>
     <img src="billede7.PNG"> 
    <figcaption>Konteksten for begrebsmodellen for brugerstyring</figcaption>
   </figure>
   <p>For denne kontekst beskrives relationerne til begrebsmodellen for brugerstyring.</p>
   <p>| Relation  | Definition  |
|---        |----         |
| En entitet kan være en person, en organisation, en ting eller en tjeneste. | Siden er der udviklet en dansk standard for fysiske personer, juridiske enheder og erhvervsidentiteter (se NSIS), der bygger på eIDAS, og identiteter efter eIDAS skal overholdes af alle EU-lande. Dette rammeværk er endnu ikke udviklet for ting eller tjenester. En tjeneste, der optræder som entitet, kaldes en tjenestekonsument. |
| En informationssikkerhedspolitik påvirker identitet og dens tilhørende akkreditiver og attributter. | Politikkens retningslinjer, forretningsgange og instrukser og sikkerhedsforanstaltninger påtrykkes den konkrete specifikation af identitet, akkreditiv og attributter, således at sikkerhedshændelser forebygges.  |
| En informationssikkerhedspolitik påvirker hvilken adgangspolitik, der kan lægges for en tjeneste. | Det er gennem anvendelse af informationssikkerhedspolitikken og tilhørende risikovurderinger, at en adgangspolitik kan fastlægges. En risikovurdering kan fx klarlægge, hvilket NSIS sikringsniveau, der kræves for en autentificeret bruger for at få adgang. |
| Log af sikkerhedshændelser foretages hver gang, der forsøges at forfalske autentifikation eller omgå adgangskontrol.                      | Alle begrebers repræsentationer i data fra og med identitet til og med tjeneste kan blive kompromitteret. En log registrerer alle trin i behandling af en identitets anmodning om en adgang.  |
| Flere logs knyttes til et spor af en sikkerhedshændelse  | Gennem statistisk og algoritmisk behandling findes mønstre i logs af sikkerhedshændelser, der giver et spor.  |
| En sikkerhedshændelse kan ske ved angreb på eller forvanskning af identitet, akkreditiv, attributsæt, adgangsbillet eller adgangskontrol. | Alle muligheder udnyttes af fjendtligtsindede. Overvåges og håndteres af organisationers Cyber Emergency Response Team (CERT), som for staten er placeret i Center for Cybersikkerhed.  |
| En sikkerhedshændelse knyttes til en sikkerhedstype.  | En gruppering af sikkerhedshændelser  |</p>
   <h2 class="heading settled" data-level="4" id="teknisk-arkitektur"><span class="secno">4. </span><span class="content">Teknisk arkitektur</span><a class="self-link" href="#teknisk-arkitektur"></a></h2>
    I dette afsnit beskrives de byggeblokke, der skal være til stede for at kunne realisere de løsninger, der lægges op til med referencearkitekturen. Referencearkitekturen begrænser sig til at definere de tjenester, som forvalter referencearkitekturens begreber. Disse tjenester er markeret medrøde rammer nedenfor 
   <p>De forretningsbehov der er beskrevet i afsnit <strong>Fejl! Henvisningskilde ikke fundet.,</strong> og ovenstående principper peger entydigt frem mod en løst koblet, fødereret arkitektur. Her vil de enkelte tjenester/tjenesteudbydere håndhæve adgang baseret på forudgående (ekstern) registrering, attributbeskrivelse, autentifikation og billetudstedelse. Således vil de ikke selv skulle håndtere en registreringstjeneste, en attributtjeneste, en autentifikationstjeneste og en billettjeneste. Der er derfor valgt en token-baseret model for adgangsstyring.</p>
   <p>[Måske er der en princip mere her... Token baseret? /madsh]</p>
   <p>Denne indebærer, at en autentificeret identitet får udstedt en adgangsbillet (et såkaldt Security Token) af en betroet komponent i infrastrukturen, der fx kan være en autentifikationstjeneste eller identitetsbroker. Adgangsbilletten præsenteres herefter over for den tjeneste, som leverer data eller funktionalitet, der ønskes adgang til. En adgangsbillet indeholder information om identitetens karakteristika og egenskaber i form af attributter og skal være digitalt signeret af den betroede udsteder, så den ikke kan forfalskes eller manipuleres. Valget af den token-baserede fødererede model er i tråd med alle nyere løsninger og planlagte initiativer i de forskellige sektorer i Danmark såvel som internationalt. Fællesoffentlige løsninger inden for brugerstyring er baseret på en model og standarder, der understøtter den, herunder OIOSAML-standarden. Således benytter eksempelvis NemLog-in, grunddataprogrammet, Borger.dk, Virk.dk, Danmarks miljøportal, den fælleskommunale rammearkitektur og sundhedsområdet alle en token-baseret model.</p>
   <blockquote>
    <p>!<a href="logo.png"></a> Opbygning af brugerstyring med byggeblokkene Registrering af elektronisk identitet, Akkreditivtilknytning, Attributbeskrivelse, Autentifikation, Billetudstedelse og Adgangskontrol BØR efterkommes i fællesoffentlige løsninger, i tværoffentlige brugerstyringsløsninger og i tjenester, der anvender disse.
Dette afsnit KAN efterkommes af andre løsninger i offentlige sektorer.</p>
   </blockquote>
   <hr>
   <figure>
     <img src="billede10.PNG"> 
    <figcaption>Byggeblokke i konteksten for brugerstyring</figcaption>
   </figure>
   <p>Byggeblokke i konteksten for brugerstyring er genstand for andre referencearkitekturer og standarder, så vi henviser til disse beskrivelser:</p>
   <ul>
    <li data-md>
     <p><em>Informationssikkerhedspolitik</em> er beskrevet i ISO/IEC 27001, og der er vejledninger på Digitaliseringsstyrelsens hjemmeside.</p>
    <li data-md>
     <p><em>Kontrol og forebyggelse</em> koordineres af Center for Cybersikkerhed, der udgiver vejledninger og jævnligt opdaterer trusselsbilleder.</p>
    <li data-md>
     <p><em>Organisation:</em> OIO Organisation er den fællesoffentlige standard for Organisation. Denne forventes revideret som led i digitaliseringsstrategien 2017-2020.</p>
    <li data-md>
     <p><em>Person:</em> Her er CPR-version 1.1.0 den seneste fællesoffentlige standard.</p>
   </ul>
   <p>[Se anvendelse af blå og røde byggeblokke i 'deling af data og dokumenter']</p>
   <h3 class="heading settled" data-level="4.1" id="ndvendige-applikationsservices"><span class="secno">4.1. </span><span class="content">Nødvendige applikationsservices</span><a class="self-link" href="#ndvendige-applikationsservices"></a></h3>
   <h4 class="heading settled" data-level="4.1.1" id="akkreditivtjeneste"><span class="secno">4.1.1. </span><span class="content">Akkreditivtjeneste</span><a class="self-link" href="#akkreditivtjeneste"></a></h4>
    [Er det en specialisering af <a class="property" data-link-type="propdesc">registrering</a> /madsh]
Gennem byggeblokken ”Akkreditivtjeneste” skabes en relation mellem en identitet og et akkreditiv, som garanterer nogle centrale karakteristika ved denne identitet, som udstederen af akkreditiver står inde for. 
   <p>Det mest simple og udbredte akkreditiv er et kodeord knyttet til et navn, der repræsenterer identiteten. Et andet eksempel er NemID og den kommende MitID løsning.</p>
   <p>Akkreditivtjenesten skaber i nogle tilfælde alene en tilknytning mellem en repræsentation af en identitet og et allerede eksisterende akkreditiv, mens der i andre tilfælde udstedes et nyt akkreditiv, som knyttes til identiteten. Nogle akkreditivtjenester tilføjer også flere beskrivende attributter til identiteten.</p>
   <p>Akkreditivtjenesten har et vedligeholdelsesansvar for akkreditivets livscyklus, idet akkreditiver kan have en tidsbegrænset varighed og kan blive kompromitteret. NSIS standarden stiller en række til håndtering og udstedelse af akkreditiver møntet på de forskellige faser af akkreditivets livscyklus.</p>
   <h4 class="heading settled" data-level="4.1.2" id="attributbeskrivelse"><span class="secno">4.1.2. </span><span class="content">Attributbeskrivelse</span><a class="self-link" href="#attributbeskrivelse"></a></h4>
    [Er det en specialisering af <a class="property" data-link-type="propdesc">registrering</a> /madsh]
I forbindelse med registrering og oprettelse af den elektroniske identitet vil der typisk blive registreret en række beskrivende attributter. Attributterne beskriver identiteten, f.eks. med identifikatorer (UUID, CPR eller brugernavn), navne, højde, øjenfarve eller andet. Der kan dog også registreres andre typer attributter, der i sidste ende kan være adgangsgivende ift. tjenester, f.eks. den eller de arbejdsfunktioner, som ledelsen i en virksomhed ønske at personen skal kunne optræde i, eller attributter vedrørende roller, bemyndigelser eller andet. Tilknytning af attributter til en elektronisk identitet kaldes i denne referencearkitektur for <em>attributbeskrivelse.</em> 
   <p>Der kan være mange, der knytter attributter til identiteter. Nogle vil, som ovenfor nævnt, typisk blive tilknyttet i forbindelse med registrering og oprettelse af den elektroniske identitet, mens andre kan komme til i senere processer, hvor f.eks. brugeradministratorer tildeler ’roller’, vedligeholder eksisterende attributter eller tilføjer nye attributter.</p>
   <p>Indgår man i en føderation, kan der fastlægges attributter, som er særlig vigtige for samspil mellem føderationens deltagere, og derfor tildeles af en attributtjeneste anerkendt inden for føderationen. Det samme kan gælde, hvis man ønsker, at roller skal håndteres ens på tværs af en føderations deltagere. Inden for sundhedsområdet er det fx vigtigt, at visse roller – og dermed attributter – håndteres ens på tværs af sundhedsaktører, der skal samarbejde om behandlingen af patienter.</p>
   <p>Enheder, der leverer attributbeskrivelser, skal vælges og håndteres med en omhu, der afspejler det sikringsniveau, som man ønsker, at attributterne skal matche. På sundhedsområdet er det meget veldefineret, hvilken myndighed der må koble en persons identitet til forskellige autorisationer til at udføre sygepleje og lægebehandling. I andre sammenhænge kan man lade en virksomhed beskrive de roller, som man som samarbejdspartner kan optræde i.</p>
   <h4 class="heading settled" data-level="4.1.3" id="authentifikation-genkendelse"><span class="secno">4.1.3. </span><span class="content">Authentifikation (genkendelse?)</span><a class="self-link" href="#authentifikation-genkendelse"></a></h4>
    [Er det en specialisering af <a class="property" data-link-type="propdesc">opslag</a>? /madsh] 
   <p>Byggeblokken ”Autentifikation” er den tjeneste, der validerer en identitet på baggrund af et akkreditiv. Autentifikation er baseret på brug af akkreditiver som fx kodeord (noget kun brugeren ved), et token (noget kun brugeren har) eller biometri (noget kun brugeren er eller gør). Tjenesten kan desuden levere identitetsattributter samt information om validiteten af identiteten til tjenesten Billetudstedelse, der danner adgangsbilletter (<em>security tokens</em>) med tidsbegrænset gyldighed til en eller flere tjenester. I en føderation er det adgangsbilletten, der giver adgang til tjenesten – ikke det akkreditiv, som er udstedt til bruger/serviceaftager, da dette typisk er usynligt for tjenesten grundet den arkitekturmæssige afkobling.</p>
   <p>Før tjenesteudbyderen giver adgang til en bruger, anvender tjenesteudbyderen en autentifikationstjeneste til at validere identiteten. Tjenesteudbyderen kan anvende autentifikationstjenesten direkte eller gennem tjenesten ”Billetudstedelse”, som beskrives i næste afsnit.</p>
   <p>Autentifikationen bygger på tillid til, at den akkreditivtjeneste, der har tilknyttet og udstedt akkreditiverne, har gjort dette til de rette entiteter, nemlig de samme entiteter som registreringstjeneste har identificeret og registreret identiteten på.</p>
   <h4 class="heading settled" data-level="4.1.4" id="billetudstedelse"><span class="secno">4.1.4. </span><span class="content">Billetudstedelse</span><a class="self-link" href="#billetudstedelse"></a></h4>
    [Er det i det måske omvekslingen der skal i fokus? /madsh] 
   <p>Byggeblokken ”Billetudstedelse” er den del af brugerstyringen, som udsteder adgangsbilletter (eng: <em>security tokens</em>) til tjenester på grundlag af en autentifikation, og tilføjer attributter, der beskriver identiteten, samt anden relevant information som fx tidspunkt for autentifikation, NSIS sikringsniveau for atuentifikationen mm. Attributterne udtrykker kendetegn, roller eller andre typer af attributter som en relation (“repræsenterer og er under instruks af CVR”, “arbejder på vegne af læge X”), eller attributter, der udtaler sig mere specifikt om identitetens funktion (“arbejdsfunktion”, “rolle”).</p>
   <p>Attributter kan stamme fra en autentifikationstjenesten, fra attributtjenester eller fra egne brugerstyringssystemer. Byggeblokken kan desuden tilbyde, at de udstedte adgangsbilletter leveres i flere standardformater. Byggeblokken kan varetages af en broker, der dels kan indsamle attributter fra forskellige attributtjenester, dels kan omveksle attributformater, hvis en tjeneste kræver et bestemt format for adgangsbilletten.</p>
   <p>I en føderation bygger tjenesten Billetudstedelse på tillid til føderationens registreringstjenester, akkreditivudstedere og attributtjenester. Endvidere kan brokere omveksle og berige tokens fra andre brokere og dermed danne en <em>tillidskæde</em>. Autentifikationstjenestens tjek af akkreditivet sikrer, at det er den rette brugeridentitet, som udtrykkes i billetten. Den billet, som Billetudstedelse udsteder, skal indeholde det eller de attributter for denne konkrete identitet, som kræves af tjenestens adgangskontrol, før der kan opnås adgang. Det er dermed en fordel for brokeren at kende til tjenestens krav til attributter, hvilket ofte løses ved, at det ønskede attributsæt registreres, når tjenesten tilsluttes brokeren.</p>
   <h4 class="heading settled" data-level="4.1.5" id="adgangskontrol-men-ikke-autorisation"><span class="secno">4.1.5. </span><span class="content">Adgangskontrol (men ikke autorisation?)</span><a class="self-link" href="#adgangskontrol-men-ikke-autorisation"></a></h4>
   <p>Tjenesteudbyderen er den, der forvalter det juridiske ansvar for adgangen til de informationer og funktioner, som tjenesteudbyderen udstiller - som hovedregel i rollen som <em>dataansvarlig</em>.</p>
   <p>Det sker på grundlag af:</p>
   <ul>
    <li data-md>
     <p>Adgangspolitikken for tjenesten.</p>
    <li data-md>
     <p>Adgangskontrollen, som er håndhævelsen af adgangspolitikker, når en bruger anmoder om adgang.</p>
   </ul>
   <p>Tjenesteudbyderen fastlægger en <strong>adgangspolitik</strong> på grundlag af sin sikkerhedspolitik med klassifikationer af sine informationer og funktioner på følgende parametre:</p>
   <ul>
    <li data-md>
     <p><em>Fortrolighed</em>, at kun autoriserede personer har ret til at tilgå informationerne, og informationerne skal kun være tilgængelige for autoriserede personer.</p>
    <li data-md>
     <p><em>Integritet (pålidelighed),</em> at data er komplette, korrekte og opdaterede.</p>
    <li data-md>
     <p><em>Tilgængelighed,</em> at det skal være muligt at tilgå systemer og data for autoriserede personer, når dette er nødvendigt.</p>
   </ul>
   <p>Tjenesteudbyderen skal ud fra sin adgangspolitik og en risikovurdering fastlægge, hvilke sikringsniveauer og attributsæt, der giver adgang til hvilke informationer og funktioner. Disse kan være udmøntet i et struktureret format, der kan læses maskinelt af en funktion, der undersøger betingelserne til at få adgang til tjenestens funktioner og informationer.</p>
   <p>Beskrivelsen af adgangspolitikken er desuden grundlaget for brugerens eller brugerorganisationens administration af brugerens rettighedsrelevante attributter. Tjenesteudbydere og brugere/brugerorganisationer skal derfor have fælles forståelse af adgangspolitikken - herunder fx hvad konsekvensen af at tildele en bruger en bestemt rolle er. I en standard som WS-SecurityPolicy er der specificeret et sprog for at udtrykke en adgangspolitik. Dette giver en Billetudsteder mulighed for maskinelt at spørge tjenesten, hvilken adgangspolitik der skal opfyldes, for at få adgang til en bestemt funktion eller bestemte informationer. En mere simpel logik findes i SAML standarden, hvor en tjenestes behov for attributter kan udtrykkes i en såkaldt metadatafil.</p>
   <p>Den løbende vedligeholdelse af den adgangspolitik, en given tjeneste kræver, er omfattende, idet den skal realiseres for enhver tjeneste, som tjenesteudbyder stiller til rådighed for brugere. Det samme gælder, hvilke akkreditiver og attributter der giver adgangsrettigheder til hvilke informationer og funktioner. De arbejdsprocesser, der foretager al denne vedligeholdelse, er i sin manuelle implementering meget ressourcekrævende. Der er derfor klare gevinster at hente gennem automatisering af administration i form af sparede manuelle ressourcer og sikring af, at personer der forlader organisationen, eller organisationer der forlader føderationen, også meldes ud.</p>
   <p>En udbredt model for adgangsrettigheder er rollebaseret adgangskontrol (RBAC), hvor brugerorganisationen kan anvende egne organisatoriske roller i forbindelse med adgangskontrol. I de seneste år har en ny model, attributbaseret adgangskontrol (ABAC), vundet frem, hvor en regelmotor kan agere ud fra de attributværdier, en tjeneste præsenteres for gennem adgangsbilletten. RBAC kan opfattes som en delmængde af ABAC, idet roller kan udtrykkes som attributter.</p>
   <p>I <strong>Adgangskontrol</strong> kontrolleres de attributter, som er indeholdt i den adgangsbillet, som brugeren medbringer fra Autentifikation og Billetudstedelse. Dette attributsæt skal matche den definerede adgangspolitik for tjenesten for de funktioner og informationer, der ønskes adgang til. Ellers afvises det at give identiteten adgang. I tilfælde af at der er etableret Single Sign-On funktionalitet, kan dette sæt af attributter (efter den initiale validering) repræsenteres af en session cookie eller en OAuth access token, der er udvekslet til at holde sessionen åben i en bestemt tidsperiode.</p>
   <p>Adgangskontrollen påhviler tjenesteudbyder. Dele af den kan løses af en fælles byggeblok i referencearkitekturen.</p>
   <h3 class="heading settled" data-level="4.2" id="orkestreringseksempler"><span class="secno">4.2. </span><span class="content">Orkestreringseksempler</span><a class="self-link" href="#orkestreringseksempler"></a></h3>
   <p>I dette afsnit vises med nogle få eksempler, hvordan byggeblokkenes interfaces kan benyttes til understøttelse af forskellige typiske brugssituationer. Brugssituationerne beskrives ved hjælp af arbejdsgange.
[Jeg tror vi skal helt over i BPMN diagrammer /madsh]</p>
   <p>De aktiviteter, der er skitseret i arbejdsgangene, er eksempler. Der kan være flere eller færre aktiviteter, og rækkefølgen af disse kan i nogle tilfælde være en anden. Det er arbejdsgangene i den enkelte myndighed, der afgør, hvilke konkrete aktiviteter en given arbejdsgang består af i praksis.</p>
   <p>I de efterfølgende eksempler på arbejdsgange opererer hver aktør (myndighed, leverandør af brugerstyringstjenester) i sin egen svømmebane. De forskellige tjenester har desuden fået hver deres bane, hvor brugen af de forskellige interfaces vises. For overskuelighedens skyld er aktiviteternes brug af disse interfaces vist som en direkte anvendelse af disse fra aktiviteterne. I praksis vil dette ofte ske gennem forskellige tjenester, men da disse er mangfoldige og uden for denne referencearkitekturs scope, er oversigten over arbejdsgange simplificeret ved, at disse tjenester ikke vises i de følgende eksempler, jf. nedenstående figur.</p>
   <figure>
     <img src="billede11.PNG" width="65%"> 
    <figcaption>Model til brug for brugerstyringstjenester i processer</figcaption>
   </figure>
   <blockquote>
    <p>!<a href="logo.png"></a> Den tekniske opbygning af brugerstyring med opdeling i klart adskilte delprocesser og arbejdsdeling mellem aktørerne i administrative processer og autentifikation, billetudstedelse og adgangskontrol samt kontrol og rapportering BØR efterkommes i fællesoffentlige løsninger, i tværoffentlige brugerstyringsløsninger og i tjenester, der anvender disse. Dette afsnit KAN efterkommes af løsninger i offentlige sektorer.</p>
   </blockquote>
   <h4 class="heading settled" data-level="4.2.1" id="administration-af-elektronisk-identitet-akkreditiver-og-attributter"><span class="secno">4.2.1. </span><span class="content">Administration af elektronisk identitet, akkreditiver og attributter</span><a class="self-link" href="#administration-af-elektronisk-identitet-akkreditiver-og-attributter"></a></h4>
   <p>Processer i forbindelse med administration af identiteter, akkreditiver og attributter kan gennemføres på forskellige måder og med forskellig sikkerhed for sammenhæng mellem elektronisk identitet og en fysisk person eller anden entitet. Kravene på forskellige sikringsniveauer (Levels of Assurance) beskrives normalt i et trust framework som NSIS, således at modtageren af en identitet kan matche dette mod deres risikoniveauer.</p>
   <p>De administrative processer kan gennemføres i et samlet forløb (som det beskrives her) eller i flere adskilte forløb. Enkelte processer kan gentages, fx kan brugeren få tilknyttet flere akkreditiver (fx et nyt smartcard) og flere attributter på et senere tidspunkt.</p>
   <p><strong>Registrering af elektronisk identitet</strong> kan på lave sikringsniveauer ske ved, at en person registrerer sig selv – og med data, der er valgt af personen selv eller med de officielle data som navn og adresse fra CPR. Der er et tilsvarende behov for registrering af organisationer og ting.</p>
   <p>En myndighed kan registrere personen, verificere personens identitet (eng. <em>identity proofing</em>) og angive styrken af registreringen (NSIS IAL), fx om registreringen er sket på grundlag af fysisk fremmøde eller på anden måde.</p>
   <p>En arbejdsgiver kan registrere sine medarbejdere i egne brugerstyringssystemer eller i eksterne brugerstyringssystemer fx i det NemLog-in og Miljøportalen. Det kan ske manuelt eller ved overførsel fra arbejdsgiverens eget brugerstyringssystem til det eksterne system.</p>
   <p>En arbejdsgiver kan også registrere en tilknytning mellem sin virksomhed og en given identitet, fx ved at en person med en given identitet  må udføre handlinger i virksomhedens systemer eller for virksomheden.</p>
   <p>For de mange virksomheder, der er personligt ejede, kan tilknytningen mellem virksomhed og en given identitet ske automatisk på grundlag af registreringer i CVR-registret (fx at en person er fuldt ansvarlig deltager eller kan tegne alene for en given virksomhed).</p>
   <p><strong>Attributbeskrivelsen</strong> er her beskrevet meget forenklet. Attributter for en identitet kan hentes fra eksterne kilder i forbindelse med registreringen (fx CPR-oplysninger), kan registreres i forbindelse med registreringen, kan registreres i brugerstyringssystemer eller i andre systemer. Attributter kan på samme måde som en identitet have forskellige kvalitetsniveauer, der bl.a. afhænger af de processer, der er anvendt under registreringen.</p>
   <figure>
     <img src="billede12.PNG" width="65%"> 
    <figcaption>Registrer identitet</figcaption>
   </figure>
   <p>Processen for registrering af en elektronisk identitet foregår forenklet set gennem følgende trin:</p>
   <ul>
    <li data-md>
     <p>En bruger anmoder om en identitet.</p>
    <li data-md>
     <p>Registreringstjenesten verificerer identiteten fx med hjælp fra grunddata samt beviser leveret af ansøgeren (fx pas og kørekort). Disse grunddata kan desuden indgå i trinnet Registrer attributter.</p>
    <li data-md>
     <p>I akkreditivtjenesten kan der tilknyttes allerede anskaffede akkreditiver, eller der kan udstedes og tilknyttes nye akkreditiver. Akkreditiver kan bestå af både digitalt information, som en nøgleapp, og fysisk information, som fx et nøglekort.</p>
    <li data-md>
     <p>Aktøren registrerer de attributter, der er krævet/ønsket.</p>
    <li data-md>
     <p>Resultatet vises for brugeren.</p>
   </ul>
   <p>En attribut kan være niveauet af registreringskvalitet (IAL) og akkreditivets kvalitet (AAL) som beskrevet i NSIS eller eIDAS, der begge har en model for fastlæggelse af niveauer af registreringskvalitet for en identitet.</p>
   <h4 class="heading settled" data-level="4.2.2" id="autentifikation"><span class="secno">4.2.2. </span><span class="content">Autentifikation</span><a class="self-link" href="#autentifikation"></a></h4>
   <p>Når en bruger anmoder om adgang til en tjeneste, der kræver et eller flere attributsæt for at give adgang, aktiveres de ovenfor beskrevne tjenester i en proces, der typisk forløber, som illustreret i følgende figur:</p>
   <figure>
     <img src="billede13.PNG" width="65%"> 
    <figcaption>Autentifikation</figcaption>
   </figure>
   <p>Processer i forbindelse med autentifikation kan gennemføres på forskellige måder og med forskellig sikkerhed for sammenhæng mellem elektronisk identitet og de udstedte akkreditiver (sikringsniveauer).</p>
   <p>Typisk skelnes der mellem, hvor stærke akkreditiver der anvendes, styrken af autentifikationsprotokollen samt hvilke kontroller der er tilknyttet selve autentifikationsprocessen. Login med et akkreditiv (1-faktor login) er fx på lavere sikringsniveau end 2-faktor login. Login via en protokol, som er robust over for fx replay-angreb, er stærkere end login via protokoller, som ikke kan sikre mod denne type angreb.</p>
   <p>Autentifikationen kan som beskrevet ske ved, at tjenesten henvender sig direkte til autentifikationstjenesten, men der kan også indgå flere aktører i processen, som når både en broker (NemLog-in) og en autentifikationstjeneste indgår.</p>
   <ol>
    <li data-md>
     <p>Brugeren tilgår (anmoder om adgang til) forretningstjenesten.</p>
    <li data-md>
     <p>Forretningstjenesten anmoder evt. brugeren om at vælge, hvilken broker eller autentifikationstjeneste brugeren ønsker at benytte (fx NemLog-in, WAYF, KOMBIT).</p>
    <li data-md>
     <p>Forretningstjenesten anmoder brokeren autentifikationstjenesten om en adgangsbillet (en token) til brug for login.</p>
    <li data-md>
     <p>Autentifikationstjenesten beder brugeren om at autentificere sig via sine akkreditiver.</p>
    <li data-md>
     <p>Brugeren autentificerer sig over for autentifikationstjenesten.</p>
    <li data-md>
     <p>Autentifikationstjenesten/brokeren validerer brugerlogin.</p>
    <li data-md>
     <p>Autentifikationstjenesten/brokeren udsteder en signeret billet til tjenesten med brugerens identitet og eventuelle attributter.</p>
    <li data-md>
     <p>Forretningstjenesten kontrollerer den udstedte billet og etablerer evt. en session med brugeren.</p>
    <li data-md>
     <p>Brugeren kan anvende forretningstjenesten underlagt dennes adgangskontrol.</p>
   </ol>
   <p>Forløbet i denne proces varierer afhængigt af brugertype og situation. I figuren herover starter processen i forretningstjenesten, som re-dirigerer til autentifikationstjenesten. Hvis brugeren allerede har en session med autentifikationstjenesten, sker der ikke nødvendigvis fornyet login, men der udstedes en adgangsbillet til den ny forretningstjeneste.</p>
   <p>Ovenstående dækker både processer, hvor brugeren tilgår tjenesten i en browser, app eller rig applikation. Der vil dog være forskelle i de tekniske implementeringer.</p>
   <h4 class="heading settled" data-level="4.2.3" id="billetudstedelse-og-adgangskontrol"><span class="secno">4.2.3. </span><span class="content">Billetudstedelse og adgangskontrol</span><a class="self-link" href="#billetudstedelse-og-adgangskontrol"></a></h4>
   <p>I denne proces kræver tjenestens adgangspolitik, at adgangsbilletten indeholder bestemte attributter. Processerne i forbindelse med Billetudstedelse og Adgangskontrol tager derfor udgangspunkt i, at der er oprettet en identitet, som har fået tilknyttet attributter, der matcher forretningstjenestens adgangspolitik, og at identiteten endvidere kan autentificere sig på det sikringsniveau, som tjenesten kræver. Efter autentifikation skal identiteten derfor have udtrykt disse attributter og aktuelle sikringsniveau i den adgangsbillet, som forretningstjenesten modtager.</p>
   <p>Arbejdsdelingen mellem de forskellige aktører kan også være forskellig, hvilket kan have betydning for, hvor attributter (fx rolle) hentes fra, og om fx adgangspolitikker håndteres af rettighedstjenester eller forretningstjenesten selv. Det kan også have betydning for, hvor aktørerne administrerer attributter.</p>
   <figure>
     <img src="billede14.PNG" width="65%"> 
    <figcaption>Billetudstedelse og adgangskontrol via en broker</figcaption>
   </figure>
   <ol>
    <li data-md>
     <p>En person anmoder om at anvende en tjeneste hos en tjenesteudbyder.</p>
    <li data-md>
     <p>Tjenesten beder derfor en Billetudstedelse (identitetsbroker) om en signeret billet. Identitetsbrokeren tager sig af at sikre gennemførsel af autentifikation, indhente alle nødvendige attributter og udstede adgangsbilletten.</p>
    <li data-md>
     <p>Autentifikationstjenesten verificerer brugerens akkreditiv gennem en autentifikationsproces. Kun hvis dette er gyldigt, fortsættes, ellers afvises personen.</p>
    <li data-md>
     <p>Autentifikationstjenesten udsteder herefter en adgangsbillet til identitetsbrokeren med de attributter for identiteten, som tjenesten kræver inkl. angivelse af aktuelt sikringsniveau.</p>
    <li data-md>
     <p>En eller flere grunddatatjenester leverer de fornødne attributter knyttet til identiteten.</p>
    <li data-md>
     <p>En eller flere attributtjenester leverer attributter knyttet til identiteten.</p>
    <li data-md>
     <p>Brokeren beriger adgangsbilletten med attributter og udsteder denne til forretningstjenesten.</p>
    <li data-md>
     <p>Denne forretningstjeneste etablerer en session, som personen kan agere i med disse rettigheder og attributter.</p>
    <li data-md>
     <p>Forretningstjenesten håndhæver adgangspolitikken i personens anvendelse af forretningstjenesten.</p>
    <li data-md>
     <p>Brugeren anvender forretningstjenesten.</p>
   </ol>
   <h4 class="heading settled" data-level="4.2.4" id="kontrol-og-rapportering"><span class="secno">4.2.4. </span><span class="content">Kontrol og rapportering</span><a class="self-link" href="#kontrol-og-rapportering"></a></h4>
   <p>I eksemplet om Billetudstedelse og Adgangskontrol ovenfor skal alle brugerstyringstjenesterne for hver aktivitet logge resultatet af aktiviteten som adgangshændelser. Hvis man i brugerstyringstjenesterne konstaterer et sikkerhedsbrud, logges det som en sikkerhedshændelse, og denne forsynes med tilstrækkelige metadata til, at de tjenester der overvåger sikkerhedsbrud, kan anvende informationen og agere på den.</p>
   <p>Sikkerhedsfunktionen hos udbydere af brugerstyringstjenester og forretningstjenester bør med passende mellemrum undersøge loggen af adgangshændelser for spor af forsøg på sikkerhedsbrud som led i forebyggelse af sikkerhedsbrud, fx gennem datamining-teknikker, herunder maskinlæring. Derigennem kan indbrudsforsøg afdækkes, og sikkerhedsforanstaltninger foretages og forebygges. Dette rapporteres også som en type sikkerhedshændelse til føderationen og til sikkerhedstjenester i føderationen. Samme sted kan tjenesteudbyderens sikkerhedsfunktion og udbyderne af brugerstyringstjenester hente de seneste erfaringer med sikkerhedshændelser eller spor af sikkerhedshændelser og anvende dette i deres forebyggende arbejde.</p>
   <h3 class="heading settled" data-level="4.3" id="tekniske-implementering-af-forretningsfunktioner"><span class="secno">4.3. </span><span class="content">Tekniske implementering af forretningsfunktioner</span><a class="self-link" href="#tekniske-implementering-af-forretningsfunktioner"></a></h3>
   <h4 class="heading settled" data-level="4.3.1" id="implementering-af-administration-af-elektronisk-identitet-akkreditiver-og-attributter"><span class="secno">4.3.1. </span><span class="content">Implementering af administration af elektronisk identitet, Akkreditiver og Attributter</span><a class="self-link" href="#implementering-af-administration-af-elektronisk-identitet-akkreditiver-og-attributter"></a></h4>
   <p>Følgende figur illustrerer de løst koblede byggeblokke for administration i brugerstyring, der udgør de centrale byggeblokke i den samlede arkitektur:</p>
   <figure>
     <img src="billede8.PNG"> 
    <figcaption>Byggeblokke for administration i referencearkitekturen</figcaption>
   </figure>
   <p>Byggeblokkene ”Registrering”, og ”Akkreditivtjeneste” er de tjenester, der registrerer identiteter, og de akkreditiver som anvendes til at validere identiteter. Attributter som beskriver identiteten, kan vedligeholdes af attributtjenester. Tabel 1 giver som overblik nogle eksempler.</p>
   <p>Tabel 2. Eksempler på identifikatorer, akkreditiver og attributter for entiteter</p>
   <table>
    <tbody>
     <tr>
      <th>
     <tr>
      <td>
   </table>
    |                   |                                                          | Atrributter                     |                                                |                                                                                |
|-------------------|----------------------------------------------------------|---------------------------------|------------------------------------------------|--------------------------------------------------------------------------------|
| <strong>Entitet</strong> | <strong>Akkreditiv</strong> | <em>Baseret på tal</em> | <em>Baseret på navne</em> | <em>Baseret på</em> klassifikationer                                                    |
| Person            | Kodeord, nøglekort, nøglefil, fingeraftryk, irisscanning | CPR-nr., administrativt CPR-nr. | Brugernavn, vanlig-navn, køn, alder, UNI*Login | Specialkonsulent, leder, administrator, kompetence, uddannelse, certificering. |
| Organisation      | Nøglefil                                                 | CVR-nr., EAN, SEnr.             | Vanlig-navn, logi, branchekode                 | Leverandør, rådgiver, kontrollant, certificering                               |
| Ting              | Nøglefil, token                                          | Serienummer, URL, Typenummer    | Funktion, RDF, OWL                             | Sensortype, triggertype, certificering                                         |
| Tjenestekonsument | Nøglefil (p.t. FOCES)                                    | P-nummer                        | RDF, OWL, funktionsnavn                        | FORM, opmærkning, funktionstype                                                | 
   <p>Implementering af disse byggeblokke målrettes det eller de sikringsniveauer, som informationssikkerhedspolitikken har fastlagt. Det udtrykkes fx af forskellen i processen for at opnå et NemID eller et virksomhedscertifikat i forhold til at opnå et brugernavn-kodeord til at tilgå sin virksomheds informationer. Grundet tradition logger de fleste medarbejdere på deres organisations lokale netværk blot med brugernavn-kodeord, men påtvinges så at skifte dette ofte, fx med tre måneders mellemrum.</p>
   <p>Jo stærkere garanti for akkreditiv og attributter, som et valgt sikringsniveau kræver, jo stærkere skal kontrolfunktionerne omkring registreringen være.</p>
   <p>Brugerstyringstjenesterne kan varetages af samme organisation, men kan i en tværgående føderation varetages af forskellige organisationer. Opdelingen kædes sammen med fællesoffentlige standardprotokoller for informationsudveksling. Da de forskellige standardsystemer, som anvendes af myndigheder og virksomheder, ikke nødvendigvis har de fælles protokolstandarder indbygget, kan dette løses af en broker, der foretager protokolkonvertering.</p>
   <p>En særlig opmærksomhed skal gives vedligeholdelse af identiteters attributter gennem hele deres livscyklus. Denne livscyklus indeholder ændringer i registreringspraksis, i valg af anvendte akkreditiver og i beskrivelse af attributter, herunder roller og terminering af alle rettigheder for en identitet ved fx jobskifte, dødsfald, konkurs, udskiftning, ændring eller nedlæggelse af tjeneste og lign.</p>
   <p>Det gentages her, at denne referencearkitektur anvender følgende termer i stedet for termen autorisation med henblik på at opnå den størst mulige præcision:</p>
   <ul>
    <li data-md>
     <p>Administration af en identitets rettigheder gennem associering af attributter.</p>
    <li data-md>
     <p>Udstedelse af adgangsbillet med identitet, roller, dataafgrænsninger og andre attributter betegnes med <em>billetudstedelse.</em></p>
    <li data-md>
     <p>Fastlæggelse af adgangspolitikker og adgangsrettigheder betegnes <em>adgangspolitik.</em></p>
    <li data-md>
     <p>Håndhævelse af adgangsrettigheder kaldes <em>adgangskontrol.</em></p>
   </ul>
   <h4 class="heading settled" data-level="4.3.2" id="implementering-af-registrering-af-elektronisk-identitet"><span class="secno">4.3.2. </span><span class="content">Implementering af Registrering af elektronisk identitet</span><a class="self-link" href="#implementering-af-registrering-af-elektronisk-identitet"></a></h4>
    Byggeblokken ”Registreringstjeneste” har til opgave at foretage en tilknytning mellem en entitet og en identitet og udføre dette efter National Standard for Identiteters Sikringsniveauer (NSIS). NSIS fastlægger tre veldefinerede sikringsniveauer, som en tjenestes adgangskontrol kan tage udgangspunkt i, når de præsenteres for en autentificeret identitet. En entitet kan knyttes til flere identiteter. 
   <p>En registreringstjeneste har ansvar for ikke blot at registrere identiteter første gang, men også for at vedligeholde en identitetsregistrering i hele dets livscyklus. Dette inkluderer nedlæggelse af identiteten, hvis identiteten ophører med at eksistere fx
ved dødsfald eller konkurs.</p>
   <h4 class="heading settled" data-level="4.3.3" id="implementering-af-anvendelse-af-brugerstyring"><span class="secno">4.3.3. </span><span class="content">Implementering af Anvendelse af brugerstyring?</span><a class="self-link" href="#implementering-af-anvendelse-af-brugerstyring"></a></h4>
    Følgende figur illustrerer de løst koblede byggeblokke for <em>anvendelse</em> af brugerstyring, der udgør de centrale byggeblokke i den samlede arkitektur: 
   <figure>
     <img src="billede9.PNG"> 
    <figcaption>Byggeblokke for referencearkitekturens brugerstyring i anvendelse</figcaption>
   </figure>
   <h3 class="heading settled" data-level="4.4" id="understttende-applikationsservices"><span class="secno">4.4. </span><span class="content">Understøttende applikationsservices</span><a class="self-link" href="#understttende-applikationsservices"></a></h3>
    [Mon ikke der er noget at hente i 'deling af data og dokumenter' fx dataservice... log... /madsh] 
   <h3 class="heading settled" data-level="4.5" id="omrder-for-standardisering"><span class="secno">4.5. </span><span class="content">Områder for standardisering</span><a class="self-link" href="#omrder-for-standardisering"></a></h3>
    Referencearkitekturen peger på, hvilke områder der skal være standarder for, at referencearkitekturen fungerer. 
   <p>I afsnit 0 er beskrivelse af standarder på de udpegede områder. En detaljeret  oversigt over obligatoriske og anbefalede standarder skal vedligeholdes på arkitekturguiden.digitaliser.dk</p>
   <figure>
     <img src="billede20.PNG"> 
    <figcaption>Områder for standarder for brugerstyring</figcaption>
   </figure>
   <p>Note til figur: Pilene angiver områder for standarder</p>
   <p>Der skal være <strong>standarder for registrering af brugere, akkreditiver og attributter.</strong> Disse standarder skal dække registreringskvaliteten (eIDAS, National Standard for Identiteters Sikringsniveau (NSIS), ISO29115, Kantara Identity Assurance Framework).</p>
   <p>Der skal være <strong>standarder for overførsel af data om autentificerede brugere</strong> mellem autentifikationstjenester, login-tjenester/brokere og tjenester (her bruges i dag fx OIOSAML standarden mellem NemLog-in og tjenester).</p>
   <p>Der er behov for <strong>standarder i forbindelse med rettigheder og attributter.</strong> Det drejer sig dels om standarder til at kommunikere med attributtjenester (SAML, OpenID Connect), dels at kommunikere mellem attributtjenester og forretningstjenester (fx XACML). Et andet aspekt er standarder for at indhente brugernes samtykke, når dette indgår i adgangsbeslutninger – her er UMA og OAuth muligheder.</p>
   <p>Der er behov for <strong>standarder for kommunikation mellem føderationer.</strong> Disse skal identificeres og fastlægges i arbejdet med implementering af referencearkitekturen. Arbejdet i EU-regi (STORK og eIDAS) er baseret på SAML2-profiler.</p>
   <figure>
     <img src="billede21.PNG"> 
    <figcaption>Kommunikation mellem føderationer</figcaption>
   </figure>
   <hr>
   <p>Figuren herunder viser interoperabilitet for brugerrettighedsstyring iht. referencemodellen for interoperabilitet, som den er beskrevet i hvidbogen for fællesoffentlig rammearkitektur.</p>
   <p>I takt med videreudvikling og konsolidering af området, kan denne figur opdateres og udstilles som en del dokumentationen af den fællesoffentlige rammearkitektur:</p>
   <figure>
     <img src="billede22.PNG"> 
    <figcaption>Interoperabilitet for brugerstyring</figcaption>
   </figure>
   <hr>
   <h2 class="heading settled" data-level="5" id="mlbillede-implementering"><span class="secno">5. </span><span class="content">Målbillede? Implementering?</span><a class="self-link" href="#mlbillede-implementering"></a></h2>
    [Det var et afsnit vi undlod i 'deling af data og dokumenter' /madsh] 
   <p>Dette afsnit beskriver det systemtekniske målbillede, de væsentligste komponenter og standarder.</p>
   <p>Det er kendetegnende for brugerstyringsområdet, at området er veludbygget med en lang række føderationer, tekniske løsninger og standarder. Dette giver samtidig en udfordring med at sikre interoperabilitet på tværs af sektorer og domæner, idet nuværende praksis til en vis grad er opstået gennem decentralt knopskydning og lokal profilering af fælles standarder.</p>
   <p>Der er derfor i forbindelse med referencearkitekturen behov for at etablere nye tekniske løsninger på få, begrænsede områder, idet de enkelte komponenter i målbilledet stort set er til stede. Der er fx behov for at etablere føderationer og forbedre samspillet mellem føderationer.</p>
   <p>Der forventes desuden en fortsat øget specialisering af funktioner i økosystemet, hvilket kan føre til udvikling af nye standarder, til kommunikationen mellem komponenter samt løbende tilpasning af eksisterende standarder.</p>
   <hr>
   <blockquote>
    <p>!<a href="logo.png"></a> Den tekniske målarkitektur BØR efterkommes i fællesoffentlige løsninger, i løsninger, der kommunikerer mellem offentlige sektorer, og i tjenester, der anvender fællesoffentlige løsninger.
Den tekniske målarkitektur KAN efterkommes af løsninger i offentlige sektorer.</p>
   </blockquote>
   <p>Det systemtekniske målbillede viser, hvor validering af og data om brugere og andre identiteter stilles til rådighed af brugerstyringstjenesterne til forretningsformål, ligesom de kan indgå i samspil med andre infrastrukturtjenester.</p>
   <figure>
     <img src="billede15.PNG"> 
    <figcaption>Brugerstyringstjenester i logisk sammenhæng</figcaption>
   </figure>
   <p>Brugerstyringstjenesterne skal gøre det muligt for forretningssystemerne at anvende og opdatere data om brugere til de mange forskellige formål, der er beskrevet ovenfor.</p>
   <p>Brugerstyringstjenesterne kan indgå både i den enkelte organisations infrastruktur og i den nationale infrastruktur, hvor brugerstyringstjenesterne kan anvende fx tjenester for Klassifikation og Organisation, og hvor andre infrastrukturtjenester kan anvende brugerstyringstjenesterne.</p>
   <p>Det systemtekniske målbillede tager udgangspunkt i, at der implementeres snitflader baseret på åbne standarder i de enkelte brugerstyringssystemer og i de øvrige systemer, der skal anvende brugerstyringstjenester.</p>
   <h3 class="heading settled" data-level="5.1" id="en-mlarkitektur-med-identitetsbrokere"><span class="secno">5.1. </span><span class="content">En målarkitektur med identitetsbrokere</span><a class="self-link" href="#en-mlarkitektur-med-identitetsbrokere"></a></h3>
   <blockquote>
    <p>!<a href="logo.png"></a> Arkitektur med identitetsbrokere SKAL efterkommes i fællesoffentlige løsninger, mens øvrige løsninger i offentlige sektorer BØR efterkomme ovenstående.</p>
   </blockquote>
   <p>En login-tjeneste er en brugerstyringstjeneste, der foretager autentifikation af brugere på vegne af forretningstjenester eller billetudstedere. Autentifikationen består som regel i at verificere et akkreditiv evt. ved at kontakte en akkreditivudsteder, men man kan også omveksle billetter, udstedt af andre login-tjenester (brokering). Ud over autentifikation kan login-tjenesten indhente yderligere information om brugeren hos attributtjenester, som indlejres i en billet, udstedt til forretningstjenesten. En login-tjeneste kan evt. også danne en session med brugeren med henblik på at etablere Single Sign-On.</p>
   <p>En login-tjeneste kaldes også for en identitetsbroker. Ved at anvende en identitetsbroker opnår forretningstjenesten en løs kobling til brugerens akkreditiver og hermed autentifikationstjenester. Forretningstjenesten skal blot forholde sig til, hvem brugeren er, og hvilke andre attributter (fx rettigheder) der står i billetten, samt sikringsniveauet for autentifikationen (jf. NSIS), men ikke hvordan brugeren er logget ind og med hvilke akkreditiver. Dette betyder eksempelvis, at man kan indføre nye typer akkreditiver eller nye snitflader til autentifikationstjenester uden at påvirke forretningstjenesterne. Et eksempel på dette var indførslen af NemID Javascript-løsningen i 2014. Her skiftede NemLog-in fra Java-implementeringen af NemID til JavaScript-implementeringen, og med ét slag var de over 200 offentlige tjenester tilsluttet NemLog-in overgået til den nye teknologi – uden at ændre én linje kode selv.</p>
   <blockquote>
    <p>!<a href="logo.png"></a> Identitetsbrokere BØR kommunikere sikringsniveauet (eng: Level of Assurance) for autentifikationen ved at indlejre en attribut i billetten, som angiver dette (hvor niveauet typisk er defineret i et trust framework som fx National Standard for Identiteters Sikringsniveau (NSIS)).
Dette gælder for fællesoffentlige løsninger og tværoffentlige brugerstyringsløsninger.</p>
   </blockquote>
   <p>Et andet væsentligt aspekt af den løse kobling er, at forretningsapplikationen ikke hårdkodes til at hente oplysninger om identiteter bestemte steder, men i stedet får dem leveret af infrastrukturen gennem den udstedte billet. Herved har man frihed til at ændre i placeringen af attributter, uden at forretningstjenesterne påvirkes.</p>
   <figure>
     <img src="billede16.PNG"> 
    <figcaption>Broker-baseret arkitekturmodel</figcaption>
   </figure>
   <p>Denne model svarer til ”<em>four corner</em>”-modellen for betalingskortinfrastrukturen, som vist på Figur 17 Arkitektur til betalingskortinfrastruktur, hvor kortholderen (svarende til identiteten) forbindes til betalingsmodtager (svarende til tjenesteudbyder) gennem kortudsteder (svarende til registreringstjeneste og akkreditivudsteder) og kortindløser (svarerende til broker). Modellen har vist sig meget skalerbar i praksis, både i forhold til antallet af aktører og i forhold til transaktioner.</p>
   <figure>
     <img src="billede17.PNG"> 
    <figcaption>Arkitektur til betalingskortinfrastruktur</figcaption>
   </figure>
   <p>For langt hovedparten af offentlige tjenesteudbydere anvendes denne model, som nævnt, allerede med NemLog-in som identitetsbroker. Ligeledes fungerer sundhedsområdets SOSI STS som identitetsbroker.</p>
   <p>Denne arkitekturmodel understøtter, at der er flere autentifikationstjenester, bl.a. som følge af eIDAS-forordningens krav om gensidig anerkendelse af elektroniske identiteter på tværs af EU-landegrænser. STORK2-projektets arkitektur kan umiddelbart implementeres ved at indarbejde funktionalitet hos en broker til at modtage eID fra andre EU-medlemsstater – en såkaldt eID-gateway. I Danmark er NemLog-in og danske eID gateway eksempler på identitetsbrokere, som benyttes mod alle offentlige nationale selvbetjeningsløsninger med behov for sikker identifikation, herunder løsninger på portalerne borger.dk, virk.dk og sundhed.dk. NemLog-in understøtter p.t. kun NemID som akkreditiv. Som andre eksempler kan nævnes Uni*Login, WAYF og ContextHandleren, som implementeres i regi af den fælleskommunale infrastruktur.</p>
   <p>Hvis en broker eller login-tjeneste understøtter flere forskellige autentifikationsmekanismer, KAN der være et element af brugerinteraktion, hvor brugeren vælger login-mekanisme. Et eksempel på dette findes i WAYF-løsningen og i KOMBIT’s føderation, hvor brugeren normalt skal vælge, hvilken organisation han/hun tilhører for efterfølgende at autentificere mod dennes login-tjeneste, inden brokeren omveksler billetten til forretningstjenesten.</p>
   <p>Arkitekturmodellen betyder – som for betalingskort – at brugerne kan anvende flere forskellige akkreditiver fra flere registreringstjenester, og hver identiteter kan have tilknyttet forskellige akkreditiver fra forskellige akkreditivudstedere. For tjenesterne betyder det, at de kun skal have forbindelse til en identitetsbroker, som så håndterer forbindelsen til forskellige registreringstjenester og akkreditivudstedere. Tjenesteudbyder behøver således ikke have kendskab til de enkelte registreringstjenester og akkreditivudstedere, men skal blot definere en politik for et ønsket veldefineret sikringsniveau.</p>
   <p>Anvendelse af en broker-baseret arkitektur åbner desuden mulighed for, at tjenesteudbydere kan få mere relevante og branchespecifikke attributter for den konkrete kontekst, uden at registreringstjenester og akkreditivudstedere skal akkumulere en lang række informationer om brugerne. Dette kendes allerede i dag fra sundhedssektoren, hvor SOSI STS’erne fungerer som brokere og tilfører information om brugerne fra eksempelvis Sundhedsstyrelsens autorisationsregister.</p>
   <p>Det er langt fra altid, at en rettighedstjeneste eller tjenesteudbyder har brug for entydigt at kende identifikation af brugeren/serviceaftageren for at kunne afgøre dennes adgang til en service. Ved et køb af billet til bus eller tog er der, som tidligere nævnt, et behov for at levere et bevis for betaling, men ikke nødvendigvis for kundens identitet. Et andet eksempel er løsninger, der blot har brug for at vide, om brugeren er myndig (alder>18) eller vedkommendes bopælskommune. Her BØR login-tjenesten/identitetsbrokeren nøjes med at sende relevante attributter videre til tjenesten og ikke data, der afslører brugerens identitet. Dette princip kaldes ofte for ”minimal disclosure” (dataminimeringsprincippet) og er altså et udtryk for, at man af hensyn til brugerens privatliv sender den minimale mængde af information, som tjenesten har behov for. Som eksempel på denne tendens benytter OIOSAML 3.0 profilen som udgangspunkt et tjenesteudbyderspecifikt UUID som <em>identifier</em> for brugeren i den udstedte billet for at forebygge muligheden for, at en bruger kan spores på tværs af tjenester. For tjenester, der har lovhjemmel og relevant behov, kan der dog stadig leveres en CPR-attribut i en OIOSAML 3.0 Assertion.</p>
   <p>I forhold til en infrastruktur med flere registreringstjenester og akkreditivudstedere vil anvendelse af identitetsbrokere skjule kompleksiteten for den enkelte tjenesteudbyder. Anvendelse af en broker vil således minimere påvirkning af tjenesteudbyder ved ændringer i form af teknologiskift hos de eksisterende autentifikationstjenester og etablering af nye autentifikationstjenester.</p>
   <p>Samtidig vil en tjenesteudbyder have mulighed for at indgå aftale med flere brokere med henblik på at sikre størst mulig oppetid.</p>
   <p>Det skal bemærkes, at en registreringstjeneste eller akkreditivudsteder kan operere som identitetsbroker, ligesom en større tjenesteudbyder kan etablere egen broker-funktion. Endvidere kan brokere forbinde sig til andre brokere.</p>
   <figure>
     <img src="billede18.PNG"> 
    <figcaption>Arkitektur med flere registreringstjenester, en akkreditivudsteder og brokere</figcaption>
   </figure>
   <p>En brokerbaseret arkitektur kan indføres fleksibelt og gradvist, hvor tjenesteudbyder kan vælge at understøtte login og signering som en integreret del af egen tjeneste eller benytte en ekstern identitetsbroker. Introduktion af brokere kan baseres på frivillighed og med tiltag, der fremmer overgang til brug af brokere, herunder markedsføring af akkrediterings-/mærkningsordning af brokere. Alternativt kan der stilles krav om, at der benyttes en godkendt broker – fx indeholder National Standard for Identiteters Sikringsniveau (NSIS) krav til identitetsbrokere på forskellige sikringsniveauer. Ved brug af MitID løsningen som afløser NemID bliver det obligatorisk at anvende en broker, idet den enkelte tjenesteudbyder ikke selv får lov at integrere direkte med MitID-kernen.</p>
   <hr>
   <p>Referencearkitekturen beskriver en løst koblet arkitektur, hvor mange forskellige aktører og løsninger skal arbejde sammen om en effektiv og sikker brugerstyring. Dette indebærer en lang række fordele i forhold til fleksibilitet, arbejdsdeling mv., men gør det også mere kompliceret at få et overblik over det samlede sikkerhedsniveau. Som tidligere beskrevet, vil den enkelte tjenesteudbyder være afhængig af en række brugerstyringstjenester (fx udstedere af akkreditiver, logintjenester, identitetsbrokere, attributtjenester osv.). Et sikkerhedsbrud i én brugerstyringstjeneste eller forretningstjeneste kan i værste fald påvirke mange tjenester. Det gælder både i forhold til fortrolighed, integritet og tilgængelighed. Dette er et
udtryk for det velkendte princip om, at en kæde ikke er stærkere end det svageste
led. Omvendt kan man ved at bygge nogle fælles brugerstyringstjenester opnå en
kritisk masse i udviklingen, og derved bygge dem stærkere end en enkelt udbyder
af en forretningstjeneste selv har ressourcer eller viden til at etablere. I NSIS standarden håndteres tillidskæder ved, at det er det svageste led i kæden, som definerer det samlede sikringsniveau. En broker på sikringsniveau NSIS Betydelig kan fx ikke formidle autentifikationer på sikringsniveau NSIS Høj, selvom brugeren måtte kunne autentificere sig på niveau Høj.</p>
   <figure>
     <img src="billede19.PNG"> 
    <figcaption>Sikkerhedskæder i fødereret brugerstyring</figcaption>
   </figure>
   <p>I en løst koblet og distribueret arkitektur er det derfor nødvendigt med fælles
rammer for sikkerhed, der definerer roller og ansvar for de forskellige komponenter. Disse spilleregler er grundlaget for tilliden mellem parterne i arkitekturen og sikrer, at der ikke falder noget mellem to stole.</p>
   <p>For <em>brugerstyringstjenester</em> som fx registreringstjenester, akkreditivudstedere, logintjenester/identitetsbrokere opstiller National Standard for Identiteters Sikringsniveau (NSIS) rammeværket en række sikkerhedskrav, knyttet til forskellige sikringsniveauer. Disse definerer et mål for kvaliteten af disse tjenester og har tilknyttet en række forskellige sikkerhedskrav samt krav til revision. For de løsninger, som udbydes fællesoffentligt (herunder NemID/MitID og NemLogin), fører Digitaliseringsstyrelsen endvidere et løbende tilsyn med leverandørerne og følger op på løsningernes sikkerhedsniveau.</p>
   <p>For <em>forretningstjenester</em> er det udgangspunktet, at myndighederne ud fra en risikovurdering selv skal beslutte deres sikkerhedsniveau, hvilket også ligger i rollen som dataansvarlig i persondataloven. En sådan risikovurdering kan med fordel tage udgangspunkt i metodikken, defineret i ISO/IEC 27005, og styringen af informationssikkerhed kan med fordel tage afsæt i ISO/IEC 27001-standarden. Behandler forretningstjenesten personoplysninger og indebærer behandlingen sandsynligvis en høj risiko for fysiske personers rettigheder og frihedsrettigheder, er der tillige behov for gennemførelse af en konsekvensanalyse vedrørende databeskyttelse (også kaldet <em>Privacy Impact Assessment</em>, PIA). Databeskyttelsesforordningen fra EU (GDPR) stiller krav til indholdet af en sådan vurdering (Artikel 35), samt hvornår Datatilsynet skal konsulteres. En skabelon til formålet kan findes på Digitaliseringsstyrelsens hjemmeside(http://www.digst.dk/informationssikkerhed/Konsekvensvurdering-for-privatlivet). En sådan konsekvensanalyse kan identificere behov for yderligere sikkerhedsforanstaltninger, der skal implementeres i tjenesten.</p>
   <p>Både risikovurdering og PIA kan afdække krav til sikringsniveauet for de brugerstyringstjenester, som forretningstjenester benytter sig af – fx at brugerne skal autentificeres i henhold til et bestemt sikringsniveau i henhold til NSIS-standarden.</p>
   <p>Derudover kan der i en fødereret infrastruktur være behov for at have fokus særligt på tværgående aspekter, hvor kompromittering af én tjeneste kan påvirke sikkerheden i en anden tjeneste:</p>
   <ul>
    <li data-md>
     <p>Når tjenester udstiller attributter eller andre stamdata, som bruges af andre tjenester til at træffe beslutning om afgørelser eller adgange, er det essentielt at afklare afhængigheder og forudsætninger. Et eksempel kunne være, at sårbarheder i et kildesystem kunne udnyttes til at få adgang til andre systemer (fx at falske data, plantet i et pasregister, udnyttes til at skaffe en identitet i en anden persons navn). Her er det relevant at foretage en tværgående risikovurdering og på forhånd klarlægge kvalitetskrav til de data, der anvendes, således at integriteten af de samlede processer bevares.</p>
    <li data-md>
     <p>Ved servicekald mellem tjenester, der indgår i en samlet forretningsproces, kan der være behov for at etablere og udveksle korrelations-ID’er, således at det bliver muligt ved brug af logfiler at efterforske hændelsesforløb på tværs af tjenester. Hvis hver tjeneste kun ser en lille delmængde af et hændelsesforløb, kan det være vanskeligt at opdage svindel.</p>
    <li data-md>
     <p>Hvis en tjeneste er afhængig af en anden tjeneste for kunne fungere, kan manglende tilgængelighed, fx som følge af DDoS-angreb, give kaskadeeffekter på tværs af infrastrukturen.</p>
    <li data-md>
     <p>Hvis sikkerheden i en tjeneste er afhængig af kontrolmiljøet på slutbrugerens enhed (fx en mobil enhed), kan der være særlige afhængigheder til den part, der udleverer/kontroller slutbrugerenhederne.</p>
    <li data-md>
     <p>Hvis en tjenesteudbyder undlader at implementere logout i tjenesten, betyder det, at en person med adgang til en brugers udstyr kan udnytte en session til at tilgå denne eller en anden tjeneste og fx få adgang til eller ændre data i tjenester og i registreringer vedrørende personen.</p>
   </ul>
   <blockquote>
    <p>!<a href="logo.png"></a> Der er følgende krav til fællesoffentlige brugerstyringstjenester og forretningstjenester i den fællesoffentlige føderation. Dette er begrundet i standarder i konteksten for brugerstyring: ISO/IEC 27001, ISO/IEC 27005, EU’s General Data Protection Regulation (GDPR) og den danske persondatalov:</p>
   </blockquote>
   <ul>
    <li data-md>
     <p>Tjenesteudbyder SKAL styre sikkerheden i egen tjeneste i forhold til fortrolighed, integritet og tilgængelighed.</p>
    <li data-md>
     <p>Tjenesteudbyder SKAL sikre, at udveksling af data (indgående og udgående) sker med tilstrækkelig sikkerhed.</p>
    <li data-md>
     <p>Tjenesteudbyder SKAL gennemføre risikovurderinger af, hvordan tjenestens placering i føderationen påvirker tjenestens sikkerhed – og hvordan tjenesten påvirker andre tjenesters sikkerhed og gennemføre de nødvendige tiltag.</p>
    <li data-md>
     <p>Tjenesteudbyder SKAL i relevant omfang informere andre aktører i føderationen om risikovurderinger og sikkerhedshændelser. Ovenstående regler SKAL følges af brugerstyringstjenester og forretningstjenester i andre føderationer.</p>
   </ul>
   <h3 class="heading settled" data-level="5.2" id="handleplan-projektliggrelse"><span class="secno">5.2. </span><span class="content">Handleplan? Projektliggørelse?</span><a class="self-link" href="#handleplan-projektliggrelse"></a></h3>
   <h3 class="heading settled" data-level="5.3" id="registrering-af-identiteter"><span class="secno">5.3. </span><span class="content">Registrering af identiteter</span><a class="self-link" href="#registrering-af-identiteter"></a></h3>
   <p>Som tidligere beskrevet kan processer i forbindelse med at registrere identitet gennemføres på forskellige måder og med forskellig sikkerhed for sammenhæng mellem elektronisk identitet og en fysisk person eller anden entitet. Kravene på forskellige sikringsniveauer <em>(Levels of Assurance)</em> beskrives i et ”trust framework”, således at modtageren af en identitet kan matche dette mod deres risikoniveauer.</p>
   <h3 class="heading settled" data-level="5.4" id="standarder-for-registrering-af-identiteter"><span class="secno">5.4. </span><span class="content">Standarder for registrering af identiteter</span><a class="self-link" href="#standarder-for-registrering-af-identiteter"></a></h3>
   <p>Der findes en lang forskellige og ukoordinerede mekanismer til registrering og navngivning af elektroniske identiteter. Hvis behovet for en mere sammenhængende infrastruktur skal understøttes, skal der ske en højere grad af standardisering under hensyntagen til privatlivsbeskyttelse.</p>
   <p>I referencearkitekturen for fællesoffentlig brugerstyring er National Standard for Identiteters Sikringsniveau (NSIS) standarden fra Digitaliseringsstyrelsen den fælles referenceramme, der beskriver krav til de forskellige sikringsniveauer. Det skal bidrage til at sikre, at identiteterne er registreret med så høj kvalitet, at risiko for misbrug af identiteter (herunder identitetstyveri) mindskes.</p>
   <blockquote>
    <p>!<a href="logo.png"></a> Brug af National Standard for Identiteters Sikringsniveau (NSIS) SKAL efterkommes i fællesoffentlige løsninger og løsninger, der kommunikerer mellem offentlige sektorer, og BØR efterkommes af løsninger i offentlige sektorer.
En identitetsløsning BØR fastlægge et krævet NSIS-sikringsniveau ”Begrænset”, ”Lav”, ”Betydelig” eller ”Høj” i forhold til anvendte akkreditiver og den samlede livscyklus. Dette muliggør en lettere integration mellem systemer, idet sikringsniveauer er umiddelbart sammenlignelige.</p>
   </blockquote>
   <p>Der vurderes ikke behov for yderligere rammesætning om registreringsprocesser.
Tværtimod er det hensigten i NSIS at åbne for et marked, hvor innovation og kreative løsninger kan opstå, blot de opfylder krav til de sikringsniveauer, de påberåber sig, og at udbyderne af brugerstyringstjenester påtager sig det ansvar, der er defineret i NSIS.</p>
   <p>Der arbejdes fællesoffentligt med, hvordan der i praksis kan opnås de sikringsniveauer for registrering, som indgår i NSIS. Det sker i arbejdet med valide identiteter.</p>
   <blockquote>
    <p>!<a href="logo.png"></a> Ved udstedelse af certifikater BØR semantik fra ETSI EN 319 412-1 anvendes, og det skal overvejes, om navngivning af brugere med fordel KAN genbruge denne semantik, også uden for en certifikatkontekst. Dette gælder særligt i de situationer, hvor brugere skal kunne tilbydes certifikater til signering, hvorved navngivning er ens for en indledende autentifikation og den efterfølgende signering. Dansk Standard DS 844 er en alternativ standard for navngivning i certifikater. Denne SKAL FORLADES i nye løsninger, da den ikke i tilstrækkelig grad er fremtidssikret i en international sammenhæng.</p>
   </blockquote>
   <h3 class="heading settled" data-level="5.5" id="akkreditiver"><span class="secno">5.5. </span><span class="content">Akkreditiver</span><a class="self-link" href="#akkreditiver"></a></h3>
   <p>Det væsentligste arkitekturprincip for akkreditiver er, at de er beskrevet på et sikringsniveau i henhold til National Standard for Identiteters Sikringsniveau (NSIS), og at de ikke er tæt bundet til brug i én forretningstjeneste, men gennem en interoperabel sikkerhedsinfrastruktur, som principielt kan anvendes på tværs af alle tjenester. Sagt på en anden måde: Integrationen mellem en forretningstjeneste og et akkreditiv BØR ske via en mellemliggende logintjeneste/identitetsbroker for løsninger, der kommunikerer mellem offentlige sektorer.</p>
   <p>De ovennævnte arkitekturprincipper sikrer en løs kobling og fleksibilitet, der muliggør innovation som fx ibrugtagning af biometriske akkreditiver, uden at alle forretningstjenesterne skal skrives om. Desuden opnås en hensigtsmæssig arbejdsdeling, hvor den enkelte forretningstjeneste ikke behøver specialistviden om identitetssikring og sikker håndtering af akkreditiver.</p>
   <p>I referencearkitekturen er det centrale, at flere registreringstjenester og akkreditivudstedere, leveret af både offentlige og private aktører, kan sameksistere i det digitale økosystem, og at forretningstjenester ikke bør være tæt forbundet til en bestemt registreringstjeneste og en bestemt akkreditivudsteder, men kan acceptere adgang for brugere, uanset hvem der har registreret identiteten eller udstedt et akkreditiv. En forretningstjeneste skal således primært forholde sig til, om identiteten er autentificeret på det krævede sikringsniveau, om udstederen af adgangsbilletten er en kendt brugerstyringstjeneste på dette niveau (som led i NSIS vil Digitaliseringsstyrelsen publicere anmeldte tillidstjenester på sin hjemmeside.) og inden for den aktuelle føderation, samt at brugeren i øvrigt opfylder adgangskravene (fx er tildelt adgangsgivende roller til tjenesten).</p>
   <blockquote>
    <p>!<a href="logo.png"></a> Af hensyn til forsyningssikkerheden og grundlaget for digitaliseringen SKAL det offentlige etablere mindst en generel registreringstjeneste og en generel akkreditivudsteder i økosystemet – samtidig med at der er åbnet for alternative løsninger.</p>
   </blockquote>
   <p>Med National Standard for Identiteters Sikringsniveau (NSIS) som tillidsramme og med eksistensen af standarder for attributter og protokoller vurderes det, at rammebetingelserne herfor er til stede.</p>
   <p>Der findes dog huller i landskabet af registreringstjenester og akkreditivtjenester – særligt for børn og unge under 13/15 år, som p.t. ikke har nogen sikre id-løsninger (på NSIS sikringsniveau Betydelig). Der findes et initiativ i Digitaliseringsstrategien, som skal analysere mulighederne for sikre id-løsninger til børn. I forbindelse med implementering af en kommende løsning vil det være relevant, at denne udstilles gennem NemLog-in, UNI-Login eller andre identitetsbrokere.</p>
   <blockquote>
    <p>!<a href="logo.png"></a> Understøttelse af notificerede eID-løsninger fra andre EU-lande SKAL ske gennem national eID-Gateway, der stilles til rådighed af Digitaliseringsstyrelsen. Løsninger, der skal servicere andre EU-borgere, SKAL afsøge muligheden for at anvende eID-Gateway’en til dette formål.</p>
   </blockquote>
   <h3 class="heading settled" data-level="5.6" id="attributter"><span class="secno">5.6. </span><span class="content">Attributter</span><a class="self-link" href="#attributter"></a></h3>
   <p>Som tidligere nævnt, spiller attributter en vigtig rolle i brugerstyringen, dels som grundlag for beskrivelse af brugerne og deres kontekst, dels som grundlag for håndhævelse af adgangskontrol.</p>
   <p>Nedenfor er givet eksempler på forskellige, vigtige kategorier af såvel identitetsattributter som beskrivende attributter:</p>
   <ul>
    <li data-md>
     <p>Identitetsattributter, der er specifikke karakteristika ved den identiteten (fx navn, adresse, CPR-nummer).</p>
    <li data-md>
     <p>Andre attributter om identiteten (fødselsdag, øjenfarve, biometri).</p>
    <li data-md>
     <p>Tildelte/udstedte identifikationsnumre/registreringsnøgler (fx UUID, CVR-nummer, PID-, RID- eller FID-numre) eller tjenestespecifikke pseudonymer.</p>
    <li data-md>
     <p>Attributter, der beskriver relationer (repræsenterer virksomhed <em>xyz</em>).</p>
    <li data-md>
     <p>Rettighedsrelevante attributter (roller, rettigheder eller indhold af dataafgrænsninger, autorisation af læge/sygeplejerske/o.m.a for sundhedsprofessionelle).</p>
    <li data-md>
     <p>Kontekstafhængige attributter for en autentifikation (IP-adresse, devicetype, tidspunkt for login).</p>
    <li data-md>
     <p>Fuldmagter eller samtykker udtrykt som attributter.</p>
   </ul>
   <p>Nogle attributter fastlægges i forbindelse med den indledende identitetsregistrering, mens andre etableres på andre tidspunkter af andre end en registreringstjeneste – eksempelvis i forbindelse med, at en brugeradministrator tildeler rettigheder, eller en attributtjeneste gør det på vegne af en føderation.</p>
   <p>Der er vigtigt, at den fulde livscyklus for attributter håndteres, idet de kan ændre sig over tid. Det skal med andre ord være muligt dynamisk at tilføje attributter eller ændre deres værdier. Historisk har det eksempelvis vist sig problematisk at anvende X.509-certifikater til attributformidling, fordi et certifikat ikke kan ændres – og derfor skal der udstedes et nyt, hvis de underliggende attributter ændres.</p>
   <p>I forbindelse med adgangskontrol af attributter i forretningstjenester er det vigtigt at forholde sig til attributternes kvalitet. Dette gælder særligt, når attributter
anvendes som grundlag for beslutninger om adgang til følsomme data. I dag er
der kun fælles rammer for visse attributters kvalitet – fx CPR-nummeret, CVR-numre eller de identitetsattributter, der håndteres gennem sikringsniveauerne i
National Standard for Identiteters Sikringsniveau (NSIS). Da mange attributter sædvanligvis er stabile over tid, er det ofte tilstrækkeligt at kende kvaliteten af attributter ved en tjenestes etablering og ved dialog med attributtjenesten at sikre sig, at der informeres ved ændringer i kvaliteten.</p>
   <blockquote>
    <p>!<a href="logo.png"></a> Attributtjenester BØR udstille deklaration af kvaliteten af attributter, således at tjenester, der
anvender attributter, har den nødvendige information om kvalitet.</p>
    <blockquote>
     <p>Fællesoffentlige brugerstyringstjenester og forretningstjenester i fællesoffentlige føderationer,
der anvender attributter, SKAL vurdere, om kvaliteten af attributter svarer til tjenestens behov.</p>
    </blockquote>
   </blockquote>
   <p>I det fremadrettede arbejde med fællesoffentlig brugerstyring er der behov for at
analysere videre i forhold til, på hvilke områder der er behov for fælles standarder for attributters kvalitet. Attributter defineres ofte inden for en bestemt sektor, men der kunne fællesoffentligt godt være mening i at specificere fælles mekanismer til at udtrykke og formidle kvalitetsinformation, så dette kan udveksles på en interoperabel måde.</p>
   <p>Forskellige forretningstjenester har behov for at <em>modtage</em> bestemte attributter for
at kunne fungere, mens forskellige login-tjenester/identitetsbrokere og attributtjenester kan <em>levere</em> forskellige sæt af attributter for bestemte identiteter. Disse sæt af attributter kan beskrives eksplicit som en del af snitfladen, så sikkerhedsinfrastrukturen kan foretage en automatisk orkestrering.</p>
   <p>Eksempelvis kan en identitetsbroker evaluere tjenestens attributbehov og herefter kontakte et antal andre login-tjenester/identitetsbrokere og supplerende attributtjenester, som tilsammen kan levere de ønskede attributter, hvorefter brokeren udsteder en samlet adgangsbillet mod tjenesten med foreningsmængden af
attributter.</p>
   <p>I den nuværende fællesoffentlige brugerstyringsinfrastruktur er der en begrænset
dynamik i orkestreringen af attributter, og det er fx ikke direkte muligt at tilkoble
en ny ekstern attributtjeneste til NemLog-in (kræver udvikling). Det kan derfor i det videre arbejde være relevant at se på mulighederne for en mere dynamisk håndtering af attributter, som følger ovennævnte arkitekturprincipper. Desuden kan det være relevant at give personbrugerne transparens og medejerskab for
deres attributter, fx ved at etablere en brugerprofilside på NemLog-in eller borger.dk, hvor brugerne kan se (og for visse indtaste/rette) attributter samt styre præferencer for deling af attributter mellem tjenester.</p>
   <p>Endelig er der en fællesoffentlig udfordring i håndtering af CPR-nummerattributten. Mange  forretningstjenester har en hård binding til dennes nuværende form, hvilket gør det vanskeligt at skifte den ud, grundet det kommende udløb af numre. I den forbindelse definerer OIOSAML 3.0 profilen i stedet brug af CPR UUID’er, således at tjenester kan påbegynde migrering til disse.</p>
   <blockquote>
    <p>!<a href="logo.png"></a> Nye forretningstjenester (og moderniseringer af eksisterende) tjenester, der anvender fællesoffentlige løsninger, BØR benytte et design, hvor CPR-nummeret kan skifte form, uden at tjenestens forretningslogik bryder sammen.</p>
   </blockquote>
   <h3 class="heading settled" data-level="5.7" id="brugerkataloger"><span class="secno">5.7. </span><span class="content">Brugerkataloger</span><a class="self-link" href="#brugerkataloger"></a></h3>
   <p>Et brugerkatalog indeholder informationer om et sæt af brugeridentiteter (evt. både personbrugere og tjenestekonsumenter.), typisk i form af attributter og i mange tilfælde også information til brug for validering af akkreditiver for en brugerkonto. Et velkendt eksempel er <em>LDAP Directories</em> (som fx Active Directory), der både udstiller services til brugerautentifikation, til at hente attributter, og som har en veldefineret administrationsstruktur.</p>
   <p>Brugerkataloger etableres i mange kontekster som fx:</p>
   <ul>
    <li data-md>
     <p>Et brugerkatalog til en bestemt applikation (applikationens brugerdatabase).</p>
    <li data-md>
     <p>Et brugerkatalog for en organisation eller virksomhed.</p>
    <li data-md>
     <p>Brugerkataloger knyttet til et bestemt domæne (fx som i UNI•Login).</p>
    <li data-md>
     <p>Fællesoffentlige brugerkataloger (fx brugerdatabasen i NemLogin.</p>
   </ul>
   <p>Traditionelt har <em>enterprise directories</em> været en del af centralnervesystemet i større virksomheders systeminfrastrukturer, og i de senere år er der opstået en stigende tendens til at etablere brugerkataloger i skyen med henblik på at understøtte økosystemet af cloud-applikationer.</p>
   <p>I referencearkitekturen indgår brugerkataloger ikke som selvstændige tjenester,
men de udstilles gennem veldefinerede snitflader som logintjenester/identitetsbrokere eller attributtjenester med henblik på at etablere den ønskede løse kobling. Brugerkataloger opfattes med andre ord som en privat implementering af disse typer af tjenester, og der bør ikke i udgangspunktet skabes tætte koblinger til brugerkataloger gennem brug af deres leverandørspecifikke snitflader. En tydelig tendens mod den mere løst koblede model kan observeres med Active Directory, hvor man for år tilbage ofte koblede organisationer sammen via proprietære mekanismer, der kunne forbinde AD’er. I dag anvendes
i langt højere grad <em>Federation Services,</em> hvor sammenkoblingen sker via føderationsprotokoller som SAML, OpenID Connect mv.</p>
   <p>Referencearkitekturen kommer ikke med specifikke anbefalinger til, hvilke brugerkataloger der skal etableres – men fokuserer hovedsageligt på, hvordan de udstilles. Behov for brugerkataloger vil således i høj grad afhænge af lokale forhold, herunder behov for organiseringen af brugeradministration.</p>
   <p>Som en god praksis (og som det fremgår af Princip: Administration af brugere
flyttes så vidt muligt ud af fagapplikationer) bør brugere i en organisation i udgangspunktet oprettes i så få brugerkataloger som muligt med henblik på at effektivisere brugeradministrationen og sikre et centralt overblik. Dette gælder løsninger, der finansieres og fungerer inden for den offentlige sektor.</p>
   <p>Som eksempel på mitigering af problemstillingen med mange, adskilte brugerkataloger (siloer),
etablerer mange organisationer såkaldte Identity Management-løsninger, som kan
skabe sammenhæng mellem mange brugerkataloger gennem processer, teknisk
provisionering og adapters. Herved kan man oprette, administrere og nedlægge
brugere centralt og automatisk få de nødvendige opdateringer kommunikeret til
applikationer og infrastruktur. Dette er dog i mange sammenhænge udtryk for
applikationernes manglende modenhed inden for brugerstyring (de fastholder et
lokalt brugerkatalog som deres eneste verdensbillede), og løsningen med provisionering og applikationsspecifikke adapters fastholder den tætte binding frem for
at løse det underliggende problem og skabe en åben, løst koblet arkitektur.</p>
   <p>I den fællesoffentlige brugerstyring findes et centralt brugerkatalog for virksomheder i form af NemLog-in/Brugeradministration, der i Nemlog-in3 erstattes med en samlet komponent til erhvervsidentitetsadministration (EIA). Hensigten med dette er at garantere danske virksomheder adgang til mindst et brugerkatalog, da særligt mindre virksomheder ikke kan forventes selv at kunne etablere en sådan infrastruktur. Med NemLog-in3 får større virksomheder kan vælge at bruge deres eget lokale brugerkatalog, også i forbindelse med administration af adgang til offentlige løsninger.</p>
   <h3 class="heading settled" data-level="5.8" id="authentifikation"><span class="secno">5.8. </span><span class="content">Authentifikation</span><a class="self-link" href="#authentifikation"></a></h3>
    Autentifikation er de processer, hvor en bruger anvender sine akkreditiver, og
hvor en autentifikationstjeneste (ved login) dels garanterer, at de fremviste akkreditiver tilhører den identitet, de er udstedt til, dels kontrollerer, hvilke sikringsniveauer registrering og akkreditivudstedelse er kendetegnet ved. Det aktuelle sikringsniveau er altid det laveste af de to konstaterede sikringsniveauer. 
   <p>Det centrale i referencearkitekturen i forhold til autentifikation er dels at fastlægge standarder for overførsel af autentificerede identiteter til en tjenesteudbyder og mellem autentifikationstjenester, login-tjenester/brokere og forretningstjenester, dels at autentifikationen kan være en del af en login-tjeneste/identitetsbroker.</p>
   <h3 class="heading settled" data-level="5.9" id="standarder-for-overfrsel-af-autentificerede-brugere"><span class="secno">5.9. </span><span class="content">Standarder for overførsel af autentificerede brugere</span><a class="self-link" href="#standarder-for-overfrsel-af-autentificerede-brugere"></a></h3>
   <blockquote>
    <p>!<a href="logo.png"></a> I dag anvender NemID XMLDSig i forbindelse med autentifikation, hvor særligt det indlejrede OCES-certifikat er kilde til attributter om brugeren. XMLDSig BØR FORLADES fremadrettet og ikke danne grundlag for en fødereret løsning, idet der findes protokoller, der i højere grad er velegnede til dette formål.</p>
   </blockquote>
   <p>NemLog-in anvender den fællesoffentlige OIOSAML-profil af SAML 2.0-
standarden til overførsel af data om autentificerede brugere til tjenesteudbydere,
som er tilsluttet NemLog-in. Til brug i NemLog-in3 er profilen moderniseret til versio 3.0. Profilen understøtter scenariet, hvor en personbruger via en browser logger på en webapplikation. Til repræsentation af roller og rettigheder i SAML Assertions benyttes søsterprofilen OIO Basic Privilege Profile. Ud over NemLog-in er OIOSAML og OIO Basic Privilege Profile grundlaget for en række løsninger i specifikke domæner som fx systemerne til adgangsstyring i den fælleskommunale rammearkitektur. Hensigten med OIOSAML er at
sikre interoperabilitet gennem fastlåsning af visse valg i SAML – men samtidig
åbne for, at specifikke sektorer kan definere deres egne underprofiler ved fx at
definere domænespecifikke attributter.</p>
   <blockquote>
    <p>!<a href="logo.png"></a> OIOSAML og OIO Basic Privilege Profile har status af anbefalede fællesoffentlige standarder og
BØR som minimum følges, når der er behov for håndtering af eksterne brugere i webapplikationer. Dette gælder for fællesoffentlige løsninger og tjenester, der anvender fællesoffentlige
løsninger.</p>
   </blockquote>
   <p>Der er tale om modne standarder med en stor udbredelse i den offentlige sektor.
Her kan det bemærkes, at OIOSAML specificerer udvekslingsmekanismen (protokollen), men er åben for tilføjelse af sektorspecifikke attributter. Et eksempel på dette er sundhedsområdets underprofiler.</p>
   <p>Som supplement til OIOSAML findes OpenID Connect-standarden samt OAuth 2.0, der begge er internationale, åbne standarder med en vis markedsudbredelse. OpenID Connect kan løse de samme use cases som SAML 2.0, men benytter mere moderne teknologier, som bl.a. er velegnede i forbindelse med apps på mobile enheder. Der findes få fællesoffentlige profiler af OpenID Connect og OAuth 2.0 - bl.a. OIO IDWS REST profilen. Det skal endvidere bemærkes, at en brugerautentifikation i disse standarder kan anvende SAML, så derfor kan eksisterende løsninger sameksistere (indpakkes i) de nye standarder. OpenID Connect har status af kommende standard, som på sigt forventes at supplere eller tage over efter SAML.</p>
   <blockquote>
    <p>!<a href="logo.png"></a> For fællesoffentlig infrastruktur BØR standarden OpenID Connect på kort til mellemlangt sigt tilbydes som et supplement til SAML 2.0 services, således at de forretningstjenester, der har behov for det, kan udnytte de nye muligheder – men uden at alle tvinges til det.</p>
   </blockquote>
   <p>Indtil der er etableret fællesoffentlige profiler af OpenID Connect, er der dog en vis risiko for, at forskellige parters implementeringer ikke vil være interoperable eller have samme sikkerhedsniveau, hvilket kan give udfordringer i tværgående sammenhænge. OpenID Connect er en profil af OAuth 2.0, og denne profil <em>anbefales</em> i stedet for brug af den rene OAuth 2.0-standard, da OpenID Connect i højere grad er kompatibel med referencearkitekturens principper om føderering.</p>
   <p>Herudover kan det nævnes, at Microsoft og IBM har udviklet hhv. UProve og IdentityMixer, som er protokoller med særlige privacy-egenskaber. Anvendelse af disse teknologier er beskrevet i diskussionspapiret ”Nye Digitale Sikkerhedsmodeller”(https://digitaliser.dk/resource/781482)  fra IT- og Telestyrelsen som et alternativt og innovativt bud på, hvordan en sikkerhedsarkitektur kan designes. Ingen af disse teknologier har endnu vundet markedsudbredelse (ikke engang i de respektive leverandørers egne produkter), og de BØR derfor endnu IKKE anvendes til andet end specialsituationer, som ikke kan løses med andre mere mainstream teknologier.</p>
   <p>Kantara har defineret en protokol for administration af rettigheder kaldet User Managed Access (UMA). Denne har støtte fra en lang række internationale aktører (bl.a. Google), men har endnu ikke vundet markedsudbredelse. Ud fra en modenhedsbetragtning er UMA endnu ikke en anbefalet standard, men blot en kommende standard, som bør følges tæt i den fællesoffentlige brugerstyring. I givet fald er UMA interessant som en model for at give slutbrugerne kontrol med adgangen til deres ressourcer, og den bør derfor i de kommende år overvejes i forbindelse med løsninger til fuldmagter og samtykker.</p>
   <h3 class="heading settled" data-level="5.10" id="login-tjenester-identitetsbrokere"><span class="secno">5.10. </span><span class="content">Login-tjenester/Identitetsbrokere</span><a class="self-link" href="#login-tjenester-identitetsbrokere"></a></h3>
   <p>En login-tjeneste/identitetsbroker er en tjeneste, der på vegne af forretningstjenester foretager en eller flere brugerstyringstjenester:</p>
   <ul>
    <li data-md>
     <p>Autentifikationen gennem at verificere et akkreditiv evt. ved at kontakte en akkreditivudsteder og herfra modtage en adgangsbillet.</p>
    <li data-md>
     <p>Omveksle adgangsbilletter, udstedt af andre login-tjenester/identitetsbrokere.</p>
    <li data-md>
     <p>Indhente yderligere information om brugeren hos attributtjenester og berige adgangsbilletten.</p>
    <li data-md>
     <p>Evt. danne en session med brugeren med henblik på at etablere Single Sign-On (SSO).</p>
   </ul>
   <p>Der er en række udfordringer, der skal håndteres i forbindelse med anvendelse af identitetsbrokere.</p>
   <p>I forhold til en model, hvor tjenesteudbydere er koblet direkte til registreringstjenester og akkreditivudstedere, er der med introduktion af brokeren endnu en part, der kan påvirke den samlede oppetid for tjenesteudbyderen i negativ retning. Den enkelte tjenesteudbyder kan mitigere risikoen ved at indgå aftale med flere brokere, som illustreret for tjenesteudbyder B i Figur 18 Arkitektur med flere registreringstjenester, en akkreditivudsteder og brokere.</p>
   <p>Der skal etableres en forretningsmodel, der understøtter anvendelse af brokerfunktion. Forretningsmodellen skal gerne gøre det fordelagtigt for registreringstjenester, akkreditivudstedere og brokere at indgå aftaler og skal desuden minimere risikoen for udnyttelse af en dominerende stilling på markedet for hhv. registreringstjenester, akkreditivudstedere og brokere. National Standard for Identiteters Sikringsniveau (NSIS) rammeværket indeholder, som nævnt, krav til sikkerhed og revision for identitetsbrokere, der kan regulere de sikkerhedsmæssige aspekter.</p>
   <blockquote>
    <p>!<a href="logo.png"></a> For at opnå en sikker og omkostningseffektiv integration for tjenesteudbydere og for at understøtte konkurrencen på markedet SKAL en identitetsbroker som minimum udstille en eller flere veldefinerede, åbne og standardiserede interfaces til tjenesteudbydere. Dette kan typisk være et SAML2 (som kendes fra NemLog-in) og/eller OpenID Connect.</p>
    <blockquote>
     <p>Tilsvarende SKAL der stilles veldefinerede interfaces til rådighed for digital signering</p>
    </blockquote>
   </blockquote>
   <p>I den tværoffentlige brugerstyringsinfrastruktur er der fortsat behov for en identitetsbroker. Denne opgave løses i dag af NemLog-in, som er implementeret for det offentlige af Digitaliseringsstyrelsen.</p>
   <blockquote>
    <p>!<a href="logo.png"></a> Der SKAL fortsat være en broker som NemLog-in i den fællesoffentlige brugerstyringsinfrastruktur.</p>
   </blockquote>
   <p>I andre sektorer er der tilsvarende brokere. Det er fx SOSI STS’er i sundhedssektoren, og WAYF i uddannelses- og forskningssektoren. For andre sektorer er bestemmelserne om brokere vejledende.</p>
   <h3 class="heading settled" data-level="5.11" id="standarder-for-kommunikation-mellem-fderationer"><span class="secno">5.11. </span><span class="content">Standarder for kommunikation mellem føderationer</span><a class="self-link" href="#standarder-for-kommunikation-mellem-fderationer"></a></h3>
   <p>Ved kommunikation mellem føderationer (interføderation) benyttes normalt de samme standarder/protokoller som inden for et domæne (fx SAML eller WS Trust), og der vurderes generelt ikke at være væsentlige behov for yderligere standardisering på området. Som eksempel kan nævnes, at EU-føderationen i regi af eIDAS baseres på en SAML-profil.</p>
   <p>De primære udfordringer ved interføderation opstår, når hvert domæne har etableret egne domænespecifikke attributter, domænepolitikker eller har egne sikringsniveauer, der ikke er kompatible. Her kan NSIS (og eIDAS) løse udfordringen med fælles sikringsniveauer, mens der ikke findes generelle standarder for oversættelse mellem domæners attributter og politikker. Et første skridt i den retning kunne være at etablere fælles vokabularer (fx i stil med OIO Organisation og <em>ISA Core Vocabularies</em>(http://ec.europa.eu/isa/ready-to-use-solutions/core-vocabularies_en.htm) som findes i EU-regi). Dette arbejde har dog mere karakter af datastandardisering og semantiske modeller og vurderes ikke nødvendigvis som hjemmehørende under brugerstyringsarbejdet.</p>
   <h3 class="heading settled" data-level="5.12" id="flles-lsning-til-fuldmagter"><span class="secno">5.12. </span><span class="content">Fælles løsning til fuldmagter</span><a class="self-link" href="#flles-lsning-til-fuldmagter"></a></h3>
    En fælles løsning til digitale fuldmagter gør det muligt for borgere og virksomheder at lade en repræsentant agere på deres vegne i en onlinetjeneste. Dette muliggør både at yde god digital service, som tager hensyn til it-svage borgere, og samtidig at fx forvaltningslovens krav til partsrepræsentation kan opfyldes. 
   <p>Hovedfunktionerne i en digital fuldmagtsløsning er:</p>
   <ul>
    <li data-md>
     <p>Funktionalitet til digital afgivelse af fuldmagt gennem et selvbetjeningsforløb (inkl. udpegning af modtager, indhold af fuldmagt, gyldighedsperiode og signering af fuldmagt).</p>
    <li data-md>
     <p>Funktionalitet til at få overblik over afgivne og modtagne fuldmagter.</p>
    <li data-md>
     <p>Funktionalitet til at tilbagekalde en fuldmagt.</p>
    <li data-md>
     <p>Funktionalitet for en tjeneste til at definere de ”fuldmagtspakker”, som beskriver indholdet af de fuldmagter, der kan afgives til tjenesten (fx roller til tjenesten).</p>
    <li data-md>
     <p>Funktionalitet til, at en betroet medarbejder kan indtaste en fuldmagt på vegne af en (it-svag) borger – fx på baggrund af en underskrevet papirblanket.</p>
    <li data-md>
     <p>Integration med identitetsbrokere, så fuldmagter kan indlejres i udstedte adgangsbilletter til tjenester.</p>
    <li data-md>
     <p>API’er for tjenester til at batch-hente fuldmagter.</p>
   </ul>
   <p>En fællesoffentlig løsning er i dag etableret i regi af NemLog-in, kaldet ’Digital Fuldmagt’. Løsningen findes i to forskellige varianter, der er målrettet til forskellige brugssituationer:</p>
   <ul>
    <li data-md>
     <p>En løsning til Erhvervsfuldmagt i NemLog-in/Brugeradministration (FBRS).</p>
    <li data-md>
     <p>En løsning til Borgerfuldmagt (selvstændig brugergrænseflade).</p>
   </ul>
   <p>For begge løsningers vedkommende vil afgivelse af en fuldmagt resultere i, at adgangsbilletten tilhørende identiteten for repræsentanten markeres, at der er delegeret en rettighed (privilegie) fra fuldmagtsgiver. Digitale fuldmagter udmøntes med andre ord som en delegering af rettigheder til en tjeneste, udtrykt som attributter i en adgangsbillet – og dermed benytter de grundlæggende byggeblokke, der allerede findes i arkitekturen. Herved er det væsentligt lettere for tjenester at tage fuldmagtsfunktionaliteten i brug, idet eksisterende grænseflader og integrationer med NemLog-in genanvendes. Konkret består disse i OIOSAML profilen, og delegeringen udtrykkes via OIO Basic Privilege Profile.</p>
   <p>I den nuværende løsning vil en fuldmagt bestå i en delegering af en statisk rolle i en tjeneste, som fx kunne være ”se sag”, ”indsend ansøgning”, ”ansøg om tilskud” etc. Der er p.t. ikke mulighed for at udtrykke dataafgrænsninger i kombination med rollen, hvilket kunne udtrykke mere finkornede og præcise fuldmagter (fx ”se sagsnr. AZ-7291”). Fuldmagtløsningen skal med andre ord også respektere dataafgrænsninger, som beskrevet i afsnittet om adgangskontrol. Dette er dog et identificeret videreudviklingsønske, som forventes at blive reali</p>
   <p>Endelig kan det nævnes, at den nuværende fuldmagtsløsning i regi af NemLog-in hidtil har været frivillig at anvende for offentlige tjenester. Denne referencearkitektur skærper dette til et ”bør”.</p>
   <blockquote>
    <p>!<a href="logo.png"></a> I henhold til arkitekturprincipperne om at genbruge løsninger og anvende fælles standarder BØR fuldmagtsløsningen anvendes for borgerrettede løsninger, der finansieres og fungerer inden for den offentlige sektor.</p>
   </blockquote>
   <p>Dette sikrer genbrug, strømlining af infrastrukturen og ensartet brugeroplevelse og giver borgere og virksomheder mulighed for at få en central indgang til alle deres fuldmagter på tværs af tjenester. Dette vil formentlig indebære, at NemLog-in’s fuldmagtsløsning videreudvikles funktionelt, så behov i langt de fleste sektorer og løsninger kan understøttes.</p>
   <h3 class="heading settled" data-level="5.13" id="brugerstyring-for-tjenestekonsumenter-og-fysiske-apparater-og-sensorer"><span class="secno">5.13. </span><span class="content">Brugerstyring for tjenestekonsumenter og fysiske apparater og sensorer</span><a class="self-link" href="#brugerstyring-for-tjenestekonsumenter-og-fysiske-apparater-og-sensorer"></a></h3>
   <p>Hovedparten af ovenstående beskrivelser adresserer brugerstyring for personbrugere, dvs. fysiske personer eller fysiske personer associeret med en juridisk person. Dette område har været første bastion i arbejdet med fællesoffentlig brugerstyring, men der er i stigende grad behov for at løse de samme udfordringer i forbindelse med systembrugere – altså identiteter, der repræsenterer et it-system, der fx optræder som tjenestekonsument, og som tilhører en organisation eller en person.</p>
   <p>Eksempler på dette kan være server-til-server kommunikation mellem myndigheder, apps eller rige klienter, der kalder et API på vegne af en bruger (fx tilgår brugerens profil og data), softwarerobotter, telemedicinsk udstyr installeret i en patients hjem, der indrapporterer måleværdier, eller fjernstyring af kontrolenheder i energisektoren.</p>
   <p>Dette område er karakteriseret ved en stor diversitet i behov og muligheder – og mangel på fælles standarder og løsninger på tværs. Der eksisterer således standarder og løsninger inden for specifikke områder, men ikke nogen universelle, der dækker bredt. Som eksempel kan nævnes, at National Standard for Identiteters Sikringsniveau (NSIS) standarden ud fra betragtninger om lav modenhed på området eksplicit har fravalgt at behandle identiteter for systemer og enheder og alene fokusere på personbrugere. Nedenfor gives et overblik over de væsentligste løsninger og standarder, og der peges på områder, der bør arbejdes videre med i den videre proces.</p>
   <p>Den klassiske tilgang for sikring af systemkommunikation har været at sikre punkt-til-punkt forbindelser med X.509-certifikater, passwords, SSH-nøgler etc. afhængigt af den valgte kommunikationsprotokol. Det er eksempelvis muligt i den nuværende fællesoffentlige identitetsinfrastruktur at få udstedt OCES-funktionseller virksomhedscertifikater og benytte dem til system-til-system kommunikation ved at udveksle den offentlige nøgle med modparten. Dette giver en simpel og isoleret løsning for en konkret integration, men kan i større infrastrukturer hurtigt lede til et ustruktureret og uhåndterbart virvar af punkt-til-punkt sikringer, som ingen har overblik over, og som er usammenhængende og ufleksibelt i forhold til ændringer i infrastrukturen. Uden videre tiltag og en fælles arkitektur er der derfor stor risiko for fragmentering og mangel på sammenhæng og interoperabilitet.</p>
   <h3 class="heading settled" data-level="5.14" id="standarder-for-identitetsbaserede-webservices"><span class="secno">5.14. </span><span class="content">Standarder for identitetsbaserede webservices</span><a class="self-link" href="#standarder-for-identitetsbaserede-webservices"></a></h3>
    Der er fællesoffentligt specificeret en række standarder, omhandlende <em>identitetsbaserede webservices</em>. Disse standarder kan eksempelvis benyttes, når en tjenestekonsument skal anmode om et <em>security token</em> på vegne af en bruger, som herefter benyttes til at autorisere et kald til en webservice i et andet domæne. Et eksempel kan være, at en bruger logger ind på en webportal, som herefter har brug for at hente data om brugeren hos en anden tjenesteudbyder 
   <blockquote>
    <p>!<a href="logo.png"></a></p>
   </blockquote>
   <p>Profilerne for identitetsbaserede webservices(https://digitaliser.dk/resource/526486) består af:</p>
   <ul>
    <li data-md>
     <p>OIO WS-Trust Profile (profil til at anmode om Security Token).</p>
    <li data-md>
     <p>OIO WS-Trust Deployment Profile (profil til at anmode om Security Token).</p>
    <li data-md>
     <p>OIO Profile for Identity Tokens (profil for token udformning i webservice-kald).</p>
    <li data-md>
     <p>OIO Bootstrap Token Profile (profil for veksling af Web SSO session til token ifm. systemkald).</p>
    <li data-md>
     <p>Liberty Basic SOAP Binding (profil af WS-Security til sikring af SOAP-baserede webservice-kald med SAML Token).</p>
    <li data-md>
     <p>OIO IDWS Rest Profile (profil til sikring af REST-baserede webservice-kald med SAML Token).</p>
   </ul>
   <p>For disse standarder gælder, at de BØR følges ved etablering af system-til-system kommunikation, hvor kaldet sikres med en adgangsbillet (et <em>security token</em>) i henhold til denne referencearkitekturs principper, frem for en punkt-til-punkt integration. Dette gælder for fællesoffentlige løsninger og løsninger, der kommunikerer mellem offentlige sektorer.</p>
   <p>Disse profiler er endvidere suppleret med open sourcereferenceimplementeringer i Java og .Net for at lette udbredelsen.</p>
   <p>Profilerne er i dag implementeret i NemLog-in gennem udstilling af en Security Token Service. Underprofiler af disse er endvidere specificeret inden for sundhedsdomænet samt den fælleskommunale rammearkitektur.</p>
   <p>Sundhedsområdet benytter samme arkitekturprincipper og har defineret egne SAML-baserede standarder, suppleret med egne STS’er deployet i domænet. Det overordnede princip i OIO IDWS-modellen er at anvende en fødereret og token-baseret model for systemer på samme måde som for personbrugere. En Security Token Service udfylder samme rolle for systemer som en SAML Identity Provider udfylder for personer (autentifikation og udstedelse af adgangsbillet). Endvidere kan man med identitetsbaserede webservices opnå, at et system (fx server eller rig klient) kan agere på vegne af en person, der er logget ind på systemet. Dette er fx relevant, når en bruger logger ind på en portal, som herefter har brug for at kontakte en tredje tjeneste for at tilgå brugerens data.</p>
   <p>I grunddataprogrammet har man valgt en fælles, tværgående sikkerhedsmodel, baseret på udstedelse af Security Tokens for de services, der muliggør opdatering af registre. Dette giver en struktureret model på tværs af programmet frem for et virvar af punkt-til-punkt integrationer, baseret på certifikater. Modellen er baseret på, at myndighederne registrerer deres opdateringsservices i NemLog-in med tilhørende roller, og at såkaldte systembrugerklienter kan blive tildelt rettigheder til disse services. Efter tildelingen kan en systembrugerklient anmode NemLogin’s STS om en adgangsbillet til en service, hvor rollerne så vil fremgå af adgangsbilletten.</p>
   <blockquote>
    <p>!<a href="logo.png"></a> Kommunikation til/fra webservices med følsomt indhold, der ønskes sikret med Security Tokens, BØR baseres på profilerne Liberty Basic SOAP Binding (dennes efterfølger OIO IDWS
SOAP Binding) eller OIO IDWS Rest Profile ved ekstern kommunikation over internettet.</p>
   </blockquote>
   <p>På mobile enheder er der ofte behov for at kunne autorisere en app til at kunne agere på brugerens vegne. Der findes endnu ingen fællesoffentlige standarder på dette område, men der tegner sig alligevel en række mønstre og best practices, baseret på anvendelse af OAuth 2.0 samt OpenID Connect standarderne. Det grundlæggende princip i disse er, at brugeren via en mobil browser sendes til en autorisationsserver, hvor brugeren logger ind og bekræfter, at app’en må tilgå brugerens data og ressourcer. Herefter udstedes en adgangsbillet til app’en, som herefter kan anvendes til at autorisere kald til webservices - og såvel app’ens identitet som akkreditiv er adskilt fra brugerens. Her skal bemærkes, at brugerautentifikationen (indlejret i OAuth eller OpenID Connect) sagtens kan være baseret på SAML2.0, hvorfor den eksisterende infrastruktur kan genanvendes. Digitaliseringsstyrelsen har i 2011 udgivet en vejledning til OAuth 2.0 (https://digitaliser.dk/resource/1246357), der viser hvordan standarden kan anvendes. Det ventes endvidere, at der i videreudviklingen af NemLog-in vil blive etableret bedre understøttelse af mobile enheder via andre protokoller end SAML.</p>
   <p>Et eksempel på, hvordan et udbredt mønster for autorisering af en app med OpenID Connect kunne se ud i en fællesoffentlig kontekst, er illustreret nedenfor i Figur :</p>
   <figure>
     <img src="billede23.PNG"> 
    <figcaption>Eksempel på autorisering af en mobil app via OpenID Connect med en indlejret SAMLbrugerautentikation</figcaption>
   </figure>
   <p>Der er identificeret følgende emner til det videre arbejde med fællesoffentlig brugerstyring, hvor identiteten er en tjenestekonsument eller et fysisk apparat eller sensor:</p>
   <ul>
    <li data-md>
     <p>Fællesoffentlige profiler af nye standarder som OAuth 2.0/OpenID Connect og -mønstre for håndtering af apps via disse.</p>
    <li data-md>
     <p>Understøttelse af nye profiler via services i infrastrukturen (primært NemLog-in).</p>
    <li data-md>
     <p>Etablering af brugergrænseflade for brugerne, der giver overblik over, hvilke apps de har autoriseret til hvad (inkl. mulighed for at tilbagetrække autorisation).</p>
    <li data-md>
     <p>Videre analyser i forhold til Internet of Things, herunder om app-modeller kan bruges, eller der skal udvikles separate løsninger for disse enheder.</p>
    <li data-md>
     <p>Videre analyser i forhold til anvendelse af den nuværende PKI-infrastruktur for IoT (herunder FOCES/VOCES-certifikater i særlige profiler, målrettet specifikke sektorer).</p>
   </ul>
   <p>Det skal bemærkes, at visse sektorer har helt specielle krav, der bedst opfyldes med højere grad af decentralisering. Elsektoren baserer eksempelvis den kommende sikring og brugerstyring af enheder på standarderne IEC 61850 og IEC 62351, der anvender punkt-til-punkt forbindelse ved brug af X.509v3. Det kan med rimelighed antages, at resten af forsyningssektoren vil kunne anvende samme model som elsektoren.</p>
   <h3 class="heading settled" data-level="5.15" id="perspektivering"><span class="secno">5.15. </span><span class="content">Perspektivering</span><a class="self-link" href="#perspektivering"></a></h3>
   <h2 class="no-num heading settled" id="bilag"><span class="content">Bilag</span><a class="self-link" href="#bilag"></a></h2>
   <h3 class="heading settled" id="ordliste"><span class="content">Ordliste</span><a class="self-link" href="#ordliste"></a></h3>
   <p>Nedenstående liste forklarer betydningen af de væsentligste ord og begreber, der indgår i den tværoffentlige referencearkitektur for brugerstyring.</p>
   <p>Ord, der er markeret med <em>kursiv</em>, er ord, hvor definitionen kan findes på ordlisten. <dfn data-dfn-type="dfn" data-noexport id="brugerrollerolle-der-udgres-af-en-eller-flere-adgangsrettigheder-til-et-eller-flere-it-systemer-som-en-bloc-tildeles-til-en-bruger-brugerroller-anvendes-til-at-afgre-hvilke-handlinger-en-bruger-m-udfre-i-et-it-system-brugerrollen-fastlgger-de-adgangsrettigheder-som-brugeren-er-tildelt-brugere-tilknyttes-til-roller-og-opnr-adgangsrettigheder-ved-at-vre-rolleindehaver-brugerroller-er-grupperinger-af-adgangsrettigheder-der-er-ikke-ndvendigvis-sammenfald-mellem-brugerroller-og-brugerens-profession-stillingsbetegnelse-mv">Brugerrolle<dfn data-dfn-type="dfn" data-noexport id="rolle-der-udgres-af-en-eller-flere-adgangsrettigheder-til-et-eller-flere-it-systemer-som-en-bloc-tildeles-til-en-bruger-brugerroller-anvendes-til-at-afgre-hvilke-handlinger-en-bruger-m-udfre-i-et-it-system-brugerrollen-fastlgger-de-adgangsrettigheder-som-brugeren-er-tildelt-brugere-tilknyttes-til-roller-og-opnr-adgangsrettigheder-ved-at-vre-rolleindehaver-brugerroller-er-grupperinger-af-adgangsrettigheder-der-er-ikke-ndvendigvis-sammenfald-mellem-brugerroller-og-brugerens-profession-stillingsbetegnelse-mv">Rolle der udgøres af en eller flere <em>adgangsrettigheder</em> til et eller flere it-systemer, som en bloc tildeles til en bruger. Brugerroller anvendes til at afgøre, hvilke handlinger en bruger må udføre i et it-system. Brugerrollen fastlægger de <em>adgangsrettigheder</em>, som brugeren er tildelt. Brugere tilknyttes til roller og opnår <em>adgangsrettigheder</em> ved at være rolleindehaver. Brugerroller er grupperinger af <em>adgangsrettigheder</em>. Der er ikke nødvendigvis sammenfald mellem brugerroller og brugerens profession, stillingsbetegnelse mv.<a class="self-link" href="#rolle-der-udgres-af-en-eller-flere-adgangsrettigheder-til-et-eller-flere-it-systemer-som-en-bloc-tildeles-til-en-bruger-brugerroller-anvendes-til-at-afgre-hvilke-handlinger-en-bruger-m-udfre-i-et-it-system-brugerrollen-fastlgger-de-adgangsrettigheder-som-brugeren-er-tildelt-brugere-tilknyttes-til-roller-og-opnr-adgangsrettigheder-ved-at-vre-rolleindehaver-brugerroller-er-grupperinger-af-adgangsrettigheder-der-er-ikke-ndvendigvis-sammenfald-mellem-brugerroller-og-brugerens-profession-stillingsbetegnelse-mv"></a></dfn><a class="self-link" href="#brugerrollerolle-der-udgres-af-en-eller-flere-adgangsrettigheder-til-et-eller-flere-it-systemer-som-en-bloc-tildeles-til-en-bruger-brugerroller-anvendes-til-at-afgre-hvilke-handlinger-en-bruger-m-udfre-i-et-it-system-brugerrollen-fastlgger-de-adgangsrettigheder-som-brugeren-er-tildelt-brugere-tilknyttes-til-roller-og-opnr-adgangsrettigheder-ved-at-vre-rolleindehaver-brugerroller-er-grupperinger-af-adgangsrettigheder-der-er-ikke-ndvendigvis-sammenfald-mellem-brugerroller-og-brugerens-profession-stillingsbetegnelse-mv"></a></dfn></p>
   <p>| IT- &amp; Telestyrelsen, Begrebsmodel til brugerstyring                                         |</p>
    | Brugerrollerestriktion                                      | En begrænsning som specificerer, hvad en <em>brugerrolle</em> må bruges på. Et typisk eksempel er en såkaldt <em>dataafgrænsning</em>, som angiver hvilke dataobjekter (fx sager) som en given rolle må anvendes på (fx rollen <em>læs sag</em> afgrænset til sag med nummeret <em>xyz</em>'). I RBAC samt OIO Basic Privilege Profile benævnes dette for en <em>constraint</em>.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | IT- &amp; Telestyrelsen, Begrebsmodel til brugerstyring                                         |
| Brugerrolletildeling                                        | Angivelse af de <em>brugerroller</em> som en bruger er tildelt evt. med tilhørende <em>brugerrollerestriktioner</em>. Brugerrolletildeling anvendes til at definere en brugers <em>brugerroller</em> med de begrænsninger (<em>brugerrollerestriktioner</em>), der måtte være i forhold til anvendelsen af brugerrollen. I OIO Basic Privile Profile anvises hvordan brugerens roller kan udtrykkes i et en SAML Assertion.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | IT- &amp; Telestyrelsen, Begrebsmodel til brugerstyring                                         |
| Brugerstyring                                               | Brugerstyring anvendes bredt i denne tværoffentlige strategi og referencearkitektur for brugerstyring. Betegnelsen omfatter både <em>adgangskontrol</em> og administration af identiteter, akkreditiver, attributter og <em>adgangsrettigheder</em>, herunder det der på engelsk betegnes Credential and Identity Management (CIM), Identity Rights Management (IRM), Access Control (AC) og Identity and Access Management (IAM/IdAM). Brugerstyring dækker således opgaver i forbindelse med <em>indrullering, autentificering, autorisation, billetudstedelse, adgangskontrol</em> osv.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                             |
| Certificate Authority (CA)                                  | En betroet enhed, der udsteder <em>certifikater</em> til identificerede og registrerede parter (se også <em>registreringsmyndighed</em>). Opgaverne og ansvarsområderne tilhørende en CA er opdelt i Identity Proofing Service (IPS) og <em>Credential Management Service (CMS)</em>.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                                                             |
| Certifikat                                                  | En elektronisk attest, som angiver certifikatindehaverens offentlige nøgle sammen med supplerende information, og som entydigt knytter den offentlige nøgle til identifikation af certifikatindehaveren. Et certifikat skal signeres af et certificeringscenter (CA), som derved bekræfter certifikatets gyldighed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | OCES certifikatpolitikker                                                                    |
| Certifikatudbyder, Certifikatudsteder, Certificeringscenter | En fysisk eller juridisk person, der er bemyndiget til at generere, udstede og administrere <em>certifikater</em> (jf. <em>identitetsudbyder</em>). Se også <em>Certificate Authority</em>.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | OCEScertifikatpolitikker                                                                    |
| Claim                                                       | Synonym for attribut.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                             |
| Credential                                                  | Synonym for <em>Akkreditiv.</em> |                                                                                             |
| Credential Management Service                               | Service  der varetager udstedelse og vedligeholdelse af akkreditiver gennem hele deres livscyklus.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Fællesoffentlig eID i regionerne - Definition af begreber og termer                         |
| Credential Service Provider (CSR)                           | Se Udsteder af akkreditiv.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                             |
| Delegering                                                  | Omhandler personers adgang til at benytte medhjælp, dvs. under ansvar og efter instruktion og under tilsynspligt uddelegere nogle af den uddelegerendes rettigheder. Karakteristisk for delegering er, at der er tale om en person, der instruerer en anden i at handle på sine vegne. Med delegeringen kan der følge en pligt til at instruere og kontrollere. Der stilles derfor krav om, at man skal kunne se, hvem der handler på hvis vegne ved centrale opslag.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Fællesoffentlig eID i regionerne - Definition af begreber og termer                         |
| Digital identitet                                           | En digital persona repræsenteret (entydigt) ved et sæt af attributter. En entitet kan have mere end en identitet.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Informationsordbogen                                                                        |
| Digital Signatur                                            | Anvendes om første generation af offentlige <em>certifikater</em> til elektronisk service (OCES). Et matematisk skema til at bevise autenticiteten af en digital besked eller dokument. Digitale signaturer dannes ved brug af asymmetrisk kryptering og hashfunktioner. Anvendes ikke synonymt med eSignatur.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Informationsordbogen                                                                        |
| eIDAS                                                       | Electronic identification and trust services. EU-forordningen om elektronisk identifikation og tillidstjenester til brug for elektroniske transaktioner.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | eIDAS                                                                                       |
| Elektronisk Identitet                                  | Se <em>Digital Identitet.</em> |                                                                                             |
| Elektronisk signatur                                        | Data i elektronisk form, der er vedhæftet eller logisk tilknyttet andre data i elektronisk form, og som anvendes af underskriveren til at skrive under med.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | EU 910/2014 Fællesoffentlig eID i regionerne - Definition af begreber og termer             |
| Elektronisk identifikationsmiddel                           | Et elektronisk eller fysisk objekt/genstand, der kan anvendes til at gennemføre en autentifikation af en identitet. Eksempler kan være brugernavn/kodeord, et NemID nøglekort, et certifikat med tilhørende privat nøgle, et SAML token etc. Betegnes også for  Akkreditiv.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | National Standard for Identiteters Sikringsniveauer (NSIS)                                  |
| Elektronisk signaturgenereringssystem                       | Konfigureret software eller hardware, der bruges til at generere en elektronisk signatur.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | EU 910/2014 Fællesoffentlig eID i regionerne - Definition af begreber og termer             |
| ID-tjeneste                                                | En betroet tjeneste, som leverer en eller flere af de processer, som er underlagt krav i (NSIS). Dette kan fx være identitetssikring, udstedelse af elektroniske identifikationsmidler eller drift af en broker. Bemærk, at eIDAS reguleringen bruger det komplementerende begreb ”tillidstjeneste” om tjenester involveret i udstedelse af digitale signaturer/certifikater, validering af certifikaters gyldighed og tidsstempling. Der er intet overlap mellem ID-tjenester i NSIS og tillidstjenester i eIDAS - det er således helt komplementære begreber.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | National Standard for Identiteters Sikringsniveauer (NSIS)                                  |
| Entitet                                                     | En fysisk person eller juridisk enhed, som ønsker adgang til en on-line tjeneste gennem autentifikation med elektroniske identifikationsmidler. En entitet kan have flere elektroniske identiteter – fx kan en fysisk person både have en privatidentitet og flere erhvervsidentiteter. En entitet er noget værende, og kan også være en ting, sensor, app, apparat eller softwarerobot.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | National Standard for Identiteters Sikringsniveauer (NSIS)                                  |
| eSignatur                                                   | eSignatur defineres som data i elektronisk form, der er logisk forbundet med andre elektroniske data, som autentificerer den, der signerer. En ”avanceret” signatur er en eSignatur, der kan identificere den, som signerer. Anvendes primært om begrebet elektronisk underskrift og i begrænset omfang om en specifik elektronisk underskrift. *
   <vi U00022enekontrolU00022. U00022funktionU00022 U00022sole U00026 U00027identitetU00027 U00027principalsU00027U00029. U00028U0002AattributterU0002AU00029 U00028U0201Didentity U00028adU00029 U00028adU00029. U00028adgangsbilletterU00029. U00028brugerU00029 U00028data U00028eller U00028esignaturU0002C U00028f.eks. U00028forretningsU00029tjeneste U00028fx U00028har U00028håndhæverU00029 U00028i U00028idamU00029 U00028identity U00028idpU00029 U00028indkomstU0002C U00028internet U00028kendskab U00028kontrollerU00029 U00028loaU00029U0002C U00028nsisU00029 U00028og U00028omtales U00028pasU0002C U00028personlig U00028pkiU00029U0002A U00028primære U00028på U00028raU00029 U00028security U00028som U00028spiludbydere U00028stsU00029 U00028tuU00029 U00028ukU00029 U00028ved U0002AU00022certifikatholders U0002AU0201Dden U0002Aadgangsbillet.U0002A U0002AadgangspolitikkerU0002A. U0002AadgangsrettighedU0002A U0002AakkreditiverU0002A U0002AakkreditiverU0002A. U0002Aattributter U0002AattributterU0002A U0002AattributterU0002AU0002C U0002AautentificeringU0002A U0002AautentificeringU0002A. U0002Aautentifikationsfaktor.U0002A U0002Aautorisation.U0002A U0002Aavanceret U0002AbrugerrolleU0002A. U0002AcertifikatU0002A U0002AcertifikaterU0002A U0002AcertifikaterU0002A. U0002AcertifikatetU0002A U0002AcontrolU0002AU00029 U0002AeidasU0002A-forordningen. U0002Aelektronisk U0002AentitetU0002A U0002AentitetU0002AU0002C U0002Afoces.U0002A U0002AfocesU0002A="funktions-OCES" U0002AfocesU0002A. U0002AfuldmagtU0002A U0002AfuldmagtU0002A.U00029 U0002AføderationU0002A U0002AidentitetU0002A U0002AidentiteterU0002A U0002Aidentitetsgarant U0002AidentitetsgarantU0002A U0002AidentitetsregisterU0002AU0002C U0002Aidentitetsudbyder.U0002A U0002Aidentity U0002AidpU0002A U0002AinformationssikkerhedspolitikU0002A U0002AmocesU0002A="medarbejder-OCES" U0002AmocesU0002A-certifikatpolitikkenU0002C U0002AmocesU0002C U0002AnøglefilU0002A U0002Aoces="Offentlige" U0002Aprimære U0002Apublic U0002Aregistration U0002AregistreringsmyndighedU0002A U0002AressourcerneU0002A. U0002Asecurity U0002Asignaturadministrator.U0002A U0002AsignaturadministratorU0002A. U0002Asikkerheds U0002Asikkerhedshændelser.U0002A U0002Asts U0002AstsU0002A. U0002AsystemU0002A U0002Atjeneste.U0002A U0002AtjenesteU0002A U0002Atrust U0002AverifikationU0002A U0002Avoces U0002AvocesU0002A="virksomheds-OCES" U0002D U00031-til-1 U00031.4.2 U000318 U00032.0. U00032.3.2.10 U00032014 U00032021. U00032828 U00033. U00037.2.8 U0003910 U0003A U0003Ch3 U0007C U02013 U02013løsninger U0201Ddigital U0201Dlevel U02022 acceptere access across actually adgang adgang. adgangsbilletU0002C adgangskode. adgangspolitik. administration administrative administrator administratorU00029 administreres adskiller af afU0002C afgives afgørelser afhænger afsnit aftaleretligt akkreditiv. akkreditiver akkreditiver. akkreditivudstedelsesprocessen aktivering alle almindeligt alternativt analyse and anden andet andre andres anerkendt angiver angrebU0002C anmodning antal anvende anvendelse anvendelsenU0002C anvender anvendes anvendesU0002C anvisningerU0002C appikationerU0002C applikation arbejdsfunktioner. architecture architectureU0002C art aspekt aspekter assuranceU0201D assuranceU0201DU00029 at attesterer attributter attributter. attributterU00029U0002A. attributterU0002AU0002C attributterU0002C attributterU0003A autenticitetsniveau. autentificere autentificeres autentificeretU0002C autentifikationshandlingenU0002C autentifikationsmodul. autentifikationsområde. autentifikationsprocessen. autentifikationstjeneste autentifikationstjenesteU0002C autentifikationstjenester authentication authority authority.U0002A authorization automatiseret autoriseret autoritativt avanceret baggrund banker baseres baseret bedømmelse begreb begrebU0002C begreber begrebet begrebsmodel behandling behandlingU0201DU0002A. behovU0002C behovet behøver bekræfter benævnes benævnt besiddelse besked beskederU0002C beskedsekvenser beskriver beskyttet beslutninger besluttet bestemmelser bestemmer består betegnelse betingelse betroede betroet bevise billetudsteder bits bl.a. blandt blive borders borgere borgere. borgereU00029. borgerens borgeridentitet borgerrettet borgerservicecentreU00029. bredtU0002C brug bruger brugerU0002C brugeradministration. brugere brugereU0002C brugerens brugeres brugeridentiteter brugerneU0002C brugers brugerstyring brugerstyringU0002C brugerstyringsløsninger bruges bygge både bør california centralt certifikatbaseretU0002C certifikater certifikaterU0002AU0002C certifikatholderen certifikatpolitik code comments control controlU00022 cpr cpr-registret cprU0002C cvr cvr-registret da da.wikipedia.org danid danmarkU0002C danske data data-link-status dataansvarlig datastrukturerU0002C de deaktivering decision defineres defineret definition definitionen dele delprocesser dels delvist den denne der derefter derfor dermed det det. dette digital digitalagenda digitale digitaliseringsstyrelsen digitalt disse dk dog dokument dokumentU0002C dvs. dækker ec.europa.eu efter efterfølgende efterprøves. egenskaber eid eidas eidas-forordningen. eidas. eindkomstU00029 ej. eksempel eksempler eksisterer eksplicitereU0002C electronic elektriske elektronisk elektroniske element eller en en.wikipedia.org enekontrol enforcement enforces engelsk engelske enhedU0002C enheder enhederU0002C enhver enkelte entitetU0002C entiteter entydighed entydigt entydigtU0002C er erU0002C erhverv erhvervU0002C erstattes essentielt et etableres etc. eu eu-projektU0002C f.eks. fagsystem fastlægges fastlæggesU0002C fastsat fastsætter fejlhåndtering fil fjendtlige flere foces focesU0002A for forbindelse fordel forhold forholdU0002C forkortelse form formel formål forretningsgang forretningsmæssigt forretningsprocesser. forretningstjeneste forretningstjenester forskellige forvaltningsloven forvanskning forventes fra framework framework. frameworkU0002A frameworket frameworket. frameworks fremkommet fremmøde fremsatte fremvisning fremviste fuldmagt fuldmagten funktion funktionU0002C fx fysisk fysiske få fælles fællesoffentlig fællesoffentlige føderation føderationen føderationen. følge følgende første garantererU0002C gemmes generation gennemgår gensidig genstand give giver gjort. governance grad graden group groupU0002C grundelementerne gruppe guide guideline gyldigheden gælde gør gøres hacking handle handlinger har harmonisere have haves helbred henhold henviser heraf heraf. herunder hinanden hjælp hold httpU0003A httpsU00029 hvad hvert hvilke hvilken hvis hvor hvordan håndtere håndtering håndteringen hændelserU0002C højere i iU0002C id identificerer identificeret identificeret. identifikation identifikations- identifikationsmidler. identitet identitet. identitetU0002A. identitetU0002C identiteten identiteters identitetsbrokerU0002C identitetsbrokere identitetsgarant identitetspapirerU00029. identitetsregister identitetsregistre identitetsrelaterede identitetssikres identitetssikring identitetssikringen identitetssikringsprocessenU0002C identitetstyveriU0002C identitetsudbyderU0002C identity idp ifm. ift. ikke indbrudU0002C indbyrdes inde indeholde indeholdende indeholder indenfor indestår indføres indhente indhold. indholdU0002C indkomst indkomstU0002C indrullering indrullering. indrulleringU0003A indscannet indtastes indtræffer indvilger indvilliger information informationU0002C informationsordbogen informationssikkerhed informationssikkerheden. informationssikkerhedspolitik informationstyveriU0002C infrastructure infrastructure. infrastrukturenU0002C ingen instruks interagerer. interaktive internettet it- it-ressourcer it-services json-baserede juridisk kaldes kan kantaraU0002C karakteristisk karaktersætU0002C key keyinfrastructure knyttet koblet kodeord komme kommende kommunikationskanaler konsekvenserne kontekstafhængige kontrol kontrollerer korrekt korrektheden krav kræver kunne kvaliteten kørekortU00029. lakesideU0002C lavere ledelsen ledelsenU0002C legitimitet lever leverer leveret linked local login login-faktor login-tjeneste loginU00029 lov. lovgivningsmæssige lra lægeU00029 lægges læses løbet løses løsning løsningen løsninger løsningerU0002C m.v.U0002C man management mange med medarbejder medarbejdere medarbejderidentiteter. medarbejdersignatur mellem mens midtjyllandU0002C mitid mm. mm.. moces modsætning modtage mv. mvU00029 mvU0002C myndig myndighed myndigheder. må målsætningerU0002C national nationalt navn nemid nemidU0002C nemlog-in nemlogin nets netværkU0002C network nistU0002C niveauer niveauerU0002C noget note noteU0002C nsis nsisU0002C nummer nummeret. nuværende nye nøgle nøgle.U00022U0002A nøglefil nøglefile nøglekort nøglekortU00029 nøglekortU00029U0002C nøglekortet objekter oces oces-infrastrukturen. oces-operatør. of offentlig offentlige ofte og også om omU0002C omfangU0002C omfanget omfatter omgivelser omkring op oplysninger oplysningerU0002C oplysningerneU00029 opnå opretholder oprette oprettelseU0002C oprettes oprettet opslag opsætninger. optræde organisation organisationU0002C organisationerU0002C organisations over overblik overfor overholdeU0002C overholdelse overordnede overskue oversættelse part part. partU0002C parter parterneU0002C parters passende pdp pep person person. personU00029 personU0002C persona persondatareguleringen persondatareguleringenU00029 personen personer personligt personoplysninger pid-nummretU0002C pki point policy politik politikkerU0002C portalløsningU0002C praktiserende primære principper privat private procedurer proces procesU0002C processen processer proofingU0002A proofingU0201DU00029 protokol protokol_U00028edbU00029 protokoller provider providerU00029 providers providers. provisionering provisioning provisioningU0002C præmisser. præsenterer public på pågældende påstået påvirker ra rammeU0002C rammer redigeret reference region regionerne registerU0002C registration registre registre. registrerede registrerer registrering registreringsenhed registreringsmyndighedU0002A registreringsmyndighedU0002C relation relationen relationer relationerne relationship relevans relevante repræsentere repræsenteret request requesters ressource resultatet retningslinjer retningslinjerU0002C retransmissionU00029 retter rettighed rettigheder. rettighedsdata rettighedsstyring rolle rolleU0002C roller rules. rummer rådighed række rækkefølge sagt samling samme sammenhængeU0002C samt samtykke samtykke. samtykkeU0002C se secure security seglU0002C sekundære selvU0002C selvbetjeningsløsning. selve selvstændige sendes sendt service service. serviceU00029U0002A. serviceU0002A. serviceaftager services services. services.U0002A serviceudbyder session set side sig sig. signaler signatur signaturU00029. signaturU0002A signaturU0002C signaturU0201D signaturadministrator signaturen signaturer signaturer. signaturerU0002C signaturgenereringsdata signaturord signeret signering sikkerhed sikkerhedU0002C sikkerhedsarkitektur sikkerhedsarkitekturU0002C sikkerhedsdomæne sikkerhedsforanstaltning sikkerhedsforanstaltninger. sikkerhedshændelse sikkerhedsmodeller sikkerhedsmæssige sikkerhedsstandarder sikre sikrer sikrerU0002C sikringsniveau sikringsniveauer sin sine sit situationer skabe skabelse skal sker skærm.U0002A sluttet sole som specificerer specifikation specifikationer. specifikke specifikt spil spillere spiludbydernes sprog. spærreliste spærrelisten. spærrelisten.U00029 ssl standard standarder standardisere stiller stilles stork2 sts styrer styrken står sundhedsdata sundhedsloven sundhedspersoner sundhedsregistre. svarer synomyner synonym syntaks system system. systemU0002C systemer. systemerU0002C systemet systemetU0002C systemetsU00029 systemorienteret systems så såkaldt såkaldte således såledesU0002C sæt talU0002C tekniske teknologi tekst telestyrelsenU0002C termer that the thingsU00029. tidligere tidsmæssig til til. tildeling tilfælde tilgå tilhørende tilhører tilknytning tilknyttet tilladt tillid tillidU0002C tilmeldt tilstrækkelig tilsvarende. tiltag tjekke tjeneste tjenesteU0002C tjenesten tjenesten. tjenestens tjenester. tjenesterU0002C tjenesteudbyder tjenesteudbydere tls tofaktor token tokenU0002A tokens tokensU0002A tokenudsteder tokenudstedere transmissionU0002C tre trust trustservices-and-eid typisk ud udarbejdelse udbyder uden udgangspunkt udpeget udstedelse udstedelseU0002C udsteder udstedt udstedte udstikker udstillet udstyre under underskrift underskrives undgåU0002C user validering varetage variant ved vedkommende. vedligeholdelse vedrørende vedrører vegne vegne. velkendte verificerede verificerer verifikation versionU0002C vi via videregivelse vigtige vil virksomhed. virksomheden virksomheden. virksomheder virksomheders voces vocesU0002A vocesU0002C vægten værdi være w3cU0002C web wiki working xml-baserede ét økonomiske>
    Referenceliste 
    <p>California - Identity and Access Management (IdAM) Reference Architecture (RA), 2014 http://ocio.ca.gov/ea/docs/Identity-and-Access-Management-IdAM-V1.pdf</p>
    <p>Datatilsynet, Flere faktorer i login http://www.datatilsynet.dk/fileadmin/user_upload/dokumenter/Publikationer/ST1.pdf</p>
    <p>eIDAS, EU-forordningen om elektronisk identifikation og tillidstjenester til brug for elektroniske transaktioner http://ec.europa.eu/dgs/connect/en/content/electronic-identification-and-trust-services-eidas-regulatory-environmentand-beyond</p>
    <p>EU 910/2014. Europa-Parlamentets og Rådets forordning (EU) nr. 910/2014 af 23. juli 2014 om elektronisk identifikation og tillidstjenester http://eur-lex.europa.eu/legal-content/DA/TXT/?uri=CELEX:32014R0910</p>
    <p>Fællesoffentlige brugerstyringsløsninger – En analyse af sikkerhedsstandarder og –løsninger http://www.google.dk/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;frm=1&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0CCEQFjAA&amp;url=http%3A%2F%2Fwww.kl.dk%2FImageVaultFiles%2Fid_67589%2Fcf_202%2FBilag_5_-_Udkast_til_rapporten_F-llesoffentlige_br.PDF&amp;ei=LsevVM3yN4iGzAPtILwDA&amp;usg=AFQjCNFV8hOc84wyml5TG5GfHYAv0BvbAw&amp;bvm=bv.83339334,d.bGQ</p>
    <p>Fællesoffentlig eID i regionerne - Definition af begreber og termer http://lionel.lakeside.dk/twiki/bin/view/Main/EIDBegrebsListe</p>
    <p>Informationsordbogen www.informationsordbogen.dk</p>
    <p>ISO/IEC 24760, A framework for identity management http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=57914</p>
    <p>IT- &amp; Telestyrelsen, Begrebsmodel til brugerstyring, Version 1.1, 2010 http://www.digst.dk/~/media/Files/NemLogin/Begrebsmodel_til_brugerstyring_-_Version_1_11.ashx</p>
    <p>Kantara, Identity Relationship Management https://kantarainitiative.org/irmpillars/</p>
    <p>Lakeside, Region Midtjylland, Digital identitet – vigtige begreber og processer, 2014 <em>Grundlaget for eID i regionerne – Bilag 7: Digital identitet – vigtige begreber og processer</em></p>
    <p>National Standard for Identiteters Sikringsniveauer (NSIS) Forventes publiceret primo 2017</p>
    <p>Network Working Group, Request for Comments 2828 http://www.ietf.org/rfc/rfc2828.txt</p>
    <p>NIST, Electronic Authentication Guideline http://csrc.nist.gov/publications/nistpubs/800-63-1/SP-800-63-1.pdf</p>
    <p>OCES-certifikatpolitikker https://www.nemid.nu/dk-da/digital_signatur/oces-standarden/oces-certifikatpolitikker/</p>
    <p>W3C, Web Services Architecture, Working Group Note, 11 February 2004 http://www.w3.org/TR/ws-arch/</p>
    <h3 class="heading settled" id="kilder-og-baggrundsmateriale"><span class="content">Kilder og baggrundsmateriale</span><a class="self-link" href="#kilder-og-baggrundsmateriale"></a></h3>
    <p>Nedenstående liste viser det baggrundsmateriale, der indgår i udarbejdelsen af den tværoffentlige referencearkitektur for identitets- og rettighedsstyring.</p>
    <p><span>[CDT]</span></p>
   </vi>
  </main>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don’t scroll to compensate for the ToC if we’re above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don’t know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn’t exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn’t standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don’t have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we’re at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can’t find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#adgangskontrol">Adgangskontrol</a><span>, in §1.5</span>
   <li><a href="#applikation">Applikation</a><span>, in §1.5</span>
   <li><a href="#brugerrollerolle-der-udgres-af-en-eller-flere-adgangsrettigheder-til-et-eller-flere-it-systemer-som-en-bloc-tildeles-til-en-bruger-brugerroller-anvendes-til-at-afgre-hvilke-handlinger-en-bruger-m-udfre-i-et-it-system-brugerrollen-fastlgger-de-adgangsrettigheder-som-brugeren-er-tildelt-brugere-tilknyttes-til-roller-og-opnr-adgangsrettigheder-ved-at-vre-rolleindehaver-brugerroller-er-grupperinger-af-adgangsrettigheder-der-er-ikke-ndvendigvis-sammenfald-mellem-brugerroller-og-brugerens-profession-stillingsbetegnelse-mv">BrugerrolleRolle der udgøres af en eller flere adgangsrettigheder til et eller flere it-systemer, som en bloc tildeles til en bruger. Brugerroller anvendes til at afgøre, hvilke handlinger en bruger må udføre i et it-system. Brugerrollen fastlægger de adgangsrettigheder, som brugeren er tildelt. Brugere tilknyttes til roller og opnår adgangsrettigheder ved at være rolleindehaver. Brugerroller er grupperinger af adgangsrettigheder. Der er ikke nødvendigvis sammenfald mellem brugerroller og brugerens profession, stillingsbetegnelse mv.</a><span>, in §Unnumbered section</span>
   <li><a href="#brugerstyring">Brugerstyring</a><span>, in §1.5</span>
   <li><a href="#entitet">Entitet</a><span>, in §1.5</span>
   <li><a href="#fderation">Føderation</a><span>, in §2.2</span>
   <li><a href="#fderationer">Føderationer</a><span>, in §1.5</span>
   <li><a href="#forretningstjeneste">Forretningstjeneste</a><span>, in §1.5</span>
   <li><a href="#harmoniserede-tillidstjenester">Harmoniserede tillidstjenester</a><span>, in §2.2</span>
   <li><a href="#identifikationsmiddel">Identifikationsmiddel</a><span>, in §1.5</span>
   <li><a href="#identitet">Identitet</a><span>, in §1.5</span>
   <li><a href="#juridisk-enhed">Juridisk enhed</a><span>, in §1.5</span>
   <li><a href="#person">Person</a><span>, in §1.5</span>
   <li><a href="#princip-10-tvroffentlig-brugerstyring-etableres-i-overensstemmelse-med-internationale-standarder-og-lsninger">Princip 10: Tværoffentlig brugerstyring etableres i overensstemmelse med internationale standarder og løsninger</a><span>, in §2.2</span>
   <li><a href="#princip-7-tjenesteudbyder-den-dataansvarlige-har-ansvaret-for-at-hndhve-brugernes-adgange">Princip 7: Tjenesteudbyder (den dataansvarlige) har ansvaret for at håndhæve brugernes adgange</a><span>, in §2.2</span>
   <li><a href="#princip-8-brugerstyring-realiseres-i-lst-koblede-komponenter">Princip 8: Brugerstyring realiseres i løst koblede komponenter</a><span>, in §2.2</span>
   <li><a href="#princip-9-tvroffentlige-brugerstyringslsninger-baseres-p-en-kerne-af-flles-komponenter-i-samspil-med-vrige-komponenter-i-infrastrukturen">Princip 9: Tværoffentlige brugerstyringsløsninger baseres på en kerne af fælles komponenter i samspil med øvrige komponenter i infrastrukturen</a><span>, in §2.2</span>
   <li><a href="#rolle-der-udgres-af-en-eller-flere-adgangsrettigheder-til-et-eller-flere-it-systemer-som-en-bloc-tildeles-til-en-bruger-brugerroller-anvendes-til-at-afgre-hvilke-handlinger-en-bruger-m-udfre-i-et-it-system-brugerrollen-fastlgger-de-adgangsrettigheder-som-brugeren-er-tildelt-brugere-tilknyttes-til-roller-og-opnr-adgangsrettigheder-ved-at-vre-rolleindehaver-brugerroller-er-grupperinger-af-adgangsrettigheder-der-er-ikke-ndvendigvis-sammenfald-mellem-brugerroller-og-brugerens-profession-stillingsbetegnelse-mv">Rolle der udgøres af en eller flere adgangsrettigheder til et eller flere it-systemer, som en bloc tildeles til en bruger. Brugerroller anvendes til at afgøre, hvilke handlinger en bruger må udføre i et it-system. Brugerrollen fastlægger de adgangsrettigheder, som brugeren er tildelt. Brugere tilknyttes til roller og opnår adgangsrettigheder ved at være rolleindehaver. Brugerroller er grupperinger af adgangsrettigheder. Der er ikke nødvendigvis sammenfald mellem brugerroller og brugerens profession, stillingsbetegnelse mv.</a><span>, in §Unnumbered section</span>
   <li><a href="#samlet-brugeradministration">Samlet? brugeradministration</a><span>, in §2.2</span>
   <li><a href="#ting">Ting</a><span>, in §1.5</span>
  </ul>